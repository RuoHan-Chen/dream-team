(function(P,G){typeof exports=="object"&&typeof module<"u"?G(exports):typeof define=="function"&&define.amd?define(["exports"],G):(P=typeof globalThis<"u"?globalThis:P||self,G(P.OpenAIAgentsRealtime={}))})(this,function(P){"use strict";var Tc=Object.defineProperty;var va=P=>{throw TypeError(P)};var kc=(P,G,X)=>G in P?Tc(P,G,{enumerable:!0,configurable:!0,writable:!0,value:X}):P[G]=X;var _=(P,G,X)=>kc(P,typeof G!="symbol"?G+"":G,X),Nr=(P,G,X)=>G.has(P)||va("Cannot "+X);var u=(P,G,X)=>(Nr(P,G,"read from private field"),X?X.call(P):G.get(P)),k=(P,G,X)=>G.has(P)?va("Cannot add the same private member more than once"):G instanceof WeakSet?G.add(P):G.set(P,X),y=(P,G,X,Ot)=>(Nr(P,G,"write to private field"),Ot?Ot.call(P,X):G.set(P,X),X),F=(P,G,X)=>(Nr(P,G,"access private method"),X);var yt,Gt,vt,Vt,zt,wt,ae,Pe,Ue,Je,bt,ce,Rr,Dr,Et,pe,Wt,Ht,Yt,Xt,rt,Be,qe,st,Qt,xt,je,se,at,Un,ba,fe,Kt,St,be,Ge,en,tn,nn,rn,Tt,ie,Pr,jr,Mr,xa,Zr,it,sn,he,an,z,on,ot,un,ut,kt,ee,cn,Me,ct,dt,Jn,Sa,B,Z,dn,M,It,At,ln,Y,pn,Ct,W,Bn,qn,Ta,Gn,ka,$r,Ia;const G={version:"0.0.9"};function X(n){const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r.buffer}function Ot(n){const e=String.fromCharCode(...new Uint8Array(n));return btoa(e)}function Fr(n){if(typeof n>"u"||n===null||typeof n!="object"||!("type"in n)||typeof n.type!="string"||!n.type||n.type!=="message"||!("content"in n)||!Array.isArray(n.content)||n.content.length<1)return;const e=n.content[n.content.length-1];if(!(!("type"in e)||typeof e.type!="string")){if(e.type==="text")return typeof e.text=="string"?e.text:void 0;if(e.type==="audio")return typeof e.transcript=="string"?e.transcript:void 0}}function Aa(n,e){const t=n.filter(a=>!e.some(i=>i.itemId===a.itemId)),r=e.filter(a=>!n.some(i=>i.itemId===a.itemId)),s=e.filter(a=>n.some(i=>i.itemId===a.itemId&&JSON.stringify(i)!==JSON.stringify(a)));return{removals:t,additions:r,updates:s}}function Ca(){return typeof window>"u"?!1:typeof window.RTCPeerConnection<"u"}function Lr(n){return n.role==="system"?n:n.role==="assistant"?{...n,content:n.content.map(e=>e.type==="audio"?{...e,audio:null}:e)}:n.role==="user"?{...n,content:n.content.map(e=>e.type==="input_audio"?{...e,audio:null}:e)}:n}function Ea(n,e,t){const r=!t&&e.type==="message"?Lr(e):e,s=n.findIndex(a=>a.itemId===e.itemId);if(s!==-1)return n.map((a,i)=>i===s?r:!t&&a.type==="message"?Lr(a):a);if(e.previousItemId){const a=n.findIndex(i=>i.itemId===e.previousItemId);return a!==-1?[...n.slice(0,a+1),r,...n.slice(a+1)]:[...n,r]}else return[...n,r]}const Oa={"User-Agent":`Agents/JavaScript ${G.version}`,"X-OpenAI-Agents-SDK":`openai-agents-sdk.${G.version}`},Na=`openai-agents-sdk.${G.version}`;async function Vn(n){try{return[null,await n()]}catch(e){return[e,null]}}function Ra(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}const Da=Symbol("Let zodToJsonSchema decide on which parser to use"),Ur={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Pa=n=>typeof n=="string"?{...Ur,basePath:["#"],definitions:{},name:n}:{...Ur,basePath:["#"],definitions:{},...n},zn=n=>"_def"in n?n._def:n;function ja(n){if(!n)return!0;for(const e in n)return!1;return!0}const Ma=n=>{const e=Pa(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[zn(s),{def:zn(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Jr(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function V(n,e,t,r,s){n[e]=t,Jr(n,e,r,s)}var Nt;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Nt||(Nt={}));var Br;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Br||(Br={})),Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);let qr=class wa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof wa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};qr.create=n=>new qr(n);var Gr;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Gr||(Gr={}));var D;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(D||(D={}));function Za(){return{}}function $a(n,e){var r,s;const t={type:"array"};return((s=(r=n.type)==null?void 0:r._def)==null?void 0:s.typeName)!==D.ZodAny&&(t.items=J(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&V(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&V(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(V(t,"minItems",n.exactLength.value,n.exactLength.message,e),V(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function Fa(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function La(){return{type:"boolean"}}function Ua(n,e){return J(n.type._def,e)}const Ja=(n,e)=>J(n.innerType._def,e);function Vr(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>Vr(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ba(n,e)}}const Ba=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":V(t,"minimum",r.value,r.message,e);break;case"max":V(t,"maximum",r.value,r.message,e);break}return t};function qa(n,e){return{...J(n.innerType._def,e),default:n.defaultValue()}}function Ga(n,e,t){return e.effectStrategy==="input"?J(n.schema._def,e,t):{}}function Va(n){return{type:"string",enum:[...n.values]}}const za=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function Wa(n,e){const t=[J(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),J(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(a=>{if(za(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...c}=a;i=c}else r=void 0;s.push(i)}}),s.length?{allOf:s,...r}:void 0}function Ha(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let Wn;const Ve={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Wn===void 0&&(Wn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Wn),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function zr(n,e){const t={type:"string"};function r(s){return e.patternStrategy==="escape"?Ya(s):s}if(n.checks)for(const s of n.checks)switch(s.kind){case"min":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ye(t,"email",s.message,e);break;case"format:idn-email":ye(t,"idn-email",s.message,e);break;case"pattern:zod":ve(t,Ve.email,s.message,e);break}break;case"url":ye(t,"uri",s.message,e);break;case"uuid":ye(t,"uuid",s.message,e);break;case"regex":ve(t,s.regex,s.message,e);break;case"cuid":ve(t,Ve.cuid,s.message,e);break;case"cuid2":ve(t,Ve.cuid2,s.message,e);break;case"startsWith":ve(t,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":ve(t,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":ye(t,"date-time",s.message,e);break;case"date":ye(t,"date",s.message,e);break;case"time":ye(t,"time",s.message,e);break;case"duration":ye(t,"duration",s.message,e);break;case"length":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{ve(t,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&ye(t,"ipv4",s.message,e),s.version!=="v4"&&ye(t,"ipv6",s.message,e);break}case"emoji":ve(t,Ve.emoji,s.message,e);break;case"ulid":{ve(t,Ve.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ye(t,"binary",s.message,e);break}case"contentEncoding:base64":{V(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{ve(t,Ve.base64,s.message,e);break}}break}case"nanoid":ve(t,Ve.nanoid,s.message,e)}return t}const Ya=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),ye=(n,e,t,r)=>{var s;n.format||(s=n.anyOf)!=null&&s.some(a=>a.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):V(n,"format",e,t,r)},ve=(n,e,t,r)=>{var s;n.pattern||(s=n.allOf)!=null&&s.some(a=>a.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:Wr(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):V(n,"pattern",Wr(e,r),t,r)},Wr=(n,e)=>{var l;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,c=!1;for(let p=0;p<s.length;p++){if(i){a+=s[p],i=!1;continue}if(r.i){if(o){if(s[p].match(/[a-z]/)){c?(a+=s[p],a+=`${s[p-2]}-${s[p]}`.toUpperCase(),c=!1):s[p+1]==="-"&&((l=s[p+2])!=null&&l.match(/[a-z]/))?(a+=s[p],c=!0):a+=`${s[p]}${s[p].toUpperCase()}`;continue}}else if(s[p].match(/[a-z]/)){a+=`[${s[p]}${s[p].toUpperCase()}]`;continue}}if(r.m){if(s[p]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[p]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&s[p]==="."){a+=o?`${s[p]}\r
`:`[${s[p]}\r
]`;continue}a+=s[p],s[p]==="\\"?i=!0:o&&s[p]==="]"?o=!1:!o&&s[p]==="["&&(o=!0)}try{const p=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function Hr(n,e){var r,s,a,i;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===D.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((o,c)=>({...o,[c]:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===D.ZodString&&((a=n.keyType._def.checks)!=null&&a.length)){const o=Object.entries(zr(n.keyType._def,e)).reduce((c,[l,p])=>l==="type"?c:{...c,[l]:p},{});return{...t,propertyNames:o}}else if(((i=n.keyType)==null?void 0:i._def.typeName)===D.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function Xa(n,e){if(e.mapStrategy==="record")return Hr(n,e);const t=J(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=J(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function Qa(n){const e=n.values,r=Object.keys(n.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Ka(){return{not:{}}}function ei(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const hn={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ti(n,e){if(e.target==="openApi3")return Yr(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in hn&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,a)=>{const i=hn[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return Yr(n,e)}const Yr=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>J(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function ni(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:hn[n.innerType._def.typeName],nullable:!0}:{type:[hn[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=J(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=J(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function ri(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",Jr(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?V(t,"minimum",r.value,r.message,e):V(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?V(t,"maximum",r.value,r.message,e):V(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",r.value,r.message,e));break;case"multipleOf":V(t,"multipleOf",r.value,r.message,e);break}return t}function si(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":J(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":J(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function ai(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[s,a])=>{var c;if(a===void 0||a._def===void 0)return r;const i=[...e.currentPath,"properties",s],o=J(a._def,{...e,currentPath:i,propertyPath:i});if(o===void 0)return r;if(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&typeof((c=a._def)==null?void 0:c.defaultValue)>"u")throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:si(n,e)};return t.required.length||delete t.required,t}const ii=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return J(n.innerType._def,e);const t=J(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},oi=(n,e)=>{if(e.pipeStrategy==="input")return J(n.in._def,e);if(e.pipeStrategy==="output")return J(n.out._def,e);const t=J(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=J(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function ui(n,e){return J(n.type._def,e)}function ci(n,e){const r={type:"array",uniqueItems:!0,items:J(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&V(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&V(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function di(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>J(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:J(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>J(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function li(){return{not:{}}}function pi(){return{}}const fi=(n,e)=>J(n.innerType._def,e);function J(n,e,t=!1){var i;const r=e.seen.get(n);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,n,e,r,t);if(o!==Da)return o}if(r&&!t){const o=hi(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const a=gi(n,n.typeName,e,t);return a&&_i(n,e,a),s.jsonSchema=a,a}const hi=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:mi(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},mi=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},gi=(n,e,t,r)=>{switch(e){case D.ZodString:return zr(n,t);case D.ZodNumber:return ri(n,t);case D.ZodObject:return ai(n,t);case D.ZodBigInt:return Fa(n,t);case D.ZodBoolean:return La();case D.ZodDate:return Vr(n,t);case D.ZodUndefined:return li();case D.ZodNull:return ei(t);case D.ZodArray:return $a(n,t);case D.ZodUnion:case D.ZodDiscriminatedUnion:return ti(n,t);case D.ZodIntersection:return Wa(n,t);case D.ZodTuple:return di(n,t);case D.ZodRecord:return Hr(n,t);case D.ZodLiteral:return Ha(n,t);case D.ZodEnum:return Va(n);case D.ZodNativeEnum:return Qa(n);case D.ZodNullable:return ni(n,t);case D.ZodOptional:return ii(n,t);case D.ZodMap:return Xa(n,t);case D.ZodSet:return ci(n,t);case D.ZodLazy:return J(n.getter()._def,t);case D.ZodPromise:return ui(n,t);case D.ZodNaN:case D.ZodNever:return Ka();case D.ZodEffects:return Ga(n,t,r);case D.ZodAny:return Za();case D.ZodUnknown:return pi();case D.ZodDefault:return qa(n,t);case D.ZodBranded:return Ua(n,t);case D.ZodReadonly:return fi(n,t);case D.ZodCatch:return Ja(n,t);case D.ZodPipeline:return oi(n,t);case D.ZodFunction:case D.ZodVoid:case D.ZodSymbol:return;default:return(s=>{})()}},_i=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),yi=(n,e)=>{const t=Ma(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=J(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const i=(()=>{if(ja(t.definitions))return;const c={},l=new Set;for(let p=0;p<500;p++){const f=Object.entries(t.definitions).filter(([h])=>!l.has(h));if(f.length===0)break;for(const[h,S]of f)c[h]=J(zn(S),{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??{},l.add(h)}return c})(),o=r===void 0?i?{...s,[t.definitionPath]:i}:s:t.nameStrategy==="duplicate-ref"?{...s,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...i,[r]:s}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function vi(n,{parser:e,callback:t}){const r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:t,enumerable:!1}}),r}function Xr(n,e){return yi(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function wi(n,e,t){return Ra({type:"json_schema",...t,name:e,strict:!0,schema:Xr(n,{name:e})},r=>n.parse(JSON.parse(r)))}function bi(n){return vi({type:"function",name:n.name,parameters:Xr(n.parameters,{name:n.name}),strict:!0},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}class Ze extends Error{constructor(t,r){super(t);_(this,"state");this.state=r}}class xi extends Ze{}class Qr extends Ze{}class de extends Ze{}class K extends Ze{}class Kr extends Ze{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class Si extends Ze{constructor(t,r,s){super(t,s);_(this,"error");this.error=r}}class es extends Ze{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}class mn extends Ze{constructor(t,r,s){super(t,s);_(this,"result");this.result=r}}function ze(n){return typeof n=="object"&&n!==null&&"_def"in n&&typeof n._def=="object"&&n._def!==null&&"typeName"in n._def&&n._def.typeName==="ZodObject"}function Ti(n){return typeof n=="object"&&n!==null&&"input"in n&&typeof n.input=="string"}function gn(n){if(n=n.replace(/\s/g,"_"),n=n.replace(/[^a-zA-Z0-9]/g,"_"),n.length===0)throw new Error("Tool name cannot be empty");return n}function Hn(n,e){const t=r=>JSON.parse(r);if(ze(n)){const r=bi({name:e,parameters:n,function:()=>{}});return{schema:r.parameters,parser:r.$parseRaw}}else if(typeof n=="object"&&n!==null)return{schema:n,parser:t};throw new K("Input type is not a ZodObject or a valid JSON schema")}function ts(n){if(n==="text")return"text";if(ze(n)){const e=wi(n,"output");return{type:e.type,name:e.name,strict:e.strict||!1,schema:e.schema}}return n}function ki(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _n={exports:{}},Yn,ns;function Ii(){if(ns)return Yn;ns=1;var n=1e3,e=n*60,t=e*60,r=t*24,s=r*7,a=r*365.25;Yn=function(p,f){f=f||{};var h=typeof p;if(h==="string"&&p.length>0)return i(p);if(h==="number"&&isFinite(p))return f.long?c(p):o(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function i(p){if(p=String(p),!(p.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(f){var h=parseFloat(f[1]),S=(f[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return h*a;case"weeks":case"week":case"w":return h*s;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(p){var f=Math.abs(p);return f>=r?Math.round(p/r)+"d":f>=t?Math.round(p/t)+"h":f>=e?Math.round(p/e)+"m":f>=n?Math.round(p/n)+"s":p+"ms"}function c(p){var f=Math.abs(p);return f>=r?l(p,f,r,"day"):f>=t?l(p,f,t,"hour"):f>=e?l(p,f,e,"minute"):f>=n?l(p,f,n,"second"):p+" ms"}function l(p,f,h,S){var b=f>=h*1.5;return Math.round(p/h)+" "+S+(b?"s":"")}return Yn}var Xn,rs;function Ai(){if(rs)return Xn;rs=1;function n(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=a,r.enabled=c,r.humanize=Ii(),r.destroy=p,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let h=0;for(let S=0;S<f.length;S++)h=(h<<5)-h+f.charCodeAt(S),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(f){let h,S=null,b,w;function E(...R){if(!E.enabled)return;const H=E,te=Number(new Date),me=te-(h||te);H.diff=me,H.prev=h,H.curr=te,h=te,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let ge=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(Or,xc)=>{if(Or==="%%")return"%";ge++;const ya=r.formatters[xc];if(typeof ya=="function"){const Sc=R[ge];Or=ya.call(H,Sc),R.splice(ge,1),ge--}return Or}),r.formatArgs.call(H,R),(H.log||r.log).apply(H,R)}return E.namespace=f,E.useColors=r.useColors(),E.color=r.selectColor(f),E.extend=s,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(b!==r.namespaces&&(b=r.namespaces,w=r.enabled(f)),w),set:R=>{S=R}}),typeof r.init=="function"&&r.init(E),E}function s(f,h){const S=r(this.namespace+(typeof h>"u"?":":h)+f);return S.log=this.log,S}function a(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const S of h)S[0]==="-"?r.skips.push(S.slice(1)):r.names.push(S)}function i(f,h){let S=0,b=0,w=-1,E=0;for(;S<f.length;)if(b<h.length&&(h[b]===f[S]||h[b]==="*"))h[b]==="*"?(w=b,E=S,b++):(S++,b++);else if(w!==-1)b=w+1,E++,S=E;else return!1;for(;b<h.length&&h[b]==="*";)b++;return b===h.length}function o(){const f=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),f}function c(f){for(const h of r.skips)if(i(f,h))return!1;for(const h of r.names)if(i(f,h))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Xn=n,Xn}var ss;function Ci(){return ss||(ss=1,function(n,e){e.formatArgs=r,e.save=s,e.load=a,e.useColors=t,e.storage=i(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let p=0,f=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(p++,h==="%c"&&(f=p))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function i(){try{return localStorage}catch{}}n.exports=Ai()(e);const{formatters:o}=n.exports;o.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(_n,_n.exports)),_n.exports}var Ei=Ci();const Oi=ki(Ei);function Ni(){return fo()}function as(n){const e=Ni();return typeof e<"u"&&(e[n]==="true"||e[n]==="1")}const is={get disabled(){return!0}},os={get dontLogModelData(){return as("OPENAI_AGENTS_DONT_LOG_MODEL_DATA")},get dontLogToolData(){return as("OPENAI_AGENTS_DONT_LOG_TOOL_DATA")}},Ri=os.dontLogModelData,Di=os.dontLogToolData;function us(n="openai-agents"){return{namespace:n,debug:Oi(n),error:console.error,warn:console.warn,dontLogModelData:Ri,dontLogToolData:Di}}const C=us("openai-agents:core");function We(n){if(n==null)return String(n);if(typeof n=="string")return n;if(typeof n=="object")try{return JSON.stringify(n)}catch{return"[object with circular references]"}return String(n)}function Pi(n,e){return`An error occurred while running the tool. Please try again. Error: ${e instanceof Error?e.toString():String(e)}`}function yn(n){const e=n.name?gn(n.name):gn(n.execute.name),t=typeof n.errorFunction>"u"?Pi:n.errorFunction;if(!e)throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");const r=n.strict??!0;if(!r&&ze(n.parameters))throw new K("Strict mode is required for Zod parameters");const{parser:s,schema:a}=Hn(n.parameters,e);async function i(l,p){const[f,h]=await Vn(()=>s(p));if(f!==null)throw C.dontLogToolData?C.debug(`Invalid JSON input for tool ${e}`):C.debug(`Invalid JSON input for tool ${e}: ${p}`),new de("Invalid JSON input for tool");C.dontLogToolData?C.debug(`Invoking tool ${e}`):C.debug(`Invoking tool ${e} with input ${p}`);const S=await n.execute(h,l),b=We(S);return C.dontLogToolData?C.debug(`Tool ${e} completed`):C.debug(`Tool ${e} returned: ${b}`),S}async function o(l,p){return i(l,p).catch(f=>{if(t){const h=Zt();return h==null||h.setError({message:"Error running tool (non-fatal)",data:{tool_name:e,error:f.toString()}}),t(l,f)}throw f})}const c=typeof n.needsApproval=="function"?n.needsApproval:async()=>typeof n.needsApproval=="boolean"?n.needsApproval:!1;return{type:"function",name:e,description:n.description,parameters:a,strict:r,invoke:o,needsApproval:c}}var L;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(const o of a)i[o]=s[o];return n.objectValues(i)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},n.find=(s,a)=>{for(const i of s)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(L||(L={}));var cs;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(cs||(cs={}));const T=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$e=n=>{switch(typeof n){case"undefined":return T.undefined;case"string":return T.string;case"number":return Number.isNaN(n)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(n)?T.array:n===null?T.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?T.promise:typeof Map<"u"&&n instanceof Map?T.map:typeof Set<"u"&&n instanceof Set?T.set:typeof Date<"u"&&n instanceof Date?T.date:T.object;default:return T.unknown}},v=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ce extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Ce))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ce.create=n=>new Ce(n);const Qn=(n,e)=>{let t;switch(n.code){case v.invalid_type:n.received===T.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case v.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,L.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:t=`Unrecognized key(s) in object: ${L.joinValues(n.keys,", ")}`;break;case v.invalid_union:t="Invalid input";break;case v.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${L.joinValues(n.options)}`;break;case v.invalid_enum_value:t=`Invalid enum value. Expected ${L.joinValues(n.options)}, received '${n.received}'`;break;case v.invalid_arguments:t="Invalid function arguments";break;case v.invalid_return_type:t="Invalid function return type";break;case v.invalid_date:t="Invalid date";break;case v.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:L.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case v.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case v.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case v.custom:t="Invalid input";break;case v.invalid_intersection_types:t="Intersection results could not be merged";break;case v.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case v.not_finite:t="Number must be finite";break;default:t=e.defaultError,L.assertNever(n)}return{message:t}};let ji=Qn;function Mi(){return ji}const Zi=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,a=[...t,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let o="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)o=l(i,{data:e,defaultError:o}).message;return{...s,path:a,message:o}};function x(n,e){const t=Mi(),r=Zi({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Qn?void 0:Qn].filter(s=>!!s)});n.common.issues.push(r)}class oe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return O;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const a=await s.key,i=await s.value;r.push({key:a,value:i})}return oe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return O;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}}const O=Object.freeze({status:"aborted"}),Rt=n=>({status:"dirty",value:n}),_e=n=>({status:"valid",value:n}),ds=n=>n.status==="aborted",ls=n=>n.status==="dirty",lt=n=>n.status==="valid",vn=n=>typeof Promise<"u"&&n instanceof Promise;var I;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(I||(I={}));class xe{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ps=(n,e)=>{if(lt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ce(n.common.issues);return this._error=t,this._error}}};function j(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,o)=>{const{message:c}=n;return i.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:c??t??o.defaultError}},description:s}}class ${get description(){return this._def.description}_getType(e){return $e(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new oe,ctx:{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(vn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},s=this._parseSync({data:e,path:r.path,parent:r});return ps(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return lt(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>lt(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(vn(s)?s:Promise.resolve(s));return ps(r,a)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const i=e(s),o=()=>a.addIssue({code:v.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Xe({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ne.create(this,this._def)}nullable(){return Qe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Se.create(this)}promise(){return In.create(this,this._def)}or(e){return bn.create([this,e],this._def)}and(e){return xn.create(this,e,this._def)}transform(e){return new Xe({...j(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new An({...j(this._def),innerType:this,defaultValue:t,typeName:N.ZodDefault})}brand(){return new bs({typeName:N.ZodBranded,type:this,...j(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Cn({...j(this._def),innerType:this,catchValue:t,typeName:N.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return or.create(this,e)}readonly(){return En.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $i=/^c[^\s-]{8,}$/i,Fi=/^[0-9a-z]+$/,Li=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ui=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ji=/^[a-z0-9_-]{21}$/i,Bi=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Gi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kn;const zi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Xi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ki=new RegExp(`^${fs}$`);function hs(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function eo(n){return new RegExp(`^${hs(n)}$`)}function to(n){let e=`${fs}T${hs(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function no(n,e){return!!((e==="v4"||!e)&&zi.test(n)||(e==="v6"||!e)&&Hi.test(n))}function ro(n,e){if(!Bi.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function so(n,e){return!!((e==="v4"||!e)&&Wi.test(n)||(e==="v6"||!e)&&Yi.test(n))}class Ee extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==T.string){const a=this._getOrReturnCtx(e);return x(a,{code:v.invalid_type,expected:T.string,received:a.parsedType}),O}const r=new oe;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),x(s,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),x(s,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(s=this._getOrReturnCtx(e,s),i?x(s,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&x(s,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Gi.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"email",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Kn||(Kn=new RegExp(Vi,"u")),Kn.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"emoji",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Ui.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"uuid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Ji.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"nanoid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")$i.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"cuid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Fi.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"cuid2",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Li.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"ulid",code:v.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),x(s,{validation:"url",code:v.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"regex",code:v.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?to(a).test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Ki.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?eo(a).test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{code:v.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?qi.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"duration",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?no(e.data,a.version)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"ip",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?ro(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"jwt",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?so(e.data,a.version)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"cidr",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Xi.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"base64",code:v.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Qi.test(e.data)||(s=this._getOrReturnCtx(e,s),x(s,{validation:"base64url",code:v.invalid_string,message:a.message}),r.dirty()):L.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:v.invalid_string,...I.errToObj(r)})}_addCheck(e){return new Ee({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...I.errToObj(e)})}url(e){return this._addCheck({kind:"url",...I.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...I.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...I.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...I.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...I.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...I.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...I.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...I.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...I.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...I.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...I.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...I.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...I.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...I.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...I.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...I.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...I.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...I.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...I.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...I.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...I.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...I.errToObj(t)})}nonempty(e){return this.min(1,I.errToObj(e))}trim(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ee({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ee.create=n=>new Ee({checks:[],typeName:N.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...j(n)});function ao(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,a=Number.parseInt(n.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return a%i/10**s}class pt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==T.number){const a=this._getOrReturnCtx(e);return x(a,{code:v.invalid_type,expected:T.number,received:a.parsedType}),O}let r;const s=new oe;for(const a of this._def.checks)a.kind==="int"?L.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),x(r,{code:v.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?ao(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),x(r,{code:v.not_finite,message:a.message}),s.dirty()):L.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,r,s){return new pt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:I.toString(s)}]})}_addCheck(e){return new pt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:I.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:I.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:I.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:I.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&L.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pt.create=n=>new pt({checks:[],typeName:N.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...j(n)});class Dt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==T.bigint)return this._getInvalidInput(e);let r;const s=new oe;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),x(r,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):L.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return x(t,{code:v.invalid_type,expected:T.bigint,received:t.parsedType}),O}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,r,s){return new Dt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:I.toString(s)}]})}_addCheck(e){return new Dt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Dt.create=n=>new Dt({checks:[],typeName:N.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...j(n)});class er extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==T.boolean){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.boolean,received:r.parsedType}),O}return _e(e.data)}}er.create=n=>new er({typeName:N.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...j(n)});class wn extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==T.date){const a=this._getOrReturnCtx(e);return x(a,{code:v.invalid_type,expected:T.date,received:a.parsedType}),O}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return x(a,{code:v.invalid_date}),O}const r=new oe;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),x(s,{code:v.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),x(s,{code:v.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):L.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:I.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:I.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}wn.create=n=>new wn({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:N.ZodDate,...j(n)});class ms extends ${_parse(e){if(this._getType(e)!==T.symbol){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.symbol,received:r.parsedType}),O}return _e(e.data)}}ms.create=n=>new ms({typeName:N.ZodSymbol,...j(n)});class tr extends ${_parse(e){if(this._getType(e)!==T.undefined){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.undefined,received:r.parsedType}),O}return _e(e.data)}}tr.create=n=>new tr({typeName:N.ZodUndefined,...j(n)});class nr extends ${_parse(e){if(this._getType(e)!==T.null){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.null,received:r.parsedType}),O}return _e(e.data)}}nr.create=n=>new nr({typeName:N.ZodNull,...j(n)});class rr extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return _e(e.data)}}rr.create=n=>new rr({typeName:N.ZodAny,...j(n)});class gs extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return _e(e.data)}}gs.create=n=>new gs({typeName:N.ZodUnknown,...j(n)});class Fe extends ${_parse(e){const t=this._getOrReturnCtx(e);return x(t,{code:v.invalid_type,expected:T.never,received:t.parsedType}),O}}Fe.create=n=>new Fe({typeName:N.ZodNever,...j(n)});class _s extends ${_parse(e){if(this._getType(e)!==T.undefined){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.void,received:r.parsedType}),O}return _e(e.data)}}_s.create=n=>new _s({typeName:N.ZodVoid,...j(n)});class Se extends ${_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==T.array)return x(t,{code:v.invalid_type,expected:T.array,received:t.parsedType}),O;if(s.exactLength!==null){const i=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(i||o)&&(x(t,{code:i?v.too_big:v.too_small,minimum:o?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(x(t,{code:v.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(x(t,{code:v.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>s.type._parseAsync(new xe(t,i,t.path,o)))).then(i=>oe.mergeArray(r,i));const a=[...t.data].map((i,o)=>s.type._parseSync(new xe(t,i,t.path,o)));return oe.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new Se({...this._def,minLength:{value:e,message:I.toString(t)}})}max(e,t){return new Se({...this._def,maxLength:{value:e,message:I.toString(t)}})}length(e,t){return new Se({...this._def,exactLength:{value:e,message:I.toString(t)}})}nonempty(e){return this.min(1,e)}}Se.create=(n,e)=>new Se({type:n,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...j(e)});function ft(n){if(n instanceof Q){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ne.create(ft(r))}return new Q({...n._def,shape:()=>e})}else return n instanceof Se?new Se({...n._def,type:ft(n.element)}):n instanceof Ne?Ne.create(ft(n.unwrap())):n instanceof Qe?Qe.create(ft(n.unwrap())):n instanceof He?He.create(n.items.map(e=>ft(e))):n}class Q extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=L.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==T.object){const l=this._getOrReturnCtx(e);return x(l,{code:v.invalid_type,expected:T.object,received:l.parsedType}),O}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Fe&&this._def.unknownKeys==="strip"))for(const l in s.data)i.includes(l)||o.push(l);const c=[];for(const l of i){const p=a[l],f=s.data[l];c.push({key:{status:"valid",value:l},value:p._parse(new xe(s,f,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Fe){const l=this._def.unknownKeys;if(l==="passthrough")for(const p of o)c.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(l==="strict")o.length>0&&(x(s,{code:v.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const p of o){const f=s.data[p];c.push({key:{status:"valid",value:p},value:l._parse(new xe(s,f,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const p of c){const f=await p.key,h=await p.value;l.push({key:f,value:h,alwaysSet:p.alwaysSet})}return l}).then(l=>oe.mergeObjectSync(r,l)):oe.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return I.errToObj,new Q({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i;const s=((i=(a=this._def).errorMap)==null?void 0:i.call(a,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:I.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Q({...this._def,unknownKeys:"strip"})}passthrough(){return new Q({...this._def,unknownKeys:"passthrough"})}extend(e){return new Q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Q({...this._def,catchall:e})}pick(e){const t={};for(const r of L.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}omit(e){const t={};for(const r of L.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}deepPartial(){return ft(this)}partial(e){const t={};for(const r of L.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new Q({...this._def,shape:()=>t})}required(e){const t={};for(const r of L.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ne;)a=a._def.innerType;t[r]=a}return new Q({...this._def,shape:()=>t})}keyof(){return vs(L.objectKeys(this.shape))}}Q.create=(n,e)=>new Q({shape:()=>n,unknownKeys:"strip",catchall:Fe.create(),typeName:N.ZodObject,...j(e)}),Q.strictCreate=(n,e)=>new Q({shape:()=>n,unknownKeys:"strict",catchall:Fe.create(),typeName:N.ZodObject,...j(e)}),Q.lazycreate=(n,e)=>new Q({shape:n,unknownKeys:"strip",catchall:Fe.create(),typeName:N.ZodObject,...j(e)});class bn extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Ce(o.ctx.common.issues));return x(t,{code:v.invalid_union,unionErrors:i}),O}if(t.common.async)return Promise.all(r.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},p=c._parseSync({data:t.data,path:t.path,parent:l});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(c=>new Ce(c));return x(t,{code:v.invalid_union,unionErrors:o}),O}}get options(){return this._def.options}}bn.create=(n,e)=>new bn({options:n,typeName:N.ZodUnion,...j(e)});const Oe=n=>n instanceof Tn?Oe(n.schema):n instanceof Xe?Oe(n.innerType()):n instanceof kn?[n.value]:n instanceof Ye?n.options:n instanceof ir?L.objectValues(n.enum):n instanceof An?Oe(n._def.innerType):n instanceof tr?[void 0]:n instanceof nr?[null]:n instanceof Ne?[void 0,...Oe(n.unwrap())]:n instanceof Qe?[null,...Oe(n.unwrap())]:n instanceof bs||n instanceof En?Oe(n.unwrap()):n instanceof Cn?Oe(n._def.innerType):[];class sr extends ${_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.object)return x(t,{code:v.invalid_type,expected:T.object,received:t.parsedType}),O;const r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(x(t,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const a of t){const i=Oe(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,a)}}return new sr({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...j(r)})}}function ar(n,e){const t=$e(n),r=$e(e);if(n===e)return{valid:!0,data:n};if(t===T.object&&r===T.object){const s=L.objectKeys(e),a=L.objectKeys(n).filter(o=>s.indexOf(o)!==-1),i={...n,...e};for(const o of a){const c=ar(n[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===T.array&&r===T.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<n.length;a++){const i=n[a],o=e[a],c=ar(i,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===T.date&&r===T.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class xn extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(a,i)=>{if(ds(a)||ds(i))return O;const o=ar(a.value,i.value);return o.valid?((ls(a)||ls(i))&&t.dirty(),{status:t.value,value:o.data}):(x(r,{code:v.invalid_intersection_types}),O)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xn.create=(n,e,t)=>new xn({left:n,right:e,typeName:N.ZodIntersection,...j(t)});class He extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==T.array)return x(r,{code:v.invalid_type,expected:T.array,received:r.parsedType}),O;if(r.data.length<this._def.items.length)return x(r,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&r.data.length>this._def.items.length&&(x(r,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new xe(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>oe.mergeArray(t,i)):oe.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new He({...this._def,rest:e})}}He.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new He({items:n,typeName:N.ZodTuple,rest:null,...j(e)})};class Sn extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==T.object)return x(r,{code:v.invalid_type,expected:T.object,received:r.parsedType}),O;const s=[],a=this._def.keyType,i=this._def.valueType;for(const o in r.data)s.push({key:a._parse(new xe(r,o,r.path,o)),value:i._parse(new xe(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?oe.mergeObjectAsync(t,s):oe.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof $?new Sn({keyType:e,valueType:t,typeName:N.ZodRecord,...j(r)}):new Sn({keyType:Ee.create(),valueType:e,typeName:N.ZodRecord,...j(t)})}}class ys extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==T.map)return x(r,{code:v.invalid_type,expected:T.map,received:r.parsedType}),O;const s=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,c],l)=>({key:s._parse(new xe(r,o,r.path,[l,"key"])),value:a._parse(new xe(r,c,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const l=await c.key,p=await c.value;if(l.status==="aborted"||p.status==="aborted")return O;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const l=c.key,p=c.value;if(l.status==="aborted"||p.status==="aborted")return O;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}}}}ys.create=(n,e,t)=>new ys({valueType:e,keyType:n,typeName:N.ZodMap,...j(t)});class Pt extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==T.set)return x(r,{code:v.invalid_type,expected:T.set,received:r.parsedType}),O;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(x(r,{code:v.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(x(r,{code:v.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const l=new Set;for(const p of c){if(p.status==="aborted")return O;p.status==="dirty"&&t.dirty(),l.add(p.value)}return{status:t.value,value:l}}const o=[...r.data.values()].map((c,l)=>a._parse(new xe(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new Pt({...this._def,minSize:{value:e,message:I.toString(t)}})}max(e,t){return new Pt({...this._def,maxSize:{value:e,message:I.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Pt.create=(n,e)=>new Pt({valueType:n,minSize:null,maxSize:null,typeName:N.ZodSet,...j(e)});class Tn extends ${get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Tn.create=(n,e)=>new Tn({getter:n,typeName:N.ZodLazy,...j(e)});class kn extends ${_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return x(t,{received:t.data,code:v.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}}kn.create=(n,e)=>new kn({value:n,typeName:N.ZodLiteral,...j(e)});function vs(n,e){return new Ye({values:n,typeName:N.ZodEnum,...j(e)})}class Ye extends ${_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return x(t,{expected:L.joinValues(r),received:t.parsedType,code:v.invalid_type}),O}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return x(t,{received:t.data,code:v.invalid_enum_value,options:r}),O}return _e(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ye.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ye.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Ye.create=vs;class ir extends ${_parse(e){const t=L.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==T.string&&r.parsedType!==T.number){const s=L.objectValues(t);return x(r,{expected:L.joinValues(s),received:r.parsedType,code:v.invalid_type}),O}if(this._cache||(this._cache=new Set(L.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=L.objectValues(t);return x(r,{received:r.data,code:v.invalid_enum_value,options:s}),O}return _e(e.data)}get enum(){return this._def.values}}ir.create=(n,e)=>new ir({values:n,typeName:N.ZodNativeEnum,...j(e)});class In extends ${unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==T.promise&&t.common.async===!1)return x(t,{code:v.invalid_type,expected:T.promise,received:t.parsedType}),O;const r=t.parsedType===T.promise?t.data:Promise.resolve(t.data);return _e(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}In.create=(n,e)=>new In({type:n,typeName:N.ZodPromise,...j(e)});class Xe extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{x(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return O;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?O:c.status==="dirty"||t.value==="dirty"?Rt(c.value):c});{if(t.value==="aborted")return O;const o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?O:o.status==="dirty"||t.value==="dirty"?Rt(o.value):o}}if(s.type==="refinement"){const i=o=>{const c=s.refinement(o,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!lt(i))return O;const o=s.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>lt(i)?Promise.resolve(s.transform(i.value,a)).then(o=>({status:t.value,value:o})):O);L.assertNever(s)}}Xe.create=(n,e,t)=>new Xe({schema:n,typeName:N.ZodEffects,effect:e,...j(t)}),Xe.createWithPreprocess=(n,e,t)=>new Xe({schema:e,effect:{type:"preprocess",transform:n},typeName:N.ZodEffects,...j(t)});class Ne extends ${_parse(e){return this._getType(e)===T.undefined?_e(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ne.create=(n,e)=>new Ne({innerType:n,typeName:N.ZodOptional,...j(e)});class Qe extends ${_parse(e){return this._getType(e)===T.null?_e(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qe.create=(n,e)=>new Qe({innerType:n,typeName:N.ZodNullable,...j(e)});class An extends ${_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===T.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}An.create=(n,e)=>new An({innerType:n,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...j(e)});class Cn extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vn(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ce(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Cn.create=(n,e)=>new Cn({innerType:n,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...j(e)});class ws extends ${_parse(e){if(this._getType(e)!==T.nan){const r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:T.nan,received:r.parsedType}),O}return{status:"valid",value:e.data}}}ws.create=n=>new ws({typeName:N.ZodNaN,...j(n)});class bs extends ${_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class or extends ${_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?O:a.status==="dirty"?(t.dirty(),Rt(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?O:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new or({in:e,out:t,typeName:N.ZodPipeline})}}class En extends ${_parse(e){const t=this._def.innerType._parse(e),r=s=>(lt(s)&&(s.value=Object.freeze(s.value)),s);return vn(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}En.create=(n,e)=>new En({innerType:n,typeName:N.ZodReadonly,...j(e)});var N;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(N||(N={}));const d=Ee.create,A=pt.create,jt=er.create,U=rr.create;Fe.create;const q=Se.create,g=Q.create,xs=bn.create,le=sr.create;xn.create,He.create;const ne=Sn.create,io=Tn.create,m=kn.create,ue=Ye.create;In.create,Ne.create,Qe.create,g({name:d(),description:d().optional(),inputSchema:g({type:m("object"),properties:ne(d(),U()),required:q(d()),additionalProperties:jt()})});async function oo(n,e=!1){const t=[],r=new Set;for(const s of n){const a=await uo(s,e),o=[...new Set(a.map(c=>c.name))].filter(c=>r.has(c));if(o.length>0)throw new K(`Duplicate tool names found across MCP servers: ${o.join(", ")}`);for(const c of a)r.add(c.name),t.push(c)}return t}const ur={};async function uo(n,e){return n.cacheToolsList&&ur[n.name]?ur[n.name]:jo(async t=>{const r=await n.listTools();t.spanData.result=r.map(a=>a.name);const s=r.map(a=>lo(a,n,e));return n.cacheToolsList&&(ur[n.name]=s),s},{data:{server:n.name}})}async function co(n,e=!1){return oo(n,e)}function lo(n,e,t){var i,o,c,l;async function r(p,f){let h={};typeof p=="string"&&p?h=JSON.parse(p):typeof p=="object"&&p!=null&&(h=p);const S=Zt();S&&(S.spanData.mcp_data={server:e.name});const b=await e.callTool(n.name,h);return b.length===1?b[0]:b}const s={type:((i=n.inputSchema)==null?void 0:i.type)??"object",properties:((o=n.inputSchema)==null?void 0:o.properties)??{},required:((c=n.inputSchema)==null?void 0:c.required)??[],additionalProperties:((l=n.inputSchema)==null?void 0:l.additionalProperties)??!1};if(t||s.additionalProperties===!0)try{const p=po(s);return yn({name:n.name,description:n.description||"",parameters:p,strict:!0,execute:r})}catch(p){C.warn(`Error converting MCP schema to strict mode: ${p}`)}const a={...s,additionalProperties:!0};return yn({name:n.name,description:n.description||"",parameters:a,strict:!1,execute:r})}function po(n){const e={...n,additionalProperties:!1};return e.required||(e.required=[]),e}function fo(){return{}}class On{constructor(){k(this,yt,new EventTarget)}on(e,t){return u(this,yt).addEventListener(e,r=>t(...r.detail??[])),this}off(e,t){return u(this,yt).removeEventListener(e,r=>t(...r.detail??[])),this}emit(e,...t){const r=new CustomEvent(e,{detail:t});return u(this,yt).dispatchEvent(r)}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};return this.on(e,r),this}}yt=new WeakMap;const Ss=crypto.randomUUID.bind(crypto),ho=class{constructor(){}pipeTo(e,t){}pipeThrough(e,t){}},mo=globalThis.ReadableStream,go=globalThis.TransformStream;class _o{constructor(){_(this,"context",null)}run(e,t){return this.context=e,t()}getStore(){return this.context}enterWith(e){this.context=e}}class yo{constructor(){}setTimeout(e,t){const r=setTimeout(e,t);return r.ref=typeof r.ref=="function"?r.ref:()=>r,r.unref=typeof r.unref=="function"?r.unref:()=>r,r.hasRef=typeof r.hasRef=="function"?r.hasRef:()=>!0,r.refresh=typeof r.refresh=="function"?r.refresh:()=>r,r}clearTimeout(e){window.clearTimeout(e)}}const vo=new yo;let Ts;function Te(){return Ts??(Ts=new _o),Ts}function Mt(){const n=Te().getStore();return n!=null&&n.trace?n.trace:null}function Zt(){const n=Te().getStore();return n!=null&&n.span?n.span:null}function ks(n){return async()=>{const e=Mt();if(!e)throw new Error("No trace found");await e.start();const t=await n(e);return await e.end(),t}}async function wo(n,e,t={}){const r=typeof n=="string"?ke().createTrace({...t,name:n}):n;return Te().run({trace:r},ks(e))}async function bo(n,e={}){if(Mt())return await n();const r=ke().createTrace(e);return Te().run({trace:r},ks(n))}function Nn(n){const e=Te().getStore();if(!e)throw new Error("No existing trace found");e.span&&(e.span.previousSpan=e.previousSpan,e.previousSpan=e.span),e.span=n,Te().enterWith(e)}function $t(){var e;const n=Te().getStore();n&&(n.span=n.previousSpan,n.previousSpan=(e=n.previousSpan)==null?void 0:e.previousSpan,Te().enterWith(n))}function ht(n){const e=Zt();e&&e.setError(n)}function xo(n){var e,t,r;return{trace:(e=n.trace)==null?void 0:e.clone(),span:(t=n.span)==null?void 0:t.clone(),previousSpan:(r=n.previousSpan)==null?void 0:r.clone()}}function cr(n){const e=Te().getStore();if(!e)throw new Error("No existing trace found");const t=xo(e);return Te().run(t,n)}class So{async export(e){if(is.disabled){C.debug("Tracing is disabled. Skipping export");return}for(const t of e)t.type==="trace"?console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}`):console.log(`[Exporter] Export span: ${JSON.stringify(t)}`)}}class To{constructor(e,{maxQueueSize:t=1e3,maxBatchSize:r=100,scheduleDelay:s=5e3,exportTriggerRatio:a=.8}={}){k(this,ce);k(this,Gt);k(this,vt);k(this,Vt);k(this,zt);k(this,wt);k(this,ae,[]);k(this,Pe);k(this,Ue,null);k(this,Je,!1);k(this,bt,null);y(this,Gt,t),y(this,vt,r),y(this,Vt,s),y(this,zt,t*a),y(this,wt,e),y(this,Pe,vo),C.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.")}start(){y(this,bt,new AbortController),F(this,ce,Dr).call(this)}async onTraceStart(e){await F(this,ce,Rr).call(this,e)}async onTraceEnd(e){}async onSpanStart(e){}async onSpanEnd(e){await F(this,ce,Rr).call(this,e)}async shutdown(e){var t;for(e&&u(this,Pe).setTimeout(()=>{var r;(r=u(this,bt))==null||r.abort()},e),C.debug("Shutting down gracefully");u(this,ae).length>0;){if(C.debug(`Waiting for buffer to empty. Items left: ${u(this,ae).length}`),u(this,Je)||await F(this,ce,Et).call(this,!0),(t=u(this,bt))!=null&&t.signal.aborted){C.debug("Timeout reached, force flushing"),await F(this,ce,Et).call(this,!0);break}await new Promise(r=>u(this,Pe).setTimeout(r,500))}C.debug("Buffer empty. Exiting"),u(this,Pe)&&u(this,Ue)&&u(this,Pe).clearTimeout(u(this,Ue))}async forceFlush(){u(this,ae).length>0&&await F(this,ce,Et).call(this,!0)}}Gt=new WeakMap,vt=new WeakMap,Vt=new WeakMap,zt=new WeakMap,wt=new WeakMap,ae=new WeakMap,Pe=new WeakMap,Ue=new WeakMap,Je=new WeakMap,bt=new WeakMap,ce=new WeakSet,Rr=async function(e){if(u(this,ae).length+1>u(this,Gt)){C.error("Dropping trace because buffer is full");return}u(this,ae).push(e),u(this,ae).length>u(this,zt)&&await F(this,ce,Et).call(this)},Dr=function(){y(this,Ue,u(this,Pe).setTimeout(async()=>{await F(this,ce,Et).call(this),F(this,ce,Dr).call(this)},u(this,Vt))),typeof u(this,Ue).unref=="function"&&u(this,Ue).unref()},Et=async function(e=!1){if(u(this,ae).length!==0){if(C.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this,ae).length}`),e||u(this,ae).length<u(this,vt)){const t=[...u(this,ae)];y(this,ae,[]),y(this,Je,!0),await u(this,wt).export(t),y(this,Je,!1)}else if(u(this,ae).length>0){const t=u(this,ae).splice(0,u(this,vt));y(this,Je,!0),await u(this,wt).export(t),y(this,Je,!1)}}};class ko{constructor(){k(this,pe,[])}start(){for(const e of u(this,pe))e.start&&e.start()}addTraceProcessor(e){u(this,pe).push(e)}setProcessors(e){C.debug("Shutting down old processors");for(const t of u(this,pe))t.shutdown();y(this,pe,e)}async onTraceStart(e){for(const t of u(this,pe))await t.onTraceStart(e)}async onTraceEnd(e){for(const t of u(this,pe))await t.onTraceEnd(e)}async onSpanStart(e){for(const t of u(this,pe))await t.onSpanStart(e)}async onSpanEnd(e){for(const t of u(this,pe))await t.onSpanEnd(e)}async shutdown(e){for(const t of u(this,pe))await t.shutdown(e)}async forceFlush(){for(const e of u(this,pe))await e.forceFlush()}}pe=new WeakMap;let dr=null,lr=null;function Io(){return dr||(dr=new So),dr}function Is(){return lr||(lr=new To(Io())),lr}function As(){return new Date().toISOString()}function Cs(){return`trace_${Ss().replace(/-/g,"")}`}function Ao(){return`span_${Ss().replace(/-/g,"").slice(0,24)}`}function Co(n){return Object.fromEntries(Object.entries(n).filter(([e])=>!e.startsWith("_")))}const Ar=class Ar{constructor(e,t){_(this,"type","trace.span");k(this,Wt);k(this,Ht);k(this,Yt);k(this,Xt);k(this,rt);k(this,Be);k(this,qe);k(this,st);k(this,Qt);y(this,Ht,e.traceId),y(this,Yt,e.spanId??Ao()),y(this,Wt,e.data),y(this,rt,t),y(this,Xt,e.parentId??null),y(this,st,e.error??null),y(this,Be,e.startedAt??null),y(this,qe,e.endedAt??null)}get traceId(){return u(this,Ht)}get spanData(){return u(this,Wt)}get spanId(){return u(this,Yt)}get parentId(){return u(this,Xt)}get previousSpan(){return u(this,Qt)}set previousSpan(e){y(this,Qt,e)}start(){if(u(this,Be)){C.warn("Span already started");return}y(this,Be,As()),u(this,rt).onSpanStart(this)}end(){if(u(this,qe)){C.debug("Span already finished",this.spanData);return}y(this,qe,As()),u(this,rt).onSpanEnd(this)}setError(e){y(this,st,e)}get error(){return u(this,st)}get startedAt(){return u(this,Be)}get endedAt(){return u(this,qe)}clone(){var t;const e=new Ar({traceId:this.traceId,spanId:this.spanId,parentId:this.parentId??void 0,data:this.spanData,startedAt:u(this,Be)??void 0,endedAt:u(this,qe)??void 0,error:u(this,st)??void 0},u(this,rt));return e.previousSpan=(t=this.previousSpan)==null?void 0:t.clone(),e}toJSON(){return{object:this.type,id:this.spanId,trace_id:this.traceId,parent_id:this.parentId,started_at:this.startedAt,ended_at:this.endedAt,span_data:Co(this.spanData),error:this.error}}};Wt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,rt=new WeakMap,Be=new WeakMap,qe=new WeakMap,st=new WeakMap,Qt=new WeakMap;let Ft=Ar;class Le extends Ft{constructor(e,t){super({traceId:"no-op",spanId:"no-op",data:e},t)}start(){}end(){}setError(){}toJSON(){return null}}const Cr=class Cr{constructor(e,t){_(this,"type","trace");_(this,"traceId");_(this,"name");_(this,"groupId",null);_(this,"metadata");k(this,xt);k(this,je);this.traceId=e.traceId??Cs(),this.name=e.name??"Agent workflow",this.groupId=e.groupId??null,this.metadata=e.metadata??{},y(this,xt,t??Is()),y(this,je,e.started??!1)}async start(){u(this,je)||(y(this,je,!0),await u(this,xt).onTraceStart(this))}async end(){u(this,je)&&(y(this,je,!1),await u(this,xt).onTraceEnd(this))}clone(){return new Cr({traceId:this.traceId,name:this.name,groupId:this.groupId??void 0,metadata:this.metadata,started:u(this,je)})}toJSON(){return{object:this.type,id:this.traceId,workflow_name:this.name,group_id:this.groupId,metadata:this.metadata}}};xt=new WeakMap,je=new WeakMap;let Lt=Cr;class pr extends Lt{constructor(){super({})}async start(){}async end(){}toJSON(){return null}}class Eo{constructor(){k(this,Un);k(this,se);k(this,at);y(this,se,new ko),y(this,at,is.disabled),F(this,Un,ba).call(this)}registerProcessor(e){u(this,se).addTraceProcessor(e)}setProcessors(e){u(this,se).setProcessors(e)}getCurrentTrace(){return Mt()}getCurrentSpan(){return Zt()}setDisabled(e){y(this,at,e)}startExportLoop(){u(this,se).start()}createTrace(e){if(u(this,at))return C.debug("Tracing is disabled, Not creating trace %o",e),new pr;const t=e.traceId??Cs(),r=e.name??"Agent workflow";return C.debug("Creating trace %s with name %s",t,r),new Lt({...e,name:r,traceId:t},u(this,se))}createSpan(e,t){if(u(this,at)||e.disabled)return C.debug("Tracing is disabled, Not creating span %o",e),new Le(e.data,u(this,se));let r,s;if(t){if(t instanceof Lt){if(t instanceof pr)return C.debug("Parent trace is no-op, returning NoopSpan"),new Le(e.data,u(this,se));s=t.traceId}else if(t instanceof Ft){if(t instanceof Le)return C.debug("Parent span is no-op, returning NoopSpan"),new Le(e.data,u(this,se));r=t.spanId,s=t.traceId}}else{const a=Mt(),i=Zt();if(!a)return C.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Le(e.data,u(this,se));if(i instanceof Le||a instanceof pr)return C.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`),new Le(e.data,u(this,se));s=a.traceId,i?(C.debug("Using parent span %s",i.spanId),r=i.spanId):C.debug("No parent span, using current trace %s",a.traceId)}return s?(C.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId??s}`),new Ft({...e,traceId:s,parentId:r},u(this,se))):(C.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new Le(e.data,u(this,se)))}async shutdown(e){try{C.debug("Shutting down tracing provider"),await u(this,se).shutdown(e)}catch(t){C.error("Error shutting down tracing provider %o",t)}}async forceFlush(){await u(this,se).forceFlush()}}se=new WeakMap,at=new WeakMap,Un=new WeakSet,ba=function(){if(typeof process<"u"&&typeof process.on=="function"){const e=async()=>{const t=setTimeout(()=>{console.warn("Cleanup timeout, forcing exit"),process.exit(1)},5e3);try{await this.shutdown()}finally{clearTimeout(t)}};process.on("beforeExit",e),process.on("SIGINT",async()=>{await e(),process.exit(130)}),process.on("SIGTERM",async()=>{await e(),process.exit(0)}),process.on("unhandledRejection",async(t,r)=>{C.error("Unhandled rejection",t,r),await e(),process.exit(1)})}};let fr;function ke(){return fr||(fr=new Eo),fr}function Rn(n){return async(e,...t)=>cr(async()=>{const r=n(...t);Nn(r);try{return r.start(),await e(r)}catch(s){throw r.setError({message:s.message,data:s.data}),s}finally{r.end(),$t()}})}function Es(n,e){var t;return ke().createSpan({...n,data:{type:"agent",name:((t=n==null?void 0:n.data)==null?void 0:t.name)??"Agent",...n==null?void 0:n.data}},e)}function Oo(n,e){var t,r;return ke().createSpan({...n,data:{type:"function",input:((t=n==null?void 0:n.data)==null?void 0:t.input)??"",output:((r=n==null?void 0:n.data)==null?void 0:r.output)??"",...n==null?void 0:n.data}},e)}const Os=Rn(Oo);function No(n,e){return ke().createSpan({...n,data:{type:"handoff",...n==null?void 0:n.data}},e)}const Ro=Rn(No);function Do(n,e){return ke().createSpan({...n,data:{type:"guardrail",triggered:!1,...n==null?void 0:n.data}},e)}const Ns=Rn(Do);function Po(n,e){return ke().createSpan({...n,data:{type:"mcp_tools",...n==null?void 0:n.data}},e)}const jo=Rn(Po);function Mo(n){ke().registerProcessor(n)}class hr{on(e,t){return this.eventEmitter.on(e,t),this.eventEmitter}off(e,t){return this.eventEmitter.off(e,t),this.eventEmitter}emit(e,...t){return this.eventEmitter.emit(e,...t)}once(e,t){return this.eventEmitter.once(e,t),this.eventEmitter}}class Zo extends hr{constructor(){super(...arguments);_(this,"eventEmitter",new On)}}class $o extends hr{constructor(){super(...arguments);_(this,"eventEmitter",new On)}}function Rs({name:n,execute:e}){return{type:"input",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"input",name:n},output:await e(t)}}}}function mr({name:n,execute:e}){return{type:"output",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"output",name:n},agent:t.agent,agentOutput:t.agentOutput,output:await e(t)}}}}function Ds(n){return JSON.stringify({assistant:n.name})}function Fo(n){return`transfer_to_${gn(n.name)}`}function Lo(n){return`Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription??""}`}class Ps{constructor(e,t){_(this,"toolName");_(this,"toolDescription");_(this,"inputJsonSchema",{type:"object",properties:{},required:[],additionalProperties:!1});_(this,"strictJsonSchema",!0);_(this,"onInvokeHandoff");_(this,"agentName");_(this,"inputFilter");_(this,"agent");this.agentName=e.name,this.onInvokeHandoff=t,this.toolName=Fo(e),this.toolDescription=Lo(e),this.agent=e}getHandoffAsFunctionTool(){return{type:"function",name:this.toolName,description:this.toolDescription,parameters:this.inputJsonSchema,strict:this.strictJsonSchema}}}function js(n,e={}){let t;const r=!!e.onHandoff,s=!!e.inputType;if(!(r===s))throw new K("You must provide either both `onHandoff` and `inputType` or neither.");async function i(c,l){var p;if(t){if(!l)throw ht({message:`Handoff function expected non empty input but got: ${l}`,data:{details:"input is empty"}}),new de("Handoff function expected non empty input");try{const f=await t(l);e.onHandoff&&await e.onHandoff(c,f)}catch(f){throw ht({message:"Invalid JSON provided",data:{}}),C.dontLogToolData||C.error(`Invalid JSON when parsing: ${l}. Error: ${f}`),new de("Invalid JSON provided")}}else await((p=e.onHandoff)==null?void 0:p.call(e,c));return n}const o=new Ps(n,i);if(e.inputType){const c=Hn(e.inputType,o.toolName);o.inputJsonSchema=c.schema,o.strictJsonSchema=!0,t=c.parser}return e.toolNameOverride&&(o.toolName=e.toolNameOverride),e.toolDescriptionOverride&&(o.toolDescription=e.toolDescriptionOverride),e.inputFilter&&(o.inputFilter=e.inputFilter),o}function Dn(n){return n instanceof Ps?n:js(n)}function Uo(){throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.")}const re=g({providerData:ne(d(),U()).optional()}),Ke=re.extend({id:d().optional()}),Jo=re.extend({type:m("refusal"),refusal:d()}),Bo=re.extend({type:m("output_text"),text:d()}),gr=re.extend({type:m("input_text"),text:d()}),qo=re.extend({type:m("input_image"),image:d().or(g({id:d()})).describe("Could be a URL, base64 or an object with a file ID.")}),Go=re.extend({type:m("input_file"),file:d().or(g({id:d()})).describe("Contents of the file or an object with a file ID.")}),Ms=re.extend({type:m("audio"),audio:d().or(g({id:d()})).describe("Base64 encoded audio data or file id"),format:d().nullable().optional(),transcript:d().nullable().optional()}),Vo=re.extend({type:m("image"),image:d().describe("Base64 encoded image data")}),zo=re.extend({type:m("text"),text:d()}),Wo=re.extend({type:m("image"),data:d().describe("Base64 encoded image data"),mediaType:d().describe("IANA media type of the image")}),Ho=re.extend({type:m("computer_screenshot"),data:d().describe("Base64 encoded image data or URL")}),Yo=le("type",[g({type:m("screenshot")}),g({type:m("click"),x:A(),y:A(),button:ue(["left","right","wheel","back","forward"])}),g({type:m("double_click"),x:A(),y:A()}),g({type:m("scroll"),x:A(),y:A(),scroll_x:A(),scroll_y:A()}),g({type:m("type"),text:d()}),g({type:m("wait")}),g({type:m("move"),x:A(),y:A()}),g({type:m("keypress"),keys:q(d())}),g({type:m("drag"),path:q(g({x:A(),y:A()}))})]),Xo=le("type",[Bo,Jo,gr,Ms,Vo]),_r=Ke.extend({type:m("message").optional()}),Pn=_r.extend({role:m("assistant"),status:ue(["in_progress","completed","incomplete"]),content:q(Xo)}),Qo=le("type",[gr,qo,Go,Ms]),Zs=_r.extend({role:m("user"),content:q(Qo).or(d())}),$s=_r.extend({role:m("system"),content:d()});le("role",[$s,Pn,Zs]);const Ut=Ke.extend({type:m("hosted_tool_call"),name:d().describe("The name of the hosted tool"),arguments:d().describe("The arguments of the hosted tool call").optional(),status:d().optional(),output:d().optional()}),Jt=Ke.extend({type:m("function_call"),callId:d().describe("The ID of the tool call"),name:d().describe("The name of the function"),status:ue(["in_progress","completed","incomplete"]).optional(),arguments:d()}),yr=Ke.extend({type:m("function_call_result"),name:d().describe("The name of the tool"),callId:d().describe("The ID of the tool call"),status:ue(["in_progress","completed","incomplete"]),output:le("type",[zo,Wo])}),vr=Ke.extend({type:m("computer_call"),callId:d().describe("The ID of the computer call"),status:ue(["in_progress","completed","incomplete"]),action:Yo}),Ko=Ke.extend({type:m("computer_call_result"),callId:d().describe("The ID of the computer call"),output:Ho}),eu=le("type",[vr,Jt,Ut]),wr=re.extend({id:d().optional(),type:m("reasoning"),content:q(gr)}),Fs=Ke.extend({type:m("unknown")}),br=le("type",[Pn,Ut,Jt,vr,wr,Fs]),tu=xs([Zs,Pn,$s,Ut,Jt,vr,yr,Ko,wr,Fs]),nu=g({requests:A().optional(),inputTokens:A(),outputTokens:A(),totalTokens:A(),inputTokensDetails:ne(d(),A()).optional(),outputTokensDetails:ne(d(),A()).optional()}),Ls=re.extend({type:m("output_text_delta"),delta:d()}),ru=re.extend({type:m("response_started")}),Us=re.extend({type:m("response_done"),response:re.extend({id:d(),usage:nu,output:q(br)})}),su=re.extend({type:m("model"),event:U().describe("The event from the model")});le("type",[Ls,Us,ru,su]);class jn{constructor(e){_(this,"requests");_(this,"inputTokens");_(this,"outputTokens");_(this,"totalTokens");_(this,"inputTokensDetails",[]);_(this,"outputTokensDetails",[]);typeof e>"u"?(this.requests=0,this.inputTokens=0,this.outputTokens=0,this.totalTokens=0,this.inputTokensDetails=[],this.outputTokensDetails=[]):(this.requests=(e==null?void 0:e.requests)??1,this.inputTokens=(e==null?void 0:e.inputTokens)??0,this.outputTokens=(e==null?void 0:e.outputTokens)??0,this.totalTokens=(e==null?void 0:e.totalTokens)??0,this.inputTokensDetails=e!=null&&e.inputTokensDetails?[e.inputTokensDetails]:[],this.outputTokensDetails=e!=null&&e.outputTokensDetails?[e.outputTokensDetails]:[])}add(e){this.requests+=e.requests,this.inputTokens+=e.inputTokens,this.outputTokens+=e.outputTokens,this.totalTokens+=e.totalTokens,e.inputTokensDetails&&this.inputTokensDetails.push(...e.inputTokensDetails),e.outputTokensDetails&&this.outputTokensDetails.push(...e.outputTokensDetails)}}class mt{constructor(e={}){_(this,"context");_(this,"usage");k(this,fe);this.context=e,this.usage=new jn,y(this,fe,new Map)}_rebuildApprovals(e){y(this,fe,new Map(Object.entries(e)))}isToolApproved({toolName:e,callId:t}){const r=u(this,fe).get(e);if((r==null?void 0:r.approved)===!0&&r.rejected===!0)return C.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"),!0;if((r==null?void 0:r.approved)===!0)return!0;if((r==null?void 0:r.rejected)===!0)return!1;const s=Array.isArray(r==null?void 0:r.approved)?r.approved.includes(t):!1,a=Array.isArray(r==null?void 0:r.rejected)?r.rejected.includes(t):!1;if(s&&a)return C.warn(`Tool call ${t} is both approved and rejected at the same time. Approval takes precedence`),!0;if(s)return!0;if(a)return!1}approveTool(e,{alwaysApprove:t=!1}={}){const r=e.rawItem.name;if(t){u(this,fe).set(r,{approved:!0,rejected:[]});return}const s=u(this,fe).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.approved)){const a="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.approved.push(a)}u(this,fe).set(r,s)}rejectTool(e,{alwaysReject:t=!1}={}){const r=e.rawItem.name;if(t){u(this,fe).set(r,{approved:!1,rejected:!0});return}const s=u(this,fe).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.rejected)){const a="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.rejected.push(a)}u(this,fe).set(r,s)}toJSON(){return{context:this.context,usage:this.usage,approvals:Object.fromEntries(u(this,fe).entries())}}}fe=new WeakMap;class Js{constructor(e){_(this,"state");this.state=e}get history(){return Ln(this.input,this.newItems)}get output(){return Ln([],this.newItems)}get input(){return this.state._originalInput}get newItems(){return this.state._generatedItems}get rawResponses(){return this.state._modelResponses}get lastResponseId(){const e=this.rawResponses;return e&&e.length>0?e[e.length-1].responseId:void 0}get lastAgent(){return this.state._currentAgent}get inputGuardrailResults(){return this.state._inputGuardrailResults}get outputGuardrailResults(){return this.state._outputGuardrailResults}get interruptions(){var e;return((e=this.state._currentStep)==null?void 0:e.type)==="next_step_interruption"?this.state._currentStep.data.interruptions:[]}get finalOutput(){var e;if(((e=this.state._currentStep)==null?void 0:e.type)==="next_step_final_output")return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);C.warn("Accessed finalOutput before agent run is completed.")}}class xr extends Js{constructor(e){super(e)}}class au extends Js{constructor(t={}){super(t.state);_(this,"currentTurn",0);_(this,"maxTurns");k(this,Kt,null);k(this,St);k(this,be);k(this,Ge);k(this,en);k(this,tn);k(this,nn);k(this,rn,!1);y(this,St,t.signal),u(this,St)&&u(this,St).addEventListener("abort",async()=>{await u(this,Ge).cancel()}),y(this,Ge,new mo({start:r=>{y(this,be,r)},cancel:()=>{y(this,rn,!0)}})),y(this,en,new Promise((r,s)=>{y(this,tn,r),y(this,nn,s)}))}get currentAgent(){return this.lastAgent}_addItem(t){var r;this.cancelled||(r=u(this,be))==null||r.enqueue(t)}_done(){var t;!this.cancelled&&u(this,be)&&(u(this,be).close(),y(this,be,void 0),(t=u(this,tn))==null||t.call(this))}_raiseError(t){var r;!this.cancelled&&u(this,be)&&(u(this,be).error(t),y(this,be,void 0)),y(this,Kt,t),(r=u(this,nn))==null||r.call(this,t)}get cancelled(){return u(this,rn)}toStream(){return u(this,Ge)}get completed(){return u(this,en)}get error(){return u(this,Kt)}toTextStream(t={}){const r=u(this,Ge).pipeThrough(new go({transform(s,a){if(s.type==="raw_model_stream_event"&&s.data.type==="output_text_delta"){const i=Ls.parse(s.data);a.enqueue(i.delta)}}}));return t.compatibleWithNodeStreams?ho.fromWeb(r):r}[Symbol.asyncIterator](){return u(this,Ge)[Symbol.asyncIterator]()}}Kt=new WeakMap,St=new WeakMap,be=new WeakMap,Ge=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap;function Bs(n){return n.type==="function"?{type:"function",name:n.name,description:n.description,parameters:n.parameters,strict:n.strict}:n.type==="computer"?{type:"computer",name:n.name,environment:n.computer.environment,dimensions:n.computer.dimensions}:{type:"hosted_tool",name:n.name,providerData:n.providerData}}function qs(n){return{toolName:n.toolName,toolDescription:n.toolDescription,inputJsonSchema:n.inputJsonSchema,strictJsonSchema:n.strictJsonSchema}}class et{constructor(){_(this,"type","base_item");_(this,"rawItem")}toJSON(){return{type:this.type,rawItem:this.rawItem}}}class Mn extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","message_output_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}get content(){let t="";for(const r of this.rawItem.content)r.type==="output_text"&&(t+=r.text);return t}}class tt extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class gt extends et{constructor(t,r,s){super();_(this,"rawItem");_(this,"agent");_(this,"output");_(this,"type","tool_call_output_item");this.rawItem=t,this.agent=r,this.output=s}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),output:We(this.output)}}}class Sr extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","reasoning_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Tr extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","handoff_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class kr extends et{constructor(t,r,s){super();_(this,"rawItem");_(this,"sourceAgent");_(this,"targetAgent");_(this,"type","handoff_output_item");this.rawItem=t,this.sourceAgent=r,this.targetAgent=s}toJSON(){return{...super.toJSON(),sourceAgent:this.sourceAgent.toJSON(),targetAgent:this.targetAgent.toJSON()}}}class Ie extends et{constructor(t,r){super();_(this,"rawItem");_(this,"agent");_(this,"type","tool_approval_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}function Gs(n){if(n.type!=="message"||n.role!=="assistant")return;const e=n.content[n.content.length-1];if(e.type==="output_text")return e.text}function iu(n){return n.output.length===0?"":Gs(n.output[n.output.length-1])||""}class ou{constructor(e){_(this,"data");_(this,"type","raw_model_stream_event");this.data=e}}class uu{constructor(e,t){_(this,"name");_(this,"item");_(this,"type","run_item_stream_event");this.name=e,this.item=t}}class cu{constructor(e){_(this,"agent");_(this,"type","agent_updated_stream_event");this.agent=e}}function Vs(n,e,t,r){var b;const s=[],a=[],i=[],o=[],c=[],l=[],p=new Map(r.map(w=>[w.toolName,w])),f=new Map(t.filter(w=>w.type==="function").map(w=>[w.name,w])),h=t.find(w=>w.type==="computer"),S=new Map(t.filter(w=>{var E;return w.type==="hosted_tool"&&((E=w.providerData)==null?void 0:E.type)==="mcp"}).map(w=>w).map(w=>[w.providerData.server_label,w]));for(const w of n.output){if(w.type==="message")w.role==="assistant"&&s.push(new Mn(w,e));else if(w.type==="hosted_tool_call"){s.push(new tt(w,e));const R=w.name;if(l.push(R),((b=w.providerData)==null?void 0:b.type)==="mcp_approval_request"||w.name==="mcp_approval_request"){const H=w.providerData,te=H.server_label,me=S.get(te);if(typeof me>"u"){const fn=`MCP server (${te}) not found in Agent (${e.name})`;throw ht({message:fn,data:{mcp_server_label:te}}),new de(fn)}const ge=new Ie({type:"hosted_tool_call",name:H.name,id:H.id,status:"in_progress",providerData:H},e);c.push({requestItem:ge,mcpTool:me}),me.providerData.on_approval||s.push(ge)}}else if(w.type==="reasoning")s.push(new Sr(w,e));else if(w.type==="computer_call"){if(s.push(new tt(w,e)),l.push("computer_use"),!h)throw ht({message:"Model produced computer action without a computer tool.",data:{agent_name:e.name}}),new de("Model produced computer action without a computer tool.");o.push({toolCall:w,computer:h})}if(w.type!=="function_call")continue;l.push(w.name);const E=p.get(w.name);if(E)s.push(new Tr(w,e)),a.push({toolCall:w,handoff:E});else{const R=f.get(w.name);if(!R)throw ht({message:`Tool ${w.name} not found in agent ${e.name}.`,data:{tool_name:w.name,agent_name:e.name}}),new de(`Tool ${w.name} not found in agent ${e.name}.`);s.push(new tt(w,e)),i.push({toolCall:w,tool:R})}}return{newItems:s,handoffs:a,functions:i,computerActions:o,mcpApprovalRequests:c,toolsUsed:l,hasToolsOrApprovalsToRun(){return a.length>0||i.length>0||c.length>0||o.length>0}}}const du=le("type",[g({type:m("next_step_handoff"),newAgent:U()}),g({type:m("next_step_final_output"),output:d()}),g({type:m("next_step_run_again")}),g({type:m("next_step_interruption"),data:ne(d(),U())})]);class we{constructor(e,t,r,s,a){_(this,"originalInput");_(this,"modelResponse");_(this,"preStepItems");_(this,"newStepItems");_(this,"nextStep");this.originalInput=e,this.modelResponse=t,this.preStepItems=r,this.newStepItems=s,this.nextStep=a}get generatedItems(){return this.preStepItems.concat(this.newStepItems)}}function zs(n,e,t){return n.resetToolChoice&&e.hasUsedTools(n)?{...t,toolChoice:void 0}:t}async function Ws(n,e,t,r,s,a,i){const o=t.filter(b=>b instanceof Ie&&"callId"in b.rawItem&&b.rawItem.type==="function_call").map(b=>b.rawItem.callId),c=s.functions.filter(b=>o.includes(b.toolCall.callId)),l=await Ys(n,c,a,i),p=l.map(b=>b.runItem),f=s.mcpApprovalRequests.filter(b=>{var w;return b.requestItem.type==="tool_approval_item"&&b.requestItem.rawItem.type==="hosted_tool_call"&&((w=b.requestItem.rawItem.providerData)==null?void 0:w.type)==="mcp_approval_request"});for(const b of f){const w=b.requestItem.rawItem.id,E=i._context.isToolApproved({toolName:b.requestItem.rawItem.name,callId:w});if(typeof E<"u"){const R={approve:E,approval_request_id:w,reason:void 0};p.push(new tt({type:"hosted_tool_call",name:"mcp_approval_response",providerData:R},n))}}const h=await Xs(n,l,i),S=t.filter(b=>!(b instanceof Ie));return h.isFinalOutput?(a.emit("agent_end",i._context,n,h.finalOutput),n.emit("agent_end",i._context,h.finalOutput),new we(e,r,S,p,{type:"next_step_final_output",output:h.finalOutput})):h.isInterrupted?new we(e,r,S,p,{type:"next_step_interruption",data:{interruptions:h.interruptions}}):new we(e,r,S,p,{type:"next_step_run_again"})}async function Hs(n,e,t,r,s,a,i){const o=t;let c=s.newItems;const[l,p]=await Promise.all([Ys(n,s.functions,a,i),pu(n,s.computerActions,a,i._context)]);if(c=c.concat(l.map(b=>b.runItem)),c=c.concat(p),s.mcpApprovalRequests.length>0)for(const b of s.mcpApprovalRequests){const w=b.mcpTool.providerData,E=b.requestItem.rawItem.providerData;if(w.on_approval){const R=await w.on_approval(i._context,b.requestItem),H={approve:R.approve,approval_request_id:E.id,reason:R.reason};c.push(new tt({type:"hosted_tool_call",name:"mcp_approval_response",providerData:H},n))}else{c.push(b.requestItem);const R={type:"hosted_mcp_tool_approval",tool:b.mcpTool,runItem:new Ie({type:"hosted_tool_call",name:E.name,id:E.id,arguments:E.arguments,status:"in_progress",providerData:E},n)};l.push(R)}}if(s.handoffs.length>0)return await fu(n,e,o,c,r,s.handoffs,a,i._context);const f=await Xs(n,l,i);if(f.isFinalOutput)return a.emit("agent_end",i._context,n,f.finalOutput),n.emit("agent_end",i._context,f.finalOutput),new we(e,r,o,c,{type:"next_step_final_output",output:f.finalOutput});if(f.isInterrupted)return new we(e,r,o,c,{type:"next_step_interruption",data:{interruptions:f.interruptions}});const h=c.filter(b=>b instanceof Mn),S=h.length>0?Gs(h[h.length-1].rawItem):void 0;if(!S)return new we(e,r,o,c,{type:"next_step_run_again"});if(n.outputType==="text"&&!s.hasToolsOrApprovalsToRun())return new we(e,r,o,c,{type:"next_step_final_output",output:S});if(n.outputType!=="text"&&S){const{parser:b}=Hn(n.outputType,"final_output"),[w]=await Vn(()=>b(S));if(w)throw ht({message:"Invalid output type",data:{error:String(w)}}),new de("Invalid output type");return new we(e,r,o,c,{type:"next_step_final_output",output:S})}return new we(e,r,o,c,{type:"next_step_run_again"})}function Zn(n,e){return{type:"function_call_result",name:n.name,callId:n.callId,status:"completed",output:{type:"text",text:We(e)}}}async function Ys(n,e,t,r){async function s(a){let i=a.toolCall.arguments;if(a.tool.parameters&&(ze(a.tool.parameters)?i=a.tool.parameters.parse(i):i=JSON.parse(i)),await a.tool.needsApproval(r._context,i,a.toolCall.callId)){const c=r._context.isToolApproved({toolName:a.tool.name,callId:a.toolCall.callId});if(c===!1)return Os(async l=>{const p="Tool execution was not approved.";return l.setError({message:p,data:{tool_name:a.tool.name,error:`Tool execution for ${a.toolCall.callId} was manually rejected by user.`}}),l.spanData.output=p,{type:"function_output",tool:a.tool,output:p,runItem:new gt(Zn(a.toolCall,p),n,p)}},{data:{name:a.tool.name}});if(c!==!0)return{type:"function_approval",tool:a.tool,runItem:new Ie(a.toolCall,n)}}return Os(async c=>{t.config.traceIncludeSensitiveData&&(c.spanData.input=a.toolCall.arguments);try{t.emit("agent_tool_start",r._context,n,a.tool,{toolCall:a.toolCall}),n.emit("agent_tool_start",r._context,a.tool,{toolCall:a.toolCall});const l=await a.tool.invoke(r._context,a.toolCall.arguments),p=We(l);return t.emit("agent_tool_end",r._context,n,a.tool,p,{toolCall:a.toolCall}),n.emit("agent_tool_end",r._context,a.tool,p,{toolCall:a.toolCall}),t.config.traceIncludeSensitiveData&&(c.spanData.output=p),{type:"function_output",tool:a.tool,output:l,runItem:new gt(Zn(a.toolCall,l),n,l)}}catch(l){throw c.setError({message:"Error running tool",data:{tool_name:a.tool.name,error:String(l)}}),l}},{data:{name:a.tool.name}})}try{return await Promise.all(e.map(s))}catch(a){throw new Si(`Failed to run function tools: ${a}`,a,r)}}async function lu(n,e){const t=e.action;let r;switch(t.type){case"click":await n.click(t.x,t.y,t.button);break;case"double_click":await n.doubleClick(t.x,t.y);break;case"drag":await n.drag(t.path.map(s=>[s.x,s.y]));break;case"keypress":await n.keypress(t.keys);break;case"move":await n.move(t.x,t.y);break;case"screenshot":r=await n.screenshot();break;case"scroll":await n.scroll(t.x,t.y,t.scroll_x,t.scroll_y);break;case"type":await n.type(t.text);break;case"wait":await n.wait();break}if(typeof r<"u"||typeof n.screenshot=="function"&&(r=await n.screenshot(),typeof r<"u"))return r;throw new Error("Computer does not implement screenshot()")}async function pu(n,e,t,r,s=void 0){const a=s??C,i=[];for(const o of e){const c=o.computer.computer,l=o.toolCall;t.emit("agent_tool_start",r,n,o.computer,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_start",r,o.computer,{toolCall:l});let p;try{p=await lu(c,l)}catch(S){a.error("Failed to execute computer action:",S),p=""}t.emit("agent_tool_end",r,n,o.computer,p,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_end",r,o.computer,p,{toolCall:l});const f=p?`data:image/png;base64,${p}`:"",h={type:"computer_call_result",callId:l.callId,output:{type:"computer_screenshot",data:f}};i.push(new gt(h,n,f))}return i}async function fu(n,e,t,r,s,a,i,o){if(r=[...r],a.length===0)return C.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."),new we(e,s,t,r,{type:"next_step_run_again"});if(a.length>1){const l="Multiple handoffs detected, ignorning this one.";for(let p=1;p<a.length;p++)r.push(new gt(Zn(a[p].toolCall,l),n,l))}const c=a[0];return Ro(async l=>{const p=c.handoff,f=await p.onInvokeHandoff(o,c.toolCall.arguments);if(l.spanData.to_agent=f.name,a.length>1){const S=a.map(b=>b.handoff.agentName);l.setError({message:"Multiple handoffs requested",data:{requested_agents:S}})}r.push(new kr(Zn(c.toolCall,Ds(f)),n,f)),i.emit("agent_handoff",o,n,f),n.emit("agent_handoff",o,f);const h=p.inputFilter??i.config.handoffInputFilter;if(h){C.debug("Filtering inputs for handoff"),typeof h!="function"&&l.setError({message:"Invalid input filter",data:{details:"not callable"}});const S={inputHistory:Array.isArray(e)?[...e]:e,preHandoffItems:[...t],newItems:[...r]},b=h(S);e=b.inputHistory,t=b.preHandoffItems,r=b.newItems}return new we(e,s,t,r,{type:"next_step_handoff",newAgent:f})},{data:{from_agent:n.name}})}const $n={isFinalOutput:!1,isInterrupted:void 0};async function Xs(n,e,t){if(e.length===0)return $n;const r=e.filter(i=>i.runItem instanceof Ie).map(i=>i.runItem);if(r.length>0)return{isFinalOutput:!1,isInterrupted:!0,interruptions:r};if(n.toolUseBehavior==="run_llm_again")return $n;const s=e[0];if(n.toolUseBehavior==="stop_on_first_tool")return(s==null?void 0:s.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:We(s.output)}:$n;const a=n.toolUseBehavior;if(typeof a=="object"){const i=e.find(o=>a.stopAtToolNames.includes(o.tool.name));return(i==null?void 0:i.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:We(i.output)}:$n}if(typeof a=="function")return a(t._context,e);throw new K(`Invalid toolUseBehavior: ${a}`,t)}function Qs(n,e){for(const t of e.newStepItems){let r;if(t instanceof Mn)r="message_output_created";else if(t instanceof Tr)r="handoff_requested";else if(t instanceof kr)r="handoff_occurred";else if(t instanceof tt)r="tool_called";else if(t instanceof gt)r="tool_output";else if(t instanceof Sr)r="reasoning_item_created";else if(t instanceof Ie)r="tool_approval_requested";else{C.warn("Unknown item type: ",t);continue}n._addItem(new uu(r,t))}}class Ks{constructor(){k(this,Tt,new Map)}addToolUse(e,t){u(this,Tt).set(e,t)}hasUsedTools(e){return u(this,Tt).has(e)}toJSON(){return Object.fromEntries(Array.from(u(this,Tt).entries()).map(([e,t])=>[e.name,t]))}}Tt=new WeakMap;const Fn="1.0",hu=m(Fn),Ae=g({name:d()}),ea=g({object:m("trace.span"),id:d(),trace_id:d(),parent_id:d().nullable(),started_at:d().nullable(),ended_at:d().nullable(),error:g({message:d(),data:ne(d(),U()).optional()}).nullable(),span_data:ne(d(),U())}).extend({previous_span:io(()=>ea).optional()}),ta=g({requests:A(),inputTokens:A(),outputTokens:A(),totalTokens:A()}),na=g({usage:ta,output:q(br),responseId:d().optional(),providerData:ne(d(),U()).optional()}),ra=le("type",[g({type:m("message_output_item"),rawItem:Pn,agent:Ae}),g({type:m("tool_call_item"),rawItem:eu.or(Ut),agent:Ae}),g({type:m("tool_call_output_item"),rawItem:yr,agent:Ae,output:d()}),g({type:m("reasoning_item"),rawItem:wr,agent:Ae}),g({type:m("handoff_call_item"),rawItem:Jt,agent:Ae}),g({type:m("handoff_output_item"),rawItem:yr,sourceAgent:Ae,targetAgent:Ae}),g({type:m("tool_approval_item"),rawItem:Jt.or(Ut),agent:Ae})]),mu=g({object:m("trace"),id:d(),workflow_name:d(),group_id:d().nullable(),metadata:ne(d(),U())}),gu=g({newItems:q(ra),toolsUsed:q(d()),handoffs:q(g({toolCall:U(),handoff:U()})),functions:q(g({toolCall:U(),tool:U()})),computerActions:q(g({toolCall:U(),computer:U()})),mcpApprovalRequests:q(g({requestItem:g({rawItem:g({type:m("hosted_tool_call"),name:d(),arguments:d().optional(),status:d().optional(),output:d().optional()})}),mcpTool:g({type:m("hosted_tool"),name:m("hosted_mcp"),providerData:ne(d(),U())})})).optional()}),sa=g({tripwireTriggered:jt(),outputInfo:U()}),_u=g({guardrail:g({type:m("input"),name:d()}),output:sa}),yu=g({guardrail:g({type:m("output"),name:d()}),agentOutput:U(),agent:Ae,output:sa}),aa=g({$schemaVersion:hu,currentTurn:A(),currentAgent:Ae,originalInput:d().or(q(tu)),modelResponses:q(na),context:g({usage:ta,approvals:ne(d(),g({approved:q(d()).or(jt()),rejected:q(d()).or(jt())})),context:ne(d(),U())}),toolUseTracker:ne(d(),q(d())),maxTurns:A(),currentAgentSpan:ea.nullable().optional(),noActiveAgentRun:jt(),inputGuardrailResults:q(_u),outputGuardrailResults:q(yu),currentStep:du.optional(),lastModelResponse:na.optional(),generatedItems:q(ra),lastProcessedResponse:gu.optional(),trace:mu.nullable()});class nt{constructor(e,t,r,s){_(this,"_currentTurn",0);_(this,"_currentAgent");_(this,"_originalInput");_(this,"_modelResponses");_(this,"_currentAgentSpan");_(this,"_context");_(this,"_toolUseTracker");_(this,"_generatedItems");_(this,"_maxTurns");_(this,"_noActiveAgentRun",!0);_(this,"_lastTurnResponse");_(this,"_inputGuardrailResults");_(this,"_outputGuardrailResults");_(this,"_currentStep");_(this,"_lastProcessedResponse");_(this,"_trace",null);this._context=e,this._originalInput=structuredClone(t),this._modelResponses=[],this._currentAgentSpan=void 0,this._currentAgent=r,this._toolUseTracker=new Ks,this._generatedItems=[],this._maxTurns=s,this._inputGuardrailResults=[],this._outputGuardrailResults=[],this._trace=Mt()}getInterruptions(){var e;return((e=this._currentStep)==null?void 0:e.type)!=="next_step_interruption"?[]:this._currentStep.data.interruptions}approve(e,t={alwaysApprove:!1}){this._context.approveTool(e,t)}reject(e,t={alwaysReject:!1}){this._context.rejectTool(e,t)}toJSON(){var r;const e={$schemaVersion:Fn,currentTurn:this._currentTurn,currentAgent:{name:this._currentAgent.name},originalInput:this._originalInput,modelResponses:this._modelResponses.map(s=>({usage:{requests:s.usage.requests,inputTokens:s.usage.inputTokens,outputTokens:s.usage.outputTokens,totalTokens:s.usage.totalTokens},output:s.output,responseId:s.responseId,providerData:s.providerData})),context:this._context.toJSON(),toolUseTracker:this._toolUseTracker.toJSON(),maxTurns:this._maxTurns,currentAgentSpan:(r=this._currentAgentSpan)==null?void 0:r.toJSON(),noActiveAgentRun:this._noActiveAgentRun,inputGuardrailResults:this._inputGuardrailResults,outputGuardrailResults:this._outputGuardrailResults.map(s=>({...s,agent:s.agent.toJSON()})),currentStep:this._currentStep,lastModelResponse:this._lastTurnResponse,generatedItems:this._generatedItems.map(s=>s.toJSON()),lastProcessedResponse:this._lastProcessedResponse,trace:this._trace?this._trace.toJSON():null},t=aa.safeParse(e);if(!t.success)throw new xi(`Failed to serialize run state. ${t.error.message}`);return t.data}toString(){return JSON.stringify(this.toJSON())}static async fromString(e,t){var f,h,S,b,w;const[r,s]=await Vn(()=>JSON.parse(t));if(r)throw new K(`Failed to parse run state. ${r instanceof Error?r.message:String(r)}`);const a=s.$schemaVersion;if(!a)throw new K("Run state is missing schema version");if(a!==Fn)throw new K(`Run state schema version ${a} is not supported. Please use version ${Fn}`);const i=aa.parse(JSON.parse(t)),o=vu(e),c=new mt(i.context.context);c._rebuildApprovals(i.context.approvals);const l=o.get(i.currentAgent.name);if(!l)throw new K(`Agent ${i.currentAgent.name} not found`);const p=new nt(c,"",l,i.maxTurns);p._currentTurn=i.currentTurn,p._toolUseTracker=new Ks;for(const[E,R]of Object.entries(i.toolUseTracker))p._toolUseTracker.addToolUse(o.get(E),R);if(i.currentAgentSpan){i.trace||C.warn("Trace is not set, skipping tracing setup");const E=ke().createTrace({traceId:(f=i.trace)==null?void 0:f.id,name:(h=i.trace)==null?void 0:h.workflow_name,groupId:((S=i.trace)==null?void 0:S.group_id)??void 0,metadata:(b=i.trace)==null?void 0:b.metadata});p._currentAgentSpan=ia(E,i.currentAgentSpan),p._trace=E}return p._noActiveAgentRun=i.noActiveAgentRun,p._inputGuardrailResults=i.inputGuardrailResults,p._outputGuardrailResults=i.outputGuardrailResults.map(E=>({...E,agent:o.get(E.agent.name)})),p._currentStep=i.currentStep,p._originalInput=i.originalInput,p._modelResponses=i.modelResponses.map(oa),p._lastTurnResponse=i.lastModelResponse?oa(i.lastModelResponse):void 0,p._generatedItems=i.generatedItems.map(E=>ua(E,o)),p._lastProcessedResponse=i.lastProcessedResponse?await wu(o,p._currentAgent,i.lastProcessedResponse):void 0,((w=i.currentStep)==null?void 0:w.type)==="next_step_handoff"&&(p._currentStep={type:"next_step_handoff",newAgent:o.get(i.currentStep.newAgent.name)}),p}}function vu(n){const e=new Map,t=[n];for(;t.length>0;){const r=t.shift();if(!e.has(r.name)){e.set(r.name,r);for(const s of r.handoffs)s instanceof _t?e.has(s.name)||t.push(s):s.agent&&(e.has(s.agent.name)||t.push(s.agent))}}return e}function ia(n,e){const t=e.span_data,r=e.previous_span?ia(n,e.previous_span):void 0,s=ke().createSpan({spanId:e.id,traceId:e.trace_id,parentId:e.parent_id??void 0,startedAt:e.started_at??void 0,endedAt:e.ended_at??void 0,data:t},n);return s.previousSpan=r,s}function oa(n){const e=new jn;return e.requests=n.usage.requests,e.inputTokens=n.usage.inputTokens,e.outputTokens=n.usage.outputTokens,e.totalTokens=n.usage.totalTokens,{usage:e,output:n.output.map(t=>br.parse(t)),responseId:n.responseId,providerData:n.providerData}}function ua(n,e){switch(n.type){case"message_output_item":return new Mn(n.rawItem,e.get(n.agent.name));case"tool_call_item":return new tt(n.rawItem,e.get(n.agent.name));case"tool_call_output_item":return new gt(n.rawItem,e.get(n.agent.name),n.output);case"reasoning_item":return new Sr(n.rawItem,e.get(n.agent.name));case"handoff_call_item":return new Tr(n.rawItem,e.get(n.agent.name));case"handoff_output_item":return new kr(n.rawItem,e.get(n.sourceAgent.name),e.get(n.targetAgent.name));case"tool_approval_item":return new Ie(n.rawItem,e.get(n.agent.name))}}async function wu(n,e,t){const r=await e.getAllTools(),s=new Map(r.filter(c=>c.type==="function").map(c=>[c.name,c])),a=new Map(r.filter(c=>c.type==="computer").map(c=>[c.name,c])),i=new Map(e.handoffs.map(c=>c instanceof _t?[c.name,js(c)]:[c.toolName,c])),o={newItems:t.newItems.map(c=>ua(c,n)),toolsUsed:t.toolsUsed,handoffs:t.handoffs.map(c=>{if(!i.has(c.handoff.toolName))throw new K(`Handoff ${c.handoff.toolName} not found`);return{toolCall:c.toolCall,handoff:i.get(c.handoff.toolName)}}),functions:await Promise.all(t.functions.map(async c=>{if(!s.has(c.tool.name))throw new K(`Tool ${c.tool.name} not found`);return{toolCall:c.toolCall,tool:s.get(c.tool.name)}})),computerActions:t.computerActions.map(c=>{const l=c.computer.name;if(!a.has(l))throw new K(`Computer tool ${l} not found`);return{toolCall:c.toolCall,computer:a.get(l)}}),mcpApprovalRequests:(t.mcpApprovalRequests??[]).map(c=>({requestItem:new Ie(c.requestItem.rawItem,e),mcpTool:c.mcpTool}))};return{...o,hasToolsOrApprovalsToRun(){return o.handoffs.length>0||o.functions.length>0||o.mcpApprovalRequests.length>0||o.computerActions.length>0}}}const ca=10;function da(n,e){return n?!1:e?!0:"enabled_without_data"}function Ln(n,e){const t=e.filter(r=>r.type!=="tool_approval_item").map(r=>r.rawItem);return typeof n=="string"&&(n=[{type:"message",role:"user",content:n}]),[...n,...t]}class bu extends $o{constructor(t={}){super();k(this,ie);_(this,"config");_(this,"inputGuardrailDefs");_(this,"outputGuardrailDefs");this.config={modelProvider:t.modelProvider??Uo(),model:t.model,modelSettings:t.modelSettings,handoffInputFilter:t.handoffInputFilter,inputGuardrails:t.inputGuardrails,outputGuardrails:t.outputGuardrails,tracingDisabled:t.tracingDisabled??!1,traceIncludeSensitiveData:t.traceIncludeSensitiveData??!0,workflowName:t.workflowName??"Agent workflow",traceId:t.traceId,groupId:t.groupId,traceMetadata:t.traceMetadata},this.inputGuardrailDefs=(t.inputGuardrails??[]).map(Rs),this.outputGuardrailDefs=(t.outputGuardrails??[]).map(mr)}run(t,r,s={stream:!1,context:void 0}){return r instanceof nt&&r._trace?wo(r._trace,async()=>(r._currentAgentSpan&&Nn(r._currentAgentSpan),s!=null&&s.stream?F(this,ie,Zr).call(this,t,r,s):F(this,ie,Pr).call(this,t,r,s))):bo(async()=>s!=null&&s.stream?F(this,ie,Zr).call(this,t,r,s):F(this,ie,Pr).call(this,t,r,s),{traceId:this.config.traceId,name:this.config.workflowName,groupId:this.config.groupId,metadata:this.config.traceMetadata})}}ie=new WeakSet,Pr=async function(t,r,s){return cr(async()=>{var i,o;const a=r instanceof nt?r:new nt(s.context instanceof mt?s.context:new mt(s.context),r,t,s.maxTurns??ca);try{for(;;){let c=a._currentAgent.model??this.config.model;if(typeof c=="string"&&(c=await this.config.modelProvider.getModel(c)),a._currentStep=a._currentStep??{type:"next_step_run_again"},a._currentStep.type==="next_step_interruption"){if(C.debug("Continuing from interruption"),!a._lastTurnResponse||!a._lastProcessedResponse)throw new K("No model response found in previous state",a);const l=await Ws(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);if(a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=l.originalInput,a._generatedItems=l.generatedItems,a._currentStep=l.nextStep,l.nextStep.type==="next_step_interruption")return new xr(a);continue}if(a._currentStep.type==="next_step_run_again"){const l=a._currentAgent.handoffs.map(Dn);if(!a._currentAgentSpan){const R=l.map(H=>H.agentName);a._currentAgentSpan=Es({data:{name:a._currentAgent.name,handoffs:R,output_type:a._currentAgent.outputSchemaName}}),a._currentAgentSpan.start(),Nn(a._currentAgentSpan)}const p=await a._currentAgent.getAllTools(),f=p.map(R=>Bs(R)),h=l.map(R=>qs(R));if(a._currentAgentSpan&&(a._currentAgentSpan.spanData.tools=p.map(R=>R.name)),a._currentTurn++,a._currentTurn>a._maxTurns)throw(i=a._currentAgentSpan)==null||i.setError({message:"Max turns exceeded",data:{max_turns:a._maxTurns}}),new Qr(`Max turns (${a._maxTurns}) exceeded`,a);C.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`),a._currentTurn===1&&await F(this,ie,jr).call(this,a);const S=Ln(a._originalInput,a._generatedItems);a._noActiveAgentRun&&(a._currentAgent.emit("agent_start",a._context,a._currentAgent),this.emit("agent_start",a._context,a._currentAgent));let b={...this.config.modelSettings,...a._currentAgent.modelSettings};b=zs(a._currentAgent,a._toolUseTracker,b),a._lastTurnResponse=await c.getResponse({systemInstructions:await a._currentAgent.getSystemPrompt(a._context),prompt:await a._currentAgent.getPrompt(a._context),input:S,previousResponseId:s.previousResponseId,modelSettings:b,tools:f,outputType:ts(a._currentAgent.outputType),handoffs:h,tracing:da(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:s.signal}),a._modelResponses.push(a._lastTurnResponse),a._context.usage.add(a._lastTurnResponse.usage),a._noActiveAgentRun=!1;const w=Vs(a._lastTurnResponse,a._currentAgent,p,l);a._lastProcessedResponse=w;const E=await Hs(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=E.originalInput,a._generatedItems=E.generatedItems,a._currentStep=E.nextStep}if(a._currentStep&&a._currentStep.type==="next_step_final_output")return await F(this,ie,Mr).call(this,a,a._currentStep.output),this.emit("agent_end",a._context,a._currentAgent,a._currentStep.output),a._currentAgent.emit("agent_end",a._context,a._currentStep.output),new xr(a);if(a._currentStep&&a._currentStep.type==="next_step_handoff")a._currentAgent=a._currentStep.newAgent,a._currentAgentSpan&&(a._currentAgentSpan.end(),$t(),a._currentAgentSpan=void 0),a._noActiveAgentRun=!0,a._currentStep={type:"next_step_run_again"};else{if(a._currentStep&&a._currentStep.type==="next_step_interruption")return new xr(a);C.debug("Running next loop")}}}catch(c){throw a._currentAgentSpan&&a._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(c)}}),c}finally{a._currentAgentSpan&&(((o=a._currentStep)==null?void 0:o.type)!=="next_step_interruption"&&a._currentAgentSpan.end(),$t())}})},jr=async function(t){const r=this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(Rs));if(r.length>0){const s={agent:t._currentAgent,input:t._originalInput,context:t._context};try{const a=await Promise.all(r.map(async i=>Ns(async o=>{const c=await i.run(s);return o.spanData.triggered=c.output.tripwireTriggered,c},{data:{name:i.name}},t._currentAgentSpan)));for(const i of a)if(i.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:i.guardrail.name}}),new es(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`,i,t)}catch(a){throw a instanceof es?a:(t._currentTurn--,new Kr(`Input guardrail failed to complete: ${a}`,a,t))}}},Mr=async function(t,r){const s=this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(mr));if(s.length>0){const a=t._currentAgent.processFinalOutput(r),i={agent:t._currentAgent,agentOutput:a,context:t._context,details:{modelResponse:t._lastTurnResponse}};try{const o=await Promise.all(s.map(async c=>Ns(async l=>{const p=await c.run(i);return l.spanData.triggered=p.output.tripwireTriggered,p},{data:{name:c.name}},t._currentAgentSpan)));for(const c of o)if(c.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:c.guardrail.name}}),new mn(`Output guardrail triggered: ${JSON.stringify(c.output.outputInfo)}`,c,t)}catch(o){throw o instanceof mn?o:new Kr(`Output guardrail failed to complete: ${o}`,o,t)}}},xa=async function(t,r){var s,a,i;try{for(;;){const o=t.state._currentAgent,c=o.handoffs.map(Dn),l=await o.getAllTools(),p=l.map(h=>Bs(h)),f=c.map(h=>qs(h));if(t.state._currentStep=t.state._currentStep??{type:"next_step_run_again"},t.state._currentStep.type==="next_step_interruption"){if(C.debug("Continuing from interruption"),!t.state._lastTurnResponse||!t.state._lastProcessedResponse)throw new K("No model response found in previous state",t.state);const h=await Ws(t.state._currentAgent,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);if(Qs(t,h),t.state._toolUseTracker.addToolUse(t.state._currentAgent,t.state._lastProcessedResponse.toolsUsed),t.state._originalInput=h.originalInput,t.state._generatedItems=h.generatedItems,t.state._currentStep=h.nextStep,h.nextStep.type==="next_step_interruption")return;continue}if(t.state._currentStep.type==="next_step_run_again"){if(!t.state._currentAgentSpan){const H=c.map(te=>te.agentName);t.state._currentAgentSpan=Es({data:{name:o.name,handoffs:H,tools:l.map(te=>te.name),output_type:o.outputSchemaName}}),t.state._currentAgentSpan.start(),Nn(t.state._currentAgentSpan)}if(t.state._currentTurn++,t.state._currentTurn>t.state._maxTurns)throw(s=t.state._currentAgentSpan)==null||s.setError({message:"Max turns exceeded",data:{max_turns:t.state._maxTurns}}),new Qr(`Max turns (${t.state._maxTurns}) exceeded`,t.state);C.debug(`Running agent ${o.name} (turn ${t.state._currentTurn})`);let h=o.model??this.config.model;typeof h=="string"&&(h=await this.config.modelProvider.getModel(h)),t.state._currentTurn===1&&await F(this,ie,jr).call(this,t.state);let S={...this.config.modelSettings,...o.modelSettings};S=zs(o,t.state._toolUseTracker,S);const b=Ln(t.input,t.newItems);t.state._noActiveAgentRun&&(o.emit("agent_start",t.state._context,o),this.emit("agent_start",t.state._context,o));let w;for await(const H of h.getStreamedResponse({systemInstructions:await o.getSystemPrompt(t.state._context),prompt:await o.getPrompt(t.state._context),input:b,previousResponseId:r.previousResponseId,modelSettings:S,tools:p,handoffs:f,outputType:ts(o.outputType),tracing:da(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:r.signal})){if(H.type==="response_done"){const te=Us.parse(H);w={usage:new jn(te.response.usage),output:te.response.output,responseId:te.response.id}}if(t.cancelled)return;t._addItem(new ou(H))}if(t.state._noActiveAgentRun=!1,!w)throw new de("Model did not procude a final response!",t.state);t.state._lastTurnResponse=w,t.state._modelResponses.push(t.state._lastTurnResponse);const E=Vs(t.state._lastTurnResponse,o,l,c);t.state._lastProcessedResponse=E;const R=await Hs(o,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);Qs(t,R),t.state._toolUseTracker.addToolUse(o,E.toolsUsed),t.state._originalInput=R.originalInput,t.state._generatedItems=R.generatedItems,t.state._currentStep=R.nextStep}if(t.state._currentStep.type==="next_step_final_output"){await F(this,ie,Mr).call(this,t.state,t.state._currentStep.output);return}else{if(t.state._currentStep.type==="next_step_interruption")return;t.state._currentStep.type==="next_step_handoff"?(t.state._currentAgent=(a=t.state._currentStep)==null?void 0:a.newAgent,t.state._currentAgentSpan&&(t.state._currentAgentSpan.end(),$t()),t.state._currentAgentSpan=void 0,t._addItem(new cu(o)),t.state._noActiveAgentRun=!0,t.state._currentStep={type:"next_step_run_again"}):C.debug("Running next loop")}}}catch(o){throw t.state._currentAgentSpan&&t.state._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(o)}}),o}finally{t.state._currentAgentSpan&&(((i=t.state._currentStep)==null?void 0:i.type)!=="next_step_interruption"&&t.state._currentAgentSpan.end(),$t())}},Zr=async function(t,r,s){return s=s??{},cr(async()=>{const a=r instanceof nt?r:new nt(s.context instanceof mt?s.context:new mt(s.context),r,t,s.maxTurns??ca),i=new au({signal:s.signal,state:a});return i.maxTurns=s.maxTurns??a._maxTurns,F(this,ie,xa).call(this,i,s).then(()=>{i._done()},o=>{i._raiseError(o)}),i})};class _t extends Zo{constructor(t){super();_(this,"name");_(this,"instructions");_(this,"prompt");_(this,"handoffDescription");_(this,"handoffs");_(this,"model");_(this,"modelSettings");_(this,"tools");_(this,"mcpServers");_(this,"inputGuardrails");_(this,"outputGuardrails");_(this,"outputType","text");_(this,"toolUseBehavior");_(this,"resetToolChoice");if(typeof t.name!="string"||t.name.trim()==="")throw new K("Agent must have a name.");if(this.name=t.name,this.instructions=t.instructions??"",this.prompt=t.prompt,this.handoffDescription=t.handoffDescription??"",this.handoffs=t.handoffs??[],this.model=t.model??"",this.modelSettings=t.modelSettings??{},this.tools=t.tools??[],this.mcpServers=t.mcpServers??[],this.inputGuardrails=t.inputGuardrails??[],this.outputGuardrails=t.outputGuardrails??[],t.outputType&&(this.outputType=t.outputType),this.toolUseBehavior=t.toolUseBehavior??"run_llm_again",this.resetToolChoice=t.resetToolChoice??!0,(t.handoffOutputTypeWarningEnabled===void 0||t.handoffOutputTypeWarningEnabled)&&this.handoffs&&this.outputType){const r=new Set([JSON.stringify(this.outputType)]);for(const s of this.handoffs)"outputType"in s&&s.outputType?r.add(JSON.stringify(s.outputType)):"agent"in s&&s.agent.outputType&&r.add(JSON.stringify(s.agent.outputType));r.size>1&&C.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`)}}static create(t){return new _t({...t,handoffs:t.handoffs,outputType:t.outputType,handoffOutputTypeWarningEnabled:!1})}get outputSchemaName(){if(this.outputType==="text")return"text";if(ze(this.outputType))return"ZodOutput";if(typeof this.outputType=="object")return this.outputType.name;throw new Error(`Unknown output type: ${this.outputType}`)}clone(t){return new _t({...this,...t})}asTool(t){const{toolName:r,toolDescription:s,customOutputExtractor:a}=t;return yn({name:r??gn(this.name),description:s??"",parameters:{type:"object",properties:{input:{type:"string"}},required:["input"],additionalProperties:!1},strict:!0,execute:async(i,o)=>{if(!Ti(i))throw new de("Agent tool called with invalid input");const l=await new bu().run(this,i.input,{context:o==null?void 0:o.context});return typeof a=="function"?a(l):iu(l.rawResponses[l.rawResponses.length-1])}})}async getSystemPrompt(t){return typeof this.instructions=="function"?await this.instructions(t,this):this.instructions}async getPrompt(t){return typeof this.prompt=="function"?await this.prompt(t,this):this.prompt}async getMcpTools(){return this.mcpServers.length>0?co(this.mcpServers):[]}async getAllTools(){return[...await this.getMcpTools(),...this.tools]}processFinalOutput(t){if(this.outputType==="text")return t;if(typeof this.outputType=="object"){const r=JSON.parse(t);return ze(this.outputType)?this.outputType.parse(r):r}throw new Error(`Unknown output type: ${this.outputType}`)}toJSON(){return{name:this.name}}}Mo(Is());class xu extends _t{constructor(t){super(t);_(this,"voice");this.voice=t.voice??"ash"}}function Su(n){return{debounceTextLength:n.debounceTextLength??100}}function Tu({policyHint:n,...e}){const t=mr(e),r=n??t.name;return{...t,policyHint:r,run:async s=>{const a=await t.run(s);return{...a,guardrail:{...a.guardrail,policyHint:r}}}}}function ku(n){return`
⚠️ Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo??{})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim()}const Re=us("openai-agents:realtime");g({itemId:d()});const la=le("role",[g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("system"),content:q(g({type:m("input_text"),text:d()}))}),g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("user"),status:ue(["in_progress","completed"]),content:q(g({type:m("input_text"),text:d()}).or(g({type:m("input_audio"),audio:d().nullable().optional(),transcript:d().nullable()})))}),g({itemId:d(),previousItemId:d().nullable().optional(),type:m("message"),role:m("assistant"),status:ue(["in_progress","completed","incomplete"]),content:q(g({type:m("text"),text:d()}).or(g({type:m("audio"),audio:d().nullable().optional(),transcript:d().nullable().optional()})))})]),pa=g({itemId:d(),previousItemId:d().nullable().optional(),type:m("function_call"),status:ue(["in_progress","completed"]),arguments:d(),name:d(),output:d().nullable()}),fa=g({id:d().optional().nullable(),conversation_id:d().optional().nullable(),max_output_tokens:A().or(m("inf")).optional().nullable(),metadata:ne(d(),U()).optional().nullable(),modalities:q(d()).optional().nullable(),object:m("realtime.response").optional().nullable(),output:q(U()).optional().nullable(),output_audio_format:d().optional().nullable(),status:ue(["completed","incomplete","failed","cancelled","in_progress"]).optional().nullable(),status_details:ne(d(),U()).optional().nullable(),usage:g({input_tokens:A().optional(),input_tokens_details:ne(d(),U()).optional().nullable(),output_tokens:A().optional(),output_tokens_details:ne(d(),U()).optional().nullable()}).optional().nullable(),voice:d().optional().nullable()}),Iu=g({id:d().optional(),audio:d().nullable().optional(),text:d().nullable().optional(),transcript:d().nullable().optional(),type:xs([m("input_text"),m("input_audio"),m("item_reference"),m("text"),m("audio")])}),Bt=g({id:d().optional(),arguments:d().optional(),call_id:d().optional(),content:q(Iu).optional(),name:d().optional(),object:m("realtime.item").optional(),output:d().optional(),role:ue(["user","assistant","system"]).optional(),status:ue(["completed","incomplete","in_progress"]).optional(),type:ue(["message","function_call","function_call_output"]).optional()}),Au=g({type:m("conversation.created"),event_id:d(),conversation:g({id:d().optional(),object:m("realtime.conversation").optional()})}),Cu=g({type:m("conversation.item.created"),event_id:d(),item:Bt,previous_item_id:d().nullable().optional()}),Eu=g({type:m("conversation.item.deleted"),event_id:d(),item_id:d()}),Ou=g({type:m("conversation.item.input_audio_transcription.completed"),event_id:d(),item_id:d(),content_index:A(),transcript:d(),logprobs:q(U()).nullable().optional()}),Nu=g({type:m("conversation.item.input_audio_transcription.delta"),event_id:d(),item_id:d(),content_index:A().optional(),delta:d().optional(),logprobs:q(U()).nullable().optional()}),Ru=g({type:m("conversation.item.input_audio_transcription.failed"),event_id:d(),item_id:d(),content_index:A(),error:g({code:d().optional(),message:d().optional(),param:d().optional(),type:d().optional()})}),Du=g({type:m("conversation.item.retrieved"),event_id:d(),item:Bt}),Pu=g({type:m("conversation.item.truncated"),event_id:d(),item_id:d(),audio_end_ms:A(),content_index:A()}),ju=g({type:m("conversation.item.create"),item:Bt,event_id:d().optional(),previous_item_id:d().nullable().optional()}),Mu=g({type:m("conversation.item.delete"),item_id:d(),event_id:d().optional()}),Zu=g({type:m("conversation.item.retrieve"),item_id:d(),event_id:d().optional()}),$u=g({type:m("conversation.item.truncate"),item_id:d(),audio_end_ms:A(),content_index:A(),event_id:d().optional()}),Fu=g({type:m("error"),event_id:d().optional(),error:U().optional()}),Lu=g({type:m("input_audio_buffer.cleared"),event_id:d()}),Uu=g({type:m("input_audio_buffer.append"),audio:d(),event_id:d().optional()}),Ju=g({type:m("input_audio_buffer.clear"),event_id:d().optional()}),Bu=g({type:m("input_audio_buffer.commit"),event_id:d().optional()}),qu=g({type:m("input_audio_buffer.committed"),event_id:d(),item_id:d(),previous_item_id:d().nullable().optional()}),Gu=g({type:m("input_audio_buffer.speech_started"),event_id:d(),item_id:d(),audio_start_ms:A()}),Vu=g({type:m("input_audio_buffer.speech_stopped"),event_id:d(),item_id:d(),audio_end_ms:A()}),zu=g({type:m("output_audio_buffer.started"),event_id:d()}).passthrough(),Wu=g({type:m("output_audio_buffer.stopped"),event_id:d()}).passthrough(),Hu=g({type:m("output_audio_buffer.cleared"),event_id:d()}),Yu=g({type:m("rate_limits.updated"),event_id:d(),rate_limits:q(g({limit:A().optional(),name:ue(["requests","tokens"]).optional(),remaining:A().optional(),reset_seconds:A().optional()}))}),Xu=g({type:m("response.audio.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),Qu=g({type:m("response.audio.done"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d()}),Ku=g({type:m("response.audio_transcript.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),ec=g({type:m("response.audio_transcript.done"),event_id:d(),item_id:d(),content_index:A(),transcript:d(),output_index:A(),response_id:d()}),tc=g({type:m("response.content_part.added"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d(),part:g({audio:d().optional(),text:d().optional(),transcript:d().optional(),type:ue(["text","audio"]).optional()})}),nc=g({type:m("response.content_part.done"),event_id:d(),item_id:d(),content_index:A(),output_index:A(),response_id:d(),part:g({audio:d().optional(),text:d().optional(),transcript:d().optional(),type:ue(["text","audio"]).optional()})}),rc=g({type:m("response.created"),event_id:d(),response:fa}),ha=g({type:m("response.done"),event_id:d(),response:fa}),sc=g({type:m("response.function_call_arguments.delta"),event_id:d(),item_id:d(),call_id:d(),delta:d(),output_index:A(),response_id:d()}),ac=g({type:m("response.function_call_arguments.done"),event_id:d(),item_id:d(),call_id:d(),arguments:d(),output_index:A(),response_id:d()}),ic=g({type:m("response.output_item.added"),event_id:d(),item:Bt,output_index:A(),response_id:d()}),oc=g({type:m("response.output_item.done"),event_id:d(),item:Bt,output_index:A(),response_id:d()}),uc=g({type:m("response.text.delta"),event_id:d(),item_id:d(),content_index:A(),delta:d(),output_index:A(),response_id:d()}),cc=g({type:m("response.text.done"),event_id:d(),item_id:d(),content_index:A(),text:d(),output_index:A(),response_id:d()}),dc=g({type:m("session.created"),event_id:d(),session:U()}),lc=g({type:m("session.updated"),event_id:d(),session:U()}),pc=g({type:m("response.cancel"),event_id:d().optional(),response_id:d().optional()}),fc=g({type:m("response.create"),event_id:d().optional(),response:U().optional()}),hc=g({type:m("session.update"),event_id:d().optional(),session:U()}),mc=g({type:m("transcription_session.update"),event_id:d().optional(),session:U()}),gc=g({type:m("transcription_session.updated"),event_id:d(),session:U()}),_c=g({type:d(),event_id:d().optional().nullable()}).passthrough(),yc=le("type",[Au,Cu,Eu,Ou,Nu,Ru,Du,Pu,Fu,Lu,qu,Gu,Vu,zu,Wu,Hu,Yu,Xu,Qu,Ku,ec,tc,nc,rc,ha,sc,ac,ic,oc,uc,cc,dc,lc,gc]);le("type",[ju,Mu,Zu,$u,Uu,Ju,Bu,pc,fc,hc,mc]);function Ir(n){const e=JSON.parse(n.data.toString()),t=yc.safeParse(e);if(!t.success){const r=_c.safeParse(e);return r.success?{data:r.data,isGeneric:!0}:{data:null,isGeneric:!0}}return{data:t.data,isGeneric:!1}}const ma="gpt-4o-realtime-preview",De={voice:"ash",modalities:["text","audio"],inputAudioFormat:"pcm16",outputAudioFormat:"pcm16",inputAudioTranscription:{model:"gpt-4o-mini-transcribe"},turnDetection:{type:"semantic_vad"}},Er=class Er extends hr{constructor(t={}){super();k(this,it);k(this,sn);k(this,he,null);_(this,"eventEmitter",new On);y(this,it,t.model??ma),y(this,sn,t.apiKey)}get currentModel(){return u(this,it)}set currentModel(t){y(this,it,t)}async _getApiKey(t){const r=t.apiKey??u(this,sn);return typeof r=="function"?await r():r}_onMessage(t){var a,i,o,c,l,p;const{data:r,isGeneric:s}=Ir(t);if(r!==null&&(this.emit("*",r),!s)){if(r.type==="error"?this.emit("error",{type:"error",error:r}):this.emit(r.type,r),r.type==="response.created"){this.emit("turn_started",{type:"response_started",providerData:{...r}});return}if(r.type==="response.done"){const f=ha.safeParse(r);if(!f.success){Re.error("Error parsing response done event",f.error);return}const h=((a=f.data.response.usage)==null?void 0:a.input_tokens)??0,S=((i=f.data.response.usage)==null?void 0:i.output_tokens)??0,b=h+S,w=new jn({inputTokens:h,inputTokensDetails:((o=f.data.response.usage)==null?void 0:o.input_tokens_details)??{},outputTokens:S,outputTokensDetails:((c=f.data.response.usage)==null?void 0:c.output_tokens_details)??{},totalTokens:b});this.emit("usage_update",w),this.emit("turn_done",{type:"response_done",response:{id:f.data.response.id??"",output:f.data.response.output??[],usage:{inputTokens:h,inputTokensDetails:((l=f.data.response.usage)==null?void 0:l.input_tokens_details)??{},outputTokens:S,outputTokensDetails:((p=f.data.response.usage)==null?void 0:p.output_tokens_details)??{},totalTokens:b}}});return}if(r.type==="response.audio.done"){this.emit("audio_done");return}if(r.type==="conversation.item.deleted"){this.emit("item_deleted",{itemId:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.completed"||r.type==="conversation.item.truncated"){this.sendEvent({type:"conversation.item.retrieve",item_id:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.delta"||r.type==="response.text.delta"||r.type==="response.audio_transcript.delta"||r.type==="response.function_call_arguments.delta"){r.type==="response.audio_transcript.delta"&&this.emit("audio_transcript_delta",{type:"transcript_delta",delta:r.delta,itemId:r.item_id,responseId:r.response_id});return}if((r.type==="conversation.item.created"||r.type==="conversation.item.retrieved")&&r.item.type==="message"){const f=r.type==="conversation.item.created"?r.previous_item_id:null,h=la.parse({itemId:r.item.id,previousItemId:f,type:r.item.type,role:r.item.role,content:r.item.content,status:r.item.status});this.emit("item_update",h);return}if(r.type==="response.output_item.done"||r.type==="response.output_item.added"){const f=r.item;if(f.type==="function_call"&&f.status==="completed"){const h=pa.parse({itemId:f.id,type:f.type,status:"in_progress",arguments:f.arguments,name:f.name,output:null});this.emit("item_update",h),this.emit("function_call",{id:f.id,type:"function_call",callId:f.call_id??"",arguments:f.arguments??"",name:f.name??""});return}if(f.type==="message"){const h=la.parse({itemId:r.item.id,type:r.item.type,role:r.item.role,content:r.item.content,status:"in_progress"});this.emit("item_update",h);return}}}}_onError(t){this.emit("error",{type:"error",error:t})}_onOpen(){this.emit("connected")}_onClose(){this.emit("disconnected")}sendMessage(t,r){this.sendEvent({type:"conversation.item.create",item:typeof t=="string"?{type:"message",role:"user",content:[{type:"input_text",text:t}]}:t,...r}),this.sendEvent({type:"response.create"})}_getMergedSessionConfig(t){var s;return{instructions:t.instructions,model:t.model??u(this,it)??De.model,voice:t.voice??De.voice,modalities:t.modalities??De.modalities,input_audio_format:t.inputAudioFormat??De.inputAudioFormat,output_audio_format:t.outputAudioFormat??De.outputAudioFormat,input_audio_transcription:t.inputAudioTranscription??De.inputAudioTranscription,turn_detection:Er.buildTurnDetectionConfig(t.turnDetection)??De.turnDetection,tool_choice:t.toolChoice??De.toolChoice,tools:(s=t.tools)==null?void 0:s.map(a=>({...a,strict:void 0})),...t.providerData??{}}}static buildTurnDetectionConfig(t){if(typeof t>"u")return;const{type:r,createResponse:s,create_response:a,eagerness:i,interruptResponse:o,interrupt_response:c,prefixPaddingMs:l,prefix_padding_ms:p,silenceDurationMs:f,silence_duration_ms:h,threshold:S,...b}=t,w={type:r,create_response:s||a,eagerness:i,interrupt_response:o||c,prefix_padding_ms:l||p,silence_duration_ms:f||h,threshold:S,...b};return Object.keys(w).forEach(E=>{w[E]===void 0&&delete w[E]}),Object.keys(w).length>0?w:void 0}set _tracingConfig(t){y(this,he,t)}_updateTracingConfig(t){var r,s,a;if(typeof u(this,he)>"u"&&y(this,he,null),t==="auto"){this.sendEvent({type:"session.update",session:{tracing:"auto"}});return}if(typeof u(this,he)!="string"&&typeof t!="string"){Re.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");return}if(t===null){Re.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."),this.sendEvent({type:"session.update",session:{tracing:null}});return}if(u(this,he)===null||typeof u(this,he)=="string"){this.sendEvent({type:"session.update",session:{tracing:t}});return}if((t==null?void 0:t.group_id)!==((r=u(this,he))==null?void 0:r.group_id)||(t==null?void 0:t.metadata)!==((s=u(this,he))==null?void 0:s.metadata)||(t==null?void 0:t.workflow_name)!==((a=u(this,he))==null?void 0:a.workflow_name)){Re.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s",JSON.stringify(u(this,he)),JSON.stringify(t));return}this.sendEvent({type:"session.update",session:{tracing:t}})}updateSessionConfig(t){const r=this._getMergedSessionConfig(t);this.sendEvent({type:"session.update",session:r})}sendFunctionCallOutput(t,r,s=!0){this.sendEvent({type:"conversation.item.create",item:{type:"function_call_output",output:r,call_id:t.callId}});try{const a=pa.parse({itemId:t.id,previousItemId:t.previousItemId,type:"function_call",status:"completed",arguments:t.arguments,name:t.name,output:r});this.emit("item_update",a)}catch(a){Re.error("Error parsing tool call item",a,t)}s&&this.sendEvent({type:"response.create"})}sendAudio(t,{commit:r=!1}={}){this.sendEvent({type:"input_audio_buffer.append",audio:Ot(t)}),r&&this.sendEvent({type:"input_audio_buffer.commit"})}resetHistory(t,r){const{removals:s,additions:a,updates:i}=Aa(t,r),o=new Set(s.map(l=>l.itemId));for(const l of i)o.add(l.itemId);if(o.size>0)for(const l of o)this.sendEvent({type:"conversation.item.delete",item_id:l});const c=[...a,...i];for(const l of c)if(l.type==="message"){const p={type:"message",role:l.role,content:l.content,id:l.itemId};l.role!=="system"&&l.status&&(p.status=l.status),this.sendEvent({type:"conversation.item.create",item:p})}else l.type==="function_call"&&Re.warn("Function calls cannot be manually added or updated at the moment. Ignoring.")}};it=new WeakMap,sn=new WeakMap,he=new WeakMap;let qt=Er;class ga extends qt{constructor(t={}){if(typeof RTCPeerConnection>"u")throw new Error("WebRTC is not supported in this environment");super(t);_(this,"options");k(this,an);k(this,z,{status:"disconnected",peerConnection:void 0,dataChannel:void 0});k(this,on);k(this,ot,!1);k(this,un,!1);this.options=t,y(this,an,t.baseUrl??"https://api.openai.com/v1/realtime"),y(this,on,t.useInsecureApiKey??!1)}get status(){return u(this,z).status}get connectionState(){return u(this,z)}get muted(){return u(this,un)}async connect(t){if(u(this,z).status==="connected")return;u(this,z).status==="connecting"&&Re.warn("Realtime connection already in progress. Please await original promise");const r=t.model??this.currentModel;this.currentModel=r;const s=t.url??u(this,an),a=await this._getApiKey(t),i=typeof a=="string"&&a.startsWith("ek_");if(!u(this,on)&&!i)throw new K("Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.");return new Promise(async(o,c)=>{try{const l={...t.initialSessionConfig||{},model:this.currentModel},p=new URL(s);let f=new RTCPeerConnection;const h=f.createDataChannel("oai-events");y(this,z,{status:"connecting",peerConnection:f,dataChannel:h}),this.emit("connection_change",u(this,z).status),h.addEventListener("open",()=>{y(this,z,{status:"connected",peerConnection:f,dataChannel:h}),this.updateSessionConfig(l),this.emit("connection_change",u(this,z).status),this._onOpen(),o()}),h.addEventListener("error",me=>{this.close(),this._onError(me),c(me)}),h.addEventListener("message",me=>{this._onMessage(me);const{data:ge,isGeneric:fn}=Ir(me);!ge||fn||(ge.type==="response.created"?y(this,ot,!0):ge.type==="response.done"&&y(this,ot,!1),ge.type==="session.created"&&(this._tracingConfig=ge.session.tracing,this._updateTracingConfig(l.tracing??"auto")))});const S=this.options.audioElement??document.createElement("audio");S.autoplay=!0,f.ontrack=me=>{S.srcObject=me.streams[0]};const b=this.options.mediaStream??await navigator.mediaDevices.getUserMedia({audio:!0});f.addTrack(b.getAudioTracks()[0]),this.options.changePeerConnection&&(f=await this.options.changePeerConnection(f),y(this,z,{...u(this,z),peerConnection:f}));const w=await f.createOffer();if(await f.setLocalDescription(w),!w.sdp)throw new Error("Failed to create offer");const E={...this._getMergedSessionConfig(l),model:this.currentModel},R=new FormData;R.append("sdp",w.sdp),R.append("session",JSON.stringify(E));const te={type:"answer",sdp:await(await fetch(p,{method:"POST",body:R,headers:{Authorization:`Bearer ${a}`,"X-OpenAI-Agents-SDK":Oa["X-OpenAI-Agents-SDK"]}})).text()};await f.setRemoteDescription(te)}catch(l){this.close(),this._onError(l),c(l)}})}sendEvent(t){if(!u(this,z).dataChannel||u(this,z).dataChannel.readyState!=="open")throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");u(this,z).dataChannel.send(JSON.stringify(t))}mute(t){y(this,un,t),u(this,z).peerConnection&&u(this,z).peerConnection.getSenders().forEach(s=>{s.track&&(s.track.enabled=!t)})}close(){if(u(this,z).dataChannel&&u(this,z).dataChannel.close(),u(this,z).peerConnection){const t=u(this,z).peerConnection;t.getSenders().forEach(r=>{var s;(s=r.track)==null||s.stop()}),t.close()}u(this,z).status!=="disconnected"&&(y(this,z,{status:"disconnected",peerConnection:void 0,dataChannel:void 0}),this.emit("connection_change",u(this,z).status),this._onClose())}interrupt(){u(this,ot)&&(this.sendEvent({type:"response.cancel"}),y(this,ot,!1)),this.sendEvent({type:"output_audio_buffer.clear"})}}an=new WeakMap,z=new WeakMap,on=new WeakMap,ot=new WeakMap,un=new WeakMap;const vc=globalThis.WebSocket;class _a extends qt{constructor(t={}){super(t);k(this,Jn);k(this,ut);k(this,kt);k(this,ee,{status:"disconnected",websocket:void 0});k(this,cn);k(this,Me);k(this,ct);_(this,"_firstAudioTimestamp");_(this,"_audioLengthMs",0);k(this,dt,!1);y(this,kt,`wss://api.openai.com/v1/realtime?model=${this.currentModel}`),y(this,cn,t.useInsecureApiKey??!1)}get status(){return u(this,ee).status}get connectionState(){return u(this,ee)}get muted(){return null}get currentItemId(){return u(this,Me)}_onAudio(t){this.emit("audio",t)}async connect(t){const r=t.model??this.currentModel;this.currentModel=r,y(this,ut,await this._getApiKey(t)),y(this,kt,t.url??`wss://api.openai.com/v1/realtime?model=${this.currentModel}`);const s={...t.initialSessionConfig||{},model:this.currentModel};await new Promise((a,i)=>{try{F(this,Jn,Sa).call(this,a,i,s)}catch(o){i(o)}}),await this.updateSessionConfig(s)}sendEvent(t){if(!u(this,ee).websocket)throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");u(this,ee).websocket.send(JSON.stringify(t))}close(){var t;(t=u(this,ee).websocket)==null||t.close(),y(this,Me,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,y(this,ct,void 0)}mute(t){throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.")}sendAudio(t,r={}){u(this,ee).status==="connected"&&super.sendAudio(t,r)}_cancelResponse(){u(this,dt)&&(this.sendEvent({type:"response.cancel"}),y(this,dt,!1))}_interrupt(t){this.emit("audio_interrupted"),this.sendEvent({type:"conversation.item.truncate",item_id:u(this,Me),content_index:u(this,ct),audio_end_ms:t})}interrupt(){if(!u(this,Me)||typeof this._firstAudioTimestamp!="number")return;this._cancelResponse();const t=Date.now()-this._firstAudioTimestamp;t>=0&&t<this._audioLengthMs&&this._interrupt(t),y(this,Me,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,y(this,ct,void 0)}}ut=new WeakMap,kt=new WeakMap,ee=new WeakMap,cn=new WeakMap,Me=new WeakMap,ct=new WeakMap,dt=new WeakMap,Jn=new WeakSet,Sa=function(t,r,s){if(u(this,ee).websocket){t();return}if(!u(this,ut))throw new K("API key is not set. Please call `connect()` with an API key first.");if(!u(this,ut).startsWith("ek_")&&!u(this,cn))throw new K("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");const a=["realtime","openai-insecure-api-key."+u(this,ut),"openai-beta.realtime-v1",Na],i=new vc(u(this,kt),a);y(this,ee,{status:"connecting",websocket:i}),this.emit("connection_change",u(this,ee).status),i.addEventListener("open",()=>{y(this,ee,{status:"connected",websocket:i}),this.emit("connection_change",u(this,ee).status),this._onOpen(),t()}),i.addEventListener("error",o=>{this._onError(o),y(this,ee,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,ee).status),r(o)}),i.addEventListener("message",o=>{this._onMessage(o);const{data:c,isGeneric:l}=Ir(o);if(!(!c||l))if(c.type==="response.audio.delta"){y(this,ct,c.content_index),y(this,Me,c.item_id),this._firstAudioTimestamp===void 0&&(this._firstAudioTimestamp=Date.now(),this._audioLengthMs=0);const p=X(c.delta);this._audioLengthMs+=p.byteLength/24/2;const f={type:"audio",data:p,responseId:c.response_id};this._onAudio(f)}else c.type==="input_audio_buffer.speech_started"?this.interrupt():c.type==="response.created"?y(this,dt,!0):c.type==="response.done"?y(this,dt,!1):c.type==="session.created"&&(this._tracingConfig=c.session.tracing,this._updateTracingConfig(s.tracing??"auto"))}),i.addEventListener("close",()=>{y(this,ee,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,ee).status),this._onClose()})};class wc extends On{constructor(t,r={}){super();k(this,W);_(this,"initialAgent");_(this,"options");k(this,B);k(this,Z);k(this,dn,[]);k(this,M);k(this,It,[]);k(this,At);k(this,ln,{});k(this,Y,[]);k(this,pn);k(this,Ct,{});this.initialAgent=t,this.options=r,typeof r.transport>"u"&&Ca()||r.transport==="webrtc"?y(this,B,new ga):r.transport==="websocket"||typeof r.transport>"u"?y(this,B,new _a):y(this,B,r.transport),y(this,Z,t),y(this,M,new mt({...r.context??{},history:u(this,Y)})),y(this,It,(r.outputGuardrails??[]).map(Tu)),y(this,At,Su(r.outputGuardrailSettings??{})),y(this,pn,r.historyStoreAudio??!1)}get transport(){return u(this,B)}get currentAgent(){return u(this,Z)}get usage(){return u(this,M).usage}get context(){return u(this,M)}get muted(){return u(this,B).muted}get history(){return u(this,Y)}async updateAgent(t){return u(this,Z).emit("agent_handoff",u(this,M),t),this.emit("agent_handoff",u(this,M),u(this,Z),t),await F(this,W,Bn).call(this,t),await u(this,B).updateSessionConfig(await F(this,W,qn).call(this)),t}async connect(t){await F(this,W,Bn).call(this,this.initialAgent),F(this,W,Ia).call(this),await u(this,B).connect({apiKey:t.apiKey??this.options.apiKey,model:this.options.model,initialSessionConfig:await F(this,W,qn).call(this,this.options.config)}),y(this,Y,[]),this.emit("history_updated",u(this,Y))}updateHistory(t){let r;typeof t=="function"?r=t(u(this,Y)):r=t,u(this,B).resetHistory(u(this,Y),r)}sendMessage(t,r={}){u(this,B).sendMessage(t,r)}mute(t){u(this,B).mute(t)}close(){y(this,Ct,{}),u(this,B).close()}sendAudio(t,r={}){u(this,B).sendAudio(t,r)}interrupt(){u(this,B).interrupt()}async approve(t,r={alwaysApprove:!1}){u(this,M).approveTool(t,r);const s=u(this,Z).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function"&&t.rawItem.type==="function_call")await F(this,W,Gn).call(this,t.rawItem,s);else throw new de(`Tool ${t.rawItem.name} not found`)}async reject(t,r={alwaysReject:!1}){u(this,M).rejectTool(t,r);const s=u(this,Z).tools.find(a=>a.name===t.rawItem.name);if(s&&s.type==="function"&&t.rawItem.type==="function_call")await F(this,W,Gn).call(this,t.rawItem,s);else throw new de(`Tool ${t.rawItem.name} not found`)}}B=new WeakMap,Z=new WeakMap,dn=new WeakMap,M=new WeakMap,It=new WeakMap,At=new WeakMap,ln=new WeakMap,Y=new WeakMap,pn=new WeakMap,Ct=new WeakMap,W=new WeakSet,Bn=async function(t){y(this,Z,t);const s=u(this,Z).handoffs.map(Dn).map(a=>a.getHandoffAsFunctionTool());y(this,dn,[...(await u(this,Z).getAllTools()).filter(a=>a.type==="function"),...s])},qn=async function(t={}){const r=await u(this,Z).getSystemPrompt(u(this,M)),s=this.options.tracingDisabled?null:this.options.workflowName?{workflow_name:this.options.workflowName}:"auto";return s!==null&&s!=="auto"?(this.options.groupId&&(s.group_id=this.options.groupId),this.options.traceMetadata&&(s.metadata=this.options.traceMetadata)):(this.options.groupId||this.options.traceMetadata)&&Re.warn("In order to set traceMetadata or a groupId you need to specify a workflowName."),{instructions:r,voice:u(this,Z).voice,model:this.options.model,tools:u(this,dn),tracing:s,...t}},Ta=async function(t,r){const s=await r.onInvokeHandoff(u(this,M),t.arguments);u(this,Z).emit("agent_handoff",u(this,M),s),this.emit("agent_handoff",u(this,M),u(this,Z),s),await F(this,W,Bn).call(this,s),await u(this,B).updateSessionConfig(await F(this,W,qn).call(this));const a=Ds(s);return u(this,B).sendFunctionCallOutput(t,a,!0),s},Gn=async function(t,r){u(this,M).context.history=JSON.parse(JSON.stringify(u(this,Y)));let s=t.arguments;if(r.parameters&&(ze(r.parameters)?s=r.parameters.parse(s):s=JSON.parse(s)),await r.needsApproval(u(this,M),s,t.callId)){const c=this.context.isToolApproved({toolName:r.name,callId:t.callId});if(c===!1){this.emit("agent_tool_start",u(this,M),u(this,Z),r,{toolCall:t}),u(this,Z).emit("agent_tool_start",u(this,M),r,{toolCall:t});const l="Tool execution was not approved.";u(this,B).sendFunctionCallOutput(t,l,!0),this.emit("agent_tool_end",u(this,M),u(this,Z),r,l,{toolCall:t}),u(this,Z).emit("agent_tool_end",u(this,M),r,l,{toolCall:t});return}else if(typeof c>"u"){this.emit("tool_approval_requested",u(this,M),u(this,Z),{type:"function_approval",tool:r,approvalItem:new Ie(t,u(this,Z))});return}}this.emit("agent_tool_start",u(this,M),u(this,Z),r,{toolCall:t}),u(this,Z).emit("agent_tool_start",u(this,M),r,{toolCall:t}),u(this,M).context.history=JSON.parse(JSON.stringify(u(this,Y)));const i=await r.invoke(u(this,M),t.arguments),o=We(i);u(this,B).sendFunctionCallOutput(t,o,!0),this.emit("agent_tool_end",u(this,M),u(this,Z),r,o,{toolCall:t}),u(this,Z).emit("agent_tool_end",u(this,M),r,o,{toolCall:t})},ka=async function(t){const r=new Map(u(this,Z).handoffs.map(Dn).map(i=>[i.toolName,i])),s=new Map((await u(this,Z).getAllTools()).map(i=>[i.name,i])),a=r.get(t.name);if(a)await F(this,W,Ta).call(this,t,a);else{const i=s.get(t.name);if(i&&i.type==="function")await F(this,W,Gn).call(this,t,i);else throw new de(`Tool ${t.name} not found`)}},$r=async function(t,r,s){if(u(this,It).length===0)return;const a={agent:u(this,Z),agentOutput:t,context:u(this,M)},o=(await Promise.all(u(this,It).map(c=>c.run(a)))).find(c=>c.output.tripwireTriggered);if(o){if(u(this,Ct)[r])return;u(this,Ct)[r]=!0;const c=new mn(`Output guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`,o);this.emit("guardrail_tripped",u(this,M),u(this,Z),c,{itemId:s}),this.interrupt();const l=ku(o);this.sendMessage(l);return}},Ia=function(){u(this,B).on("*",s=>{this.emit("transport_event",s)}),u(this,B).on("audio",s=>{this.emit("audio",s)}),u(this,B).on("turn_started",()=>{this.emit("agent_start",u(this,M),u(this,Z)),u(this,Z).emit("agent_start",u(this,M),u(this,Z))}),u(this,B).on("turn_done",s=>{const a=s.response.output[s.response.output.length-1],i=Fr(a)??"",o=(a==null?void 0:a.id)??"";this.emit("agent_end",u(this,M),u(this,Z),i),u(this,Z).emit("agent_end",u(this,M),i),F(this,W,$r).call(this,i,s.response.id,o)}),u(this,B).on("audio_done",()=>{this.emit("audio_stopped",u(this,M),u(this,Z))});let t=0,r;u(this,B).on("audio_transcript_delta",s=>{try{const a=s.delta,i=s.itemId,o=s.responseId;r!==i&&(r=i,t=0);const l=(u(this,ln)[i]??"")+a;if(u(this,ln)[i]=l,u(this,At).debounceTextLength<0)return;const p=Math.floor(l.length/u(this,At).debounceTextLength);p>t&&(t=p,F(this,W,$r).call(this,l,o,i))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("item_update",s=>{try{const a=!u(this,Y).some(i=>i.itemId===s.itemId);if(y(this,Y,Ea(u(this,Y),s,u(this,pn))),u(this,M).context.history=u(this,Y),a){const i=u(this,Y).find(o=>o.itemId===s.itemId);i&&this.emit("history_added",i)}this.emit("history_updated",u(this,Y))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("item_deleted",s=>{try{y(this,Y,u(this,Y).filter(a=>a.itemId!==s.itemId)),u(this,M).context.history=u(this,Y),this.emit("history_updated",u(this,Y))}catch(a){this.emit("error",{type:"error",error:a})}}),u(this,B).on("function_call",async s=>{try{await F(this,W,ka).call(this,s)}catch(a){Re.error("Error handling function call",a),this.emit("error",{type:"error",error:a})}}),u(this,B).on("usage_update",s=>{u(this,M).usage.add(s)}),u(this,B).on("audio_interrupted",()=>{this.emit("audio_interrupted",u(this,M),u(this,Z))}),u(this,B).on("error",s=>{this.emit("error",s)})};const bc={base64ToArrayBuffer:X,arrayBufferToBase64:Ot,getLastTextFromAudioOutputMessage:Fr};P.DEFAULT_OPENAI_REALTIME_MODEL=ma,P.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG=De,P.ModelBehaviorError=de,P.OpenAIRealtimeBase=qt,P.OpenAIRealtimeWebRTC=ga,P.OpenAIRealtimeWebSocket=_a,P.OutputGuardrailTripwireTriggered=mn,P.RealtimeAgent=xu,P.RealtimeSession=wc,P.UserError=K,P.tool=yn,P.utils=bc,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvcGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvT3B0aW9ucy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3V0aWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9kaXN0L2VzbS92My90eXBlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hbnkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JyYW5kZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2NhdGNoLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25ldmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bWJlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Byb21pc2UubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuZGVmaW5lZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvbG9jYWxlcy9lbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvdHlwZXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jcmVhdGVTcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9saWZlY3ljbGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9oYW5kb2ZmLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXZlbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuSW1wbGVtZW50YXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5TdGF0ZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjAuOVwiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4wLjlcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIixcbiAgICAgICAgXCJAb3BlbmFpL3pvZFwiOiBcIm5wbTp6b2RAXjMuMjUuNDBcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJpbXBvcnQgTUVUQURBVEEgZnJvbSBcIi4vbWV0YWRhdGEubWpzXCI7XG4vKipcbiAqIENvbnZlcnRzIGEgYmFzZTY0IHN0cmluZyB0byBhbiBBcnJheUJ1ZmZlclxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NFxuICogQHJldHVybnMge0FycmF5QnVmZmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBBcnJheUJ1ZmZlciB0byBhIGJhc2U2NCBzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpKTtcbiAgICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIGFuIGF1ZGlvIG91dHB1dCBtZXNzYWdlXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBpdGVtID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICAhKCd0eXBlJyBpbiBpdGVtKSB8fFxuICAgICAgICB0eXBlb2YgaXRlbS50eXBlICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAhaXRlbS50eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoISgnY29udGVudCcgaW4gaXRlbSkgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXRlbS5jb250ZW50KSB8fFxuICAgICAgICBpdGVtLmNvbnRlbnQubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0Q29udGVudEl0ZW0gPSBpdGVtLmNvbnRlbnRbaXRlbS5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgIGlmICghKCd0eXBlJyBpbiBsYXN0Q29udGVudEl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRleHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChpZHggPT09IGV4aXN0aW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQucHJldmlvdXNJdGVtSWQpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIHByZXZpb3VzSXRlbUlkIGlmIGZvdW5kLCBlbHNlIGF0IGVuZFxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50LnByZXZpb3VzSXRlbUlkKTtcbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZSgwLCBwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBoZWFkZXJzIHRvIHVzZSBmb3IgdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IEhFQURFUlMgPSB7XG4gICAgJ1VzZXItQWdlbnQnOiBgQWdlbnRzL0phdmFTY3JpcHQgJHtNRVRBREFUQS52ZXJzaW9ufWAsXG4gICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWAsXG59O1xuLyoqXG4gKiBCcm93c2VyIHdlYnNvY2tldCBoZWFkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVF9NRVRBID0gYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmZ1bmN0aW9uIHpvZFRvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCIvKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdfZGVmJyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuX2RlZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQuX2RlZiAhPT0gbnVsbCAmJlxuICAgICAgICAndHlwZU5hbWUnIGluIGlucHV0Ll9kZWYgJiZcbiAgICAgICAgaW5wdXQuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE9iamVjdCcpO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaW5wdXRUeXBlLFxuICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gem9kVGV4dEZvcm1hdChvdXRwdXRUeXBlLCAnb3V0cHV0Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLCcpXG5cdFx0XHQuc3BsaXQoJywnKVxuXHRcdFx0LmZpbHRlcihCb29sZWFuKTtcblxuXHRcdGZvciAoY29uc3QgbnMgb2Ygc3BsaXQpIHtcblx0XHRcdGlmIChuc1swXSA9PT0gJy0nKSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLnNraXBzLnB1c2gobnMuc2xpY2UoMSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcubmFtZXMucHVzaChucyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBuYW1lc3BhY2UgdGVtcGxhdGUsIGhvbm9yaW5nXG5cdCAqIGFzdGVyaXNrcyBhcyB3aWxkY2FyZHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVzVGVtcGxhdGUoc2VhcmNoLCB0ZW1wbGF0ZSkge1xuXHRcdGxldCBzZWFyY2hJbmRleCA9IDA7XG5cdFx0bGV0IHRlbXBsYXRlSW5kZXggPSAwO1xuXHRcdGxldCBzdGFySW5kZXggPSAtMTtcblx0XHRsZXQgbWF0Y2hJbmRleCA9IDA7XG5cblx0XHR3aGlsZSAoc2VhcmNoSW5kZXggPCBzZWFyY2gubGVuZ3RoKSB7XG5cdFx0XHRpZiAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09IHNlYXJjaFtzZWFyY2hJbmRleF0gfHwgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykpIHtcblx0XHRcdFx0Ly8gTWF0Y2ggY2hhcmFjdGVyIG9yIHByb2NlZWQgd2l0aCB3aWxkY2FyZFxuXHRcdFx0XHRpZiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0XHRcdHN0YXJJbmRleCA9IHRlbXBsYXRlSW5kZXg7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleCA9IHNlYXJjaEluZGV4O1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKzsgLy8gU2tpcCB0aGUgJyonXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VhcmNoSW5kZXgrKztcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RhckluZGV4ICE9PSAtMSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0XHRcdC8vIEJhY2t0cmFjayB0byB0aGUgbGFzdCAnKicgYW5kIHRyeSB0byBtYXRjaCBtb3JlIGNoYXJhY3RlcnNcblx0XHRcdFx0dGVtcGxhdGVJbmRleCA9IHN0YXJJbmRleCArIDE7XG5cdFx0XHRcdG1hdGNoSW5kZXgrKztcblx0XHRcdFx0c2VhcmNoSW5kZXggPSBtYXRjaEluZGV4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBtYXRjaFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSB0cmFpbGluZyAnKicgaW4gdGVtcGxhdGVcblx0XHR3aGlsZSAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRlbXBsYXRlSW5kZXggPT09IHRlbXBsYXRlLmxlbmd0aDtcblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMsXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGZvciAoY29uc3Qgc2tpcCBvZiBjcmVhdGVEZWJ1Zy5za2lwcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBza2lwKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBjcmVhdGVEZWJ1Zy5uYW1lcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBucykpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRsZXQgbTtcblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAobSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pKSAmJiBwYXJzZUludChtWzFdLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpIHx8IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdERUJVRycpIDtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cblxuXHQvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHXG5cdGlmICghciAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2VudicgaW4gcHJvY2Vzcykge1xuXHRcdHIgPSBwcm9jZXNzLmVudi5ERUJVRztcblx0fVxuXG5cdHJldHVybiByO1xufVxuXG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcblx0dHJ5IHtcblx0XHQvLyBUVk1MS2l0IChBcHBsZSBUViBKUyBSdW50aW1lKSBkb2VzIG5vdCBoYXZlIGEgd2luZG93IG9iamVjdCwganVzdCBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0XG5cdFx0Ly8gVGhlIEJyb3dzZXIgYWxzbyBoYXMgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dC5cblx0XHRyZXR1cm4gbG9jYWxTdG9yYWdlO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29tbW9uJykoZXhwb3J0cyk7XG5cbmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzO1xuXG4vKipcbiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cbiAqL1xuXG5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyb3IubWVzc2FnZTtcblx0fVxufTtcbiIsImltcG9ydCB7IGxvYWRFbnYgYXMgX2xvYWRFbnYsIGlzQnJvd3NlckVudmlyb25tZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gdGhlIHByb2Nlc3MgZW52aXJvbm1lbnQuXG4gKlxuICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIF9sb2FkRW52KCk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIGZsYWcgaXMgZW5hYmxlZCBpbiB0aGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZsYWdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZsYWcgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZsYWcgaXMgZW5hYmxlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzRW5hYmxlZChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGVudiA9IGxvYWRFbnYoKTtcbiAgICByZXR1cm4gKHR5cGVvZiBlbnYgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIChlbnZbZmxhZ05hbWVdID09PSAndHJ1ZScgfHwgZW52W2ZsYWdOYW1lXSA9PT0gJzEnKSk7XG59XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciB0cmFjaW5nLlxuICovXG5leHBvcnQgY29uc3QgdHJhY2luZyA9IHtcbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2FkRW52KCkuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgLy8gZGlzYWJsaW5nIGJ5IGRlZmF1bHQgaW4gdGVzdHNcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRElTQUJMRV9UUkFDSU5HJyk7XG4gICAgfSxcbn07XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciBsb2dnaW5nLlxuICovXG5leHBvcnQgY29uc3QgbG9nZ2luZyA9IHtcbiAgICBnZXQgZG9udExvZ01vZGVsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19NT0RFTF9EQVRBJyk7XG4gICAgfSxcbiAgICBnZXQgZG9udExvZ1Rvb2xEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX1RPT0xfREFUQScpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLm1qcy5tYXAiLCJpbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgbG9nZ2luZyB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgTExNIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nTW9kZWxEYXRhID0gbG9nZ2luZy5kb250TG9nTW9kZWxEYXRhO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyB0b29sIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nVG9vbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dUb29sRGF0YTtcbi8qKlxuICogR2V0IGEgbG9nZ2VyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIG5hbWVzcGFjZSAtIHRoZSBuYW1lc3BhY2UgdG8gdXNlIGZvciB0aGUgbG9nZ2VyLlxuICogQHJldHVybnMgQSBsb2dnZXIgb2JqZWN0IHdpdGggYGRlYnVnYCBhbmQgYGVycm9yYCBtZXRob2RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSA9ICdvcGVuYWktYWdlbnRzJykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgZGVidWc6IGRlYnVnKG5hbWVzcGFjZSksXG4gICAgICAgIGVycm9yOiBjb25zb2xlLmVycm9yLFxuICAgICAgICB3YXJuOiBjb25zb2xlLndhcm4sXG4gICAgICAgIGRvbnRMb2dNb2RlbERhdGEsXG4gICAgICAgIGRvbnRMb2dUb29sRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpjb3JlJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgcmV0dXJuICdbb2JqZWN0IHdpdGggY2lyY3VsYXIgcmVmZXJlbmNlc10nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbXB1dGVyIHRvb2wgbGlrZSBzcGVjaWZ5aW5nIHRoZSBsb2NhdGlvbiBvZiB5b3VyIGFnZW50XG4gKiBAcmV0dXJucyBhIGNvbXB1dGVyIHRvb2wgZGVmaW5pdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZXJUb29sKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhvc3RlZCBNQ1AgdG9vbCBkZWZpbml0aW9uLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJMYWJlbCAtIFRoZSBsYWJlbCBpZGVudGlmeWluZyB0aGUgTUNQIHNlcnZlci5cbiAqIEBwYXJhbSBzZXJ2ZXJVcmwgLSBUaGUgVVJMIG9mIHRoZSBNQ1Agc2VydmVyLlxuICogQHBhcmFtIHJlcXVpcmVBcHByb3ZhbCAtIFdoZXRoZXIgdG9vbCBjYWxscyByZXF1aXJlIGFwcHJvdmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdGVkTWNwVG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBydW5uaW5nIHRoZSB0b29sLlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogPGVycm9yIGRldGFpbHM+YFxuICpcbiAqIEBwYXJhbSBjb250ZXh0IEFuIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IFJ1bkNvbnRleHRcbiAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICovXG5mdW5jdGlvbiBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24oY29udGV4dCwgZXJyb3IpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnRvU3RyaW5nKCkgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6ICR7ZGV0YWlsc31gO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIHRvb2xcbiAqIEByZXR1cm5zIEEgbmV3IHRvb2xcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICAgICAgPyB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5uYW1lKVxuICAgICAgICA6IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLmV4ZWN1dGUubmFtZSk7XG4gICAgY29uc3QgdG9vbEVycm9yRnVuY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5lcnJvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvblxuICAgICAgICA6IG9wdGlvbnMuZXJyb3JGdW5jdGlvbjtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5LiBFaXRoZXIgbmFtZSB5b3VyIGZ1bmN0aW9uIG9yIHByb3ZpZGUgYSBuYW1lIGluIHRoZSBvcHRpb25zLicpO1xuICAgIH1cbiAgICBjb25zdCBzdHJpY3RNb2RlID0gb3B0aW9ucy5zdHJpY3QgPz8gdHJ1ZTtcbiAgICBpZiAoIXN0cmljdE1vZGUgJiYgaXNab2RPYmplY3Qob3B0aW9ucy5wYXJhbWV0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTdHJpY3QgbW9kZSBpcyByZXF1aXJlZCBmb3IgWm9kIHBhcmFtZXRlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJzZXIsIHNjaGVtYTogcGFyYW1ldGVycyB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShvcHRpb25zLnBhcmFtZXRlcnMsIG5hbWUpO1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBwYXJzZWRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKGlucHV0KSk7XG4gICAgICAgIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9OiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgc3RyaWN0OiBzdHJpY3RNb2RlLFxuICAgICAgICBpbnZva2UsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVxdWlyZUFwcHJvdmFsKHJlcXVpcmVBcHByb3ZhbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChyZXF1aXJlQXBwcm92YWwuYWx3YXlzKSB7XG4gICAgICAgIHJlc3VsdC5hbHdheXMgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5hbHdheXMudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIGlmIChyZXF1aXJlQXBwcm92YWwubmV2ZXIpIHtcbiAgICAgICAgcmVzdWx0Lm5ldmVyID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwubmV2ZXIudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihhbGxvd2VkVG9vbHMpIHtcbiAgICBpZiAodHlwZW9mIGFsbG93ZWRUb29scyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZFRvb2xzKSkge1xuICAgICAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzPy50b29sTmFtZXMgPz8gW10gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImV4cG9ydCB2YXIgdXRpbDtcbihmdW5jdGlvbiAodXRpbCkge1xuICAgIHV0aWwuYXNzZXJ0RXF1YWwgPSAoXykgPT4geyB9O1xuICAgIGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuICAgIHV0aWwuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgICBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgdXRpbC5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICAgIHV0aWwuYXJyYXlUb0VudW0gPSAoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gICAgdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhvYmopLmZpbHRlcigoaykgPT4gdHlwZW9mIG9ialtvYmpba11dICE9PSBcIm51bWJlclwiKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIHZhbGlkS2V5cykge1xuICAgICAgICAgICAgZmlsdGVyZWRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKGZpbHRlcmVkKTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0VmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RLZXlzKG9iaikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0S2V5cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gXCJmdW5jdGlvblwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA/IChvYmopID0+IE9iamVjdC5rZXlzKG9iaikgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgdXRpbC5maW5kID0gKGFyciwgY2hlY2tlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgdXRpbC5pc0ludGVnZXIgPSB0eXBlb2YgTnVtYmVyLmlzSW50ZWdlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gKHZhbCkgPT4gTnVtYmVyLmlzSW50ZWdlcih2YWwpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbCkgJiYgTWF0aC5mbG9vcih2YWwpID09PSB2YWw7XG4gICAgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCIgfCBcIikge1xuICAgICAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiID8gYCcke3ZhbH0nYCA6IHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgdXRpbC5qb2luVmFsdWVzID0gam9pblZhbHVlcztcbiAgICB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKHV0aWwgfHwgKHV0aWwgPSB7fSkpO1xuZXhwb3J0IHZhciBvYmplY3RVdGlsO1xuKGZ1bmN0aW9uIChvYmplY3RVdGlsKSB7XG4gICAgb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyA9IChmaXJzdCwgc2Vjb25kKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5maXJzdCxcbiAgICAgICAgICAgIC4uLnNlY29uZCwgLy8gc2Vjb25kIG92ZXJ3cml0ZXMgZmlyc3RcbiAgICAgICAgfTtcbiAgICB9O1xufSkob2JqZWN0VXRpbCB8fCAob2JqZWN0VXRpbCA9IHt9KSk7XG5leHBvcnQgY29uc3QgWm9kUGFyc2VkVHlwZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwic3RyaW5nXCIsXG4gICAgXCJuYW5cIixcbiAgICBcIm51bWJlclwiLFxuICAgIFwiaW50ZWdlclwiLFxuICAgIFwiZmxvYXRcIixcbiAgICBcImJvb2xlYW5cIixcbiAgICBcImRhdGVcIixcbiAgICBcImJpZ2ludFwiLFxuICAgIFwic3ltYm9sXCIsXG4gICAgXCJmdW5jdGlvblwiLFxuICAgIFwidW5kZWZpbmVkXCIsXG4gICAgXCJudWxsXCIsXG4gICAgXCJhcnJheVwiLFxuICAgIFwib2JqZWN0XCIsXG4gICAgXCJ1bmtub3duXCIsXG4gICAgXCJwcm9taXNlXCIsXG4gICAgXCJ2b2lkXCIsXG4gICAgXCJuZXZlclwiLFxuICAgIFwibWFwXCIsXG4gICAgXCJzZXRcIixcbl0pO1xuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zdHJpbmc7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBab2RQYXJzZWRUeXBlLm5hbiA6IFpvZFBhcnNlZFR5cGUubnVtYmVyO1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYm9vbGVhbjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYmlnaW50O1xuICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zeW1ib2w7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50aGVuICYmIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJiBkYXRhLmNhdGNoICYmIHR5cGVvZiBkYXRhLmNhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5wcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm1hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIERhdGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5kYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUub2JqZWN0O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5rbm93bjtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgdXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmV4cG9ydCBjb25zdCBxdW90ZWxlc3NKc29uID0gKG9iaikgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIHJldHVybiBqc29uLnJlcGxhY2UoL1wiKFteXCJdKylcIjovZywgXCIkMTpcIik7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaXNzdWVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgICAgIHRoaXMuYWRkSXNzdWUgPSAoc3ViKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3Vlcywgc3ViXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjdHVhbFByb3RvID0gbmV3LnRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYWN0dWFsUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX3Byb3RvX18gPSBhY3R1YWxQcm90bztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlpvZEVycm9yXCI7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzO1xuICAgIH1cbiAgICBmb3JtYXQoX21hcHBlcikge1xuICAgICAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWUubWVzc2FnZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0geyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF91bmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlLnVuaW9uRXJyb3JzLm1hcChwcm9jZXNzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUucmV0dXJuVHlwZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2FyZ3VtZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGVycm9yQXJyYXk6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXJyb3JBcnJheS5fZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IGVycm9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0uX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9jZXNzRXJyb3IodGhpcyk7XG4gICAgICAgIHJldHVybiBmaWVsZEVycm9ycztcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFpvZEVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZmxhdHRlbihtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iLCJpbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuL2xvY2FsZXMvZW4uanNcIjtcbmxldCBvdmVycmlkZUVycm9yTWFwID0gZGVmYXVsdEVycm9yTWFwO1xuZXhwb3J0IHsgZGVmYXVsdEVycm9yTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cbiIsImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdGRpby1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RyZWFtYWJsZS1odHRwLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz9cbiAgICAgICAgICAgICAgICBnZXRMb2dnZXIoREVGQVVMVF9TVFJFQU1BQkxFX0hUVFBfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogTWluaW11bSBNQ1AgdG9vbCBkYXRhIGRlZmluaXRpb24uXG4gKiBUaGlzIHR5cGUgZGVmaW5pdGlvbiBkb2VzIG5vdCBpbnRlbmQgdG8gY292ZXIgYWxsIHBvc3NpYmxlIHByb3BlcnRpZXMuXG4gKiBJdCBzdXBwb3J0cyB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSB1c2VkIGluIHRoaXMgU0RLLlxuICovXG5leHBvcnQgY29uc3QgTUNQVG9vbCA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRTY2hlbWE6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdvYmplY3QnKSxcbiAgICAgICAgcHJvcGVydGllczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgICAgIHJlcXVpcmVkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogei5ib29sZWFuKCksXG4gICAgfSksXG59KTtcbi8qKlxuICogUHVibGljIGludGVyZmFjZSBvZiBhbiBNQ1Agc2VydmVyIHRoYXQgcHJvdmlkZXMgdG9vbHMuXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGNsYXNzIHRvIHBhc3MgTUNQIHNlcnZlciBzZXR0aW5ncyB0byB5b3VyIGFnZW50LlxuICovXG5leHBvcnQgY2xhc3MgTUNQU2VydmVyU3RkaW8gZXh0ZW5kcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbyhvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcubmFtZTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jb25uZWN0KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNsb3NlKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QgJiYgdGhpcy5fY2FjaGVkVG9vbHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRUb29scztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHRoaXMudW5kZXJseWluZy5saXN0VG9vbHMoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZFRvb2xzID0gdG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH1cbiAgICBjYWxsVG9vbCh0b29sTmFtZSwgYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgZXh0ZW5kcyBCYXNlTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cChvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcubmFtZTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jb25uZWN0KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNsb3NlKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3RUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QgJiYgdGhpcy5fY2FjaGVkVG9vbHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRUb29scztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHRoaXMudW5kZXJseWluZy5saXN0VG9vbHMoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlZFRvb2xzID0gdG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH1cbiAgICBjYWxsVG9vbCh0b29sTmFtZSwgYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKTtcbiAgICB9XG59XG4vKipcbiAqIEZldGNoZXMgYW5kIGZsYXR0ZW5zIGFsbCB0b29scyBmcm9tIG11bHRpcGxlIE1DUCBzZXJ2ZXJzLlxuICogTG9ncyBhbmQgc2tpcHMgYW55IHNlcnZlcnMgdGhhdCBmYWlsIHRvIHJlc3BvbmQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxNY3BGdW5jdGlvblRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gW107XG4gICAgY29uc3QgdG9vbE5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2VydmVyIG9mIG1jcFNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbHMgPSBhd2FpdCBnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlcihzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29sTmFtZXMgPSBuZXcgU2V0KHNlcnZlclRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IFsuLi5zZXJ2ZXJUb29sTmFtZXNdLmZpbHRlcigobikgPT4gdG9vbE5hbWVzLmhhcyhuKSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRHVwbGljYXRlIHRvb2wgbmFtZXMgZm91bmQgYWNyb3NzIE1DUCBzZXJ2ZXJzOiAke2ludGVyc2VjdGlvbi5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBzZXJ2ZXJUb29scykge1xuICAgICAgICAgICAgdG9vbE5hbWVzLmFkZCh0Lm5hbWUpO1xuICAgICAgICAgICAgYWxsVG9vbHMucHVzaCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWxsVG9vbHM7XG59XG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbi8qKlxuICogUmVtb3ZlIGNhY2hlZCB0b29scyBmb3IgdGhlIGdpdmVuIHNlcnZlciBzbyB0aGUgbmV4dCBsb29rdXAgZmV0Y2hlcyBmcmVzaCBkYXRhLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJOYW1lIC0gTmFtZSBvZiB0aGUgTUNQIHNlcnZlciB3aG9zZSBjYWNoZSBzaG91bGQgYmUgY2xlYXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlKHNlcnZlck5hbWUpIHtcbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkge1xuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhNQ1BMaXN0VG9vbHNTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgc2VydmVyLmxpc3RUb29scygpO1xuICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgY29uc3QgdG9vbHMgPSBtY3BUb29scy5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgICAgICBpZiAoc2VydmVyLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICBfY2FjaGVkVG9vbHNbc2VydmVyLm5hbWVdID0gdG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH0sIHsgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0gfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIGdldEFsbE1jcEZ1bmN0aW9uVG9vbHMobWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdCk7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIE1DUCB0b29sIGRlZmluaXRpb24gdG8gYSBmdW5jdGlvbiB0b29sIGZvciB0aGUgQWdlbnRzIFNESy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1jcFRvRnVuY3Rpb25Ub29sKG1jcFRvb2wsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShpbnB1dCwgX2NvbnRleHQpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgJiYgaW5wdXQpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgY3VycmVudFNwYW4uc3BhbkRhdGFbJ21jcF9kYXRhJ10gPSB7IHNlcnZlcjogc2VydmVyLm5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgc2VydmVyLmNhbGxUb29sKG1jcFRvb2wubmFtZSwgYXJncyk7XG4gICAgICAgIHJldHVybiBjb250ZW50Lmxlbmd0aCA9PT0gMSA/IGNvbnRlbnRbMF0gOiBjb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnR5cGUgPz8gJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnByb3BlcnRpZXMgPz8ge30sXG4gICAgICAgIHJlcXVpcmVkOiBtY3BUb29sLmlucHV0U2NoZW1hPy5yZXF1aXJlZCA/PyBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LmFkZGl0aW9uYWxQcm9wZXJ0aWVzID8/IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgfHwgc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpY3RTY2hlbWEgPSBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSk7XG4gICAgICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHN0cmljdFNjaGVtYSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdsb2JhbExvZ2dlci53YXJuKGBFcnJvciBjb252ZXJ0aW5nIE1DUCBzY2hlbWEgdG8gc3RyaWN0IG1vZGU6ICR7ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBub25TdHJpY3RTY2hlbWEgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG4gICAgfTtcbiAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHBhcmFtZXRlcnM6IG5vblN0cmljdFNjaGVtYSxcbiAgICAgICAgc3RyaWN0OiBmYWxzZSxcbiAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgIH0pO1xufVxuLyoqXG4gKiBFbnN1cmVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSBpcyBzdHJpY3QgKG5vIGFkZGl0aW9uYWwgcHJvcGVydGllcywgcmVxdWlyZWQgZmllbGRzIHNldCkuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmICghb3V0LnJlcXVpcmVkKVxuICAgICAgICBvdXQucmVxdWlyZWQgPSBbXTtcbiAgICByZXR1cm4gb3V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWNwLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuLy8gVXNlIGZ1bmN0aW9uIGluc3RlYWQgb2YgZXhwb3J0aW5nIHRoZSB2YWx1ZSB0byBwcmV2ZW50XG4vLyBjaXJjdWxhciBkZXBlbmRlbmN5IHJlc29sdXRpb24gaXNzdWVzIGNhdXNlZCBieSBvdGhlciBleHBvcnRzIGluICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcydcbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydCBjbGFzcyBCcm93c2VyRXZlbnRFbWl0dGVyIHtcbiAgICAjdGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvZmYodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlID0gY2xhc3MgUmVhZGFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcGlwZVRvKF9kZXN0aW5hdGlvbiwgX29wdGlvbnMpIHsgfVxuICAgIHBpcGVUaHJvdWdoKF90cmFuc2Zvcm0sIF9vcHRpb25zKSB7IH1cbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW0gPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtQ29udHJvbGxlciA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjtcbmV4cG9ydCBjb25zdCBUcmFuc2Zvcm1TdHJlYW0gPSBnbG9iYWxUaGlzLlRyYW5zZm9ybVN0cmVhbTtcbmV4cG9ydCBjbGFzcyBBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgY29udGV4dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBydW4oY29udGV4dCwgZm4pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICAgIH1cbiAgICBlbnRlcldpdGgoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYWNpbmdMb29wUnVubmluZ0J5RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgeyBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgfSBmcm9tIFwiLi9tY3Atc2VydmVyL2Jyb3dzZXIubWpzXCI7XG5jbGFzcyBCcm93c2VyVGltZXIge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgc2V0VGltZW91dChjYWxsYmFjaywgbXMpIHtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgICAgICAgdGltZW91dC5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0LnVucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC51bnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQuaGFzUmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0Lmhhc1JlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQuaGFzUmVmIDogKCkgPT4gdHJ1ZTtcbiAgICAgICAgdGltZW91dC5yZWZyZXNoID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZnJlc2ggPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZnJlc2ggOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gdGltZW91dDtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxufVxuY29uc3QgdGltZXIgPSBuZXcgQnJvd3NlclRpbWVyKCk7XG5leHBvcnQgeyB0aW1lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5sZXQgX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbmZ1bmN0aW9uIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpIHtcbiAgICBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlID8/PSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICByZXR1cm4gX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCB0cmFjZSBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZSBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHRyYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZT8udHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUcmFjZS50cmFjZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgc3BhbiBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCBzcGFuIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFNwYW4/LnNwYW4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRTcGFuLnNwYW47XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGlzIGFuIEFzeW5jTG9jYWxTdG9yYWdlIGluc3RhbmNlIHRoYXQgc3RvcmVzIHRoZSBjdXJyZW50IHRyYWNlLlxuICogSXQgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgZGlmZmVyZW50IGV2ZW50IGxvb3AgZXhlY3V0aW9ucy5cbiAqXG4gKiBUaGUgZnVuY3Rpb25zIGJlbG93IHNob3VsZCBiZSB0aGUgb25seSB3YXkgdGhhdCB0aGlzIGNvbnRleHQgZ2V0cyBpbnRlcmZhY2VkIHdpdGguXG4gKi9cbmZ1bmN0aW9uIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pIHtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICBpZiAoIXRyYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHRyYWNlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdHJhY2Uuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4odHJhY2UpO1xuICAgICAgICBhd2FpdCB0cmFjZS5lbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHRyYWNlIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvblxuICogcGFzc2VkIHRvIGl0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aFRyYWNlKHRyYWNlLCBmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbmV3VHJhY2UgPSB0eXBlb2YgdHJhY2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBuYW1lOiB0cmFjZSxcbiAgICAgICAgfSlcbiAgICAgICAgOiB0cmFjZTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGFjdGl2ZSB0cmFjZSBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuIElmIHRoZXJlXG4gKiBpcywgaXQgd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggdGhlIGV4aXN0aW5nIHRyYWNlLiBJZiB0aGVyZSBpcyBubyB0cmFjZSwgaXQgd2lsbCBjcmVhdGVcbiAqIGEgbmV3IG9uZSBhbmQgYXNzaWduIGl0IHRvIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ6dW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVUcmFjZShmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZSkge1xuICAgICAgICAvLyBpZiB0aGlzIGV4ZWN1dGlvbiBjb250ZXh0IGFscmVhZHkgaGFzIGEgdHJhY2UgaW5zdGFuY2UgaW4gaXQgd2UganVzdCBjb250aW51ZVxuICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9XG4gICAgY29uc3QgbmV3VHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uob3B0aW9ucyk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bih7IHRyYWNlOiBuZXdUcmFjZSB9LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXQgdGhlIGN1cnJlbnQgc3BhbiBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHNwYW4gLSBUaGUgc3BhbiB0byBzZXQgYXMgdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTcGFuKHNwYW4pIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5zcGFuKSB7XG4gICAgICAgIGNvbnRleHQuc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW47XG4gICAgfVxuICAgIGNvbnRleHQuc3BhbiA9IHNwYW47XG4gICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgICAgIGNvbnRleHQucHJldmlvdXNTcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW4/LnByZXZpb3VzU3BhbjtcbiAgICAgICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGFkZCBhbiBlcnJvciB0byB0aGUgY3VycmVudCBzcGFuLlxuICpcbiAqIEBwYXJhbSBzcGFuRXJyb3IgLSBUaGUgZXJyb3IgdG8gYWRkIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvclRvQ3VycmVudFNwYW4oc3BhbkVycm9yKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICBjdXJyZW50U3Bhbi5zZXRFcnJvcihzcGFuRXJyb3IpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNsb25lIHRoZSBjdXJyZW50IGNvbnRleHQgYnkgY3JlYXRpbmcgbmV3IGluc3RhbmNlcyBvZiB0aGUgdHJhY2UsIHNwYW4sIGFuZFxuICogcHJldmlvdXMgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHRvIGNsb25lLlxuICogQHJldHVybnMgQSBjbG9uZSBvZiB0aGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQ3VycmVudENvbnRleHQoY29udGV4dCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYWNlOiBjb250ZXh0LnRyYWNlPy5jbG9uZSgpLFxuICAgICAgICBzcGFuOiBjb250ZXh0LnNwYW4/LmNsb25lKCksXG4gICAgICAgIHByZXZpb3VzU3BhbjogY29udGV4dC5wcmV2aW91c1NwYW4/LmNsb25lKCksXG4gICAgfTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCBhIG5ldyBzcGFuIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biB3aXRoIHRoZSBuZXcgc3BhbiBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aE5ld1NwYW5Db250ZXh0KGZuKSB7XG4gICAgY29uc3QgY3VycmVudENvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBjb3B5T2ZDb250ZXh0ID0gY2xvbmVDdXJyZW50Q29udGV4dChjdXJyZW50Q29udGV4dCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihjb3B5T2ZDb250ZXh0LCBmbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyB0aW1lciBhcyBfdGltZXIsIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBQcmludHMgdGhlIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGNvbnNvbGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVTcGFuRXhwb3J0ZXIge1xuICAgIGFzeW5jIGV4cG9ydChpdGVtcykge1xuICAgICAgICBpZiAodHJhY2luZy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdUcmFjaW5nIGlzIGRpc2FibGVkLiBTa2lwcGluZyBleHBvcnQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0cmFjZScpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgdHJhY2UgdHJhY2VJZD0ke2l0ZW0udHJhY2VJZH0gbmFtZT0ke2l0ZW0ubmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gSGFuZGxlIHRlcm1pbmF0aW9uIChTSUdURVJNKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHVEVSTScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmxldCBHTE9CQUxfVFJBQ0VfUFJPVklERVIgPSB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpIHtcbiAgICBpZiAoIUdMT0JBTF9UUkFDRV9QUk9WSURFUikge1xuICAgICAgICBHTE9CQUxfVFJBQ0VfUFJPVklERVIgPSBuZXcgVHJhY2VQcm92aWRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gR0xPQkFMX1RSQUNFX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXIubWpzLm1hcCIsImltcG9ydCB7IHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmZ1bmN0aW9uIF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3Bhbikge1xuICAgIHJldHVybiBhc3luYyAoZm4sIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBuZXcgc3BhbiBjb250ZXh0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcmV2aW91cyBzcGFuIGlzIGNvcnJlY3RseSByZXNldFxuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVTcGFuKC4uLmFyZ3MpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3Bhbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3IuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoUmVzcG9uc2VTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBjcmVhdGVHZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgcmVzcG9uc2Ugc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUmVzcG9uc2VTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVSZXNwb25zZVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoQWdlbnRTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGFnZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2VudFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnM/LmRhdGE/Lm5hbWUgPz8gJ0FnZW50JyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhBZ2VudFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUFnZW50U3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhGdW5jdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgZnVuY3Rpb24gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LmRhdGE/LmlucHV0ID8/ICcnLFxuICAgICAgICAgICAgb3V0cHV0OiBvcHRpb25zPy5kYXRhPy5vdXRwdXQgPz8gJycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoRnVuY3Rpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVGdW5jdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhIYW5kb2ZmU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBoYW5kb2ZmIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYW5kb2ZmU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdoYW5kb2ZmJywgLi4ub3B0aW9ucz8uZGF0YSB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhIYW5kb2ZmU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlSGFuZG9mZlNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ2VuZXJhdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhHZW5lcmF0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgZ2VuZXJhdGlvbiwgaW5jbHVkaW5nIGlucHV0L291dHB1dCBtZXNzYWdlXG4gKiBzZXF1ZW5jZXMsIG1vZGVsIGluZm9ybWF0aW9uLCBhbmQgdXNhZ2UgZGF0YS4gSWYgeW91IG9ubHkgbmVlZCB0byBjYXB0dXJlIGEgbW9kZWwgcmVzcG9uc2VcbiAqIGlkZW50aWZpZXIsIGNvbnNpZGVyIHVzaW5nIGBjcmVhdGVSZXNwb25zZVNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdlbmVyYXRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdnZW5lcmF0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKiBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGdlbmVyYXRpb24gc3BhbiwgcnVuIGZuIGFuZCBjbG9zZSB0aGUgc3BhbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhHZW5lcmF0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR2VuZXJhdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEN1c3RvbVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhDdXN0b21TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVDdXN0b21TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGd1YXJkcmFpbCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhHdWFyZHJhaWxTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1YXJkcmFpbFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2d1YXJkcmFpbCcsXG4gICAgICAgICAgICB0cmlnZ2VyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhHdWFyZHJhaWxTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHdWFyZHJhaWxTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHRyYW5zY3JpcHRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zY3JpcHRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVUcmFuc2NyaXB0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBncm91cCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hHcm91cFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaF9ncm91cCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaEdyb3VwU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoR3JvdXBTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IE1DUCBsaXN0IHRvb2xzIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1DUExpc3RUb29sc1NwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ21jcF90b29scycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aE1DUExpc3RUb29sc1NwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZU1DUExpc3RUb29sc1NwYW4pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlU3BhbnMubWpzLm1hcCIsImltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UsIGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NyZWF0ZVNwYW5zLm1qc1wiO1xuZXhwb3J0IHsgQmF0Y2hUcmFjZVByb2Nlc3NvciwgQ29uc29sZVNwYW5FeHBvcnRlciwgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuZXhwb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmV4cG9ydCB7IGdlbmVyYXRlR3JvdXBJZCwgZ2VuZXJhdGVTcGFuSWQsIGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBBZGQgYSBwcm9jZXNzb3IgdG8gdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gRWFjaCBwcm9jZXNzb3Igd2lsbCByZWNlaXZlIGFsbCB0cmFjZXMvc3BhbnMuXG4gKlxuICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcik7XG59XG4vKipcbiAqIFNldCB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBUaGlzIHdpbGwgcmVwbGFjZSBhbnkgZXhpc3RpbmcgcHJvY2Vzc29ycy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2VQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbn1cbi8qKlxuICogU2V0IHRoZSBkaXNhYmxlZCBzdGF0ZSBvZiB0aGUgdHJhY2luZyBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0gZGlzYWJsZWQgLSBXaGV0aGVyIHRvIGRpc2FibGUgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRyYWNpbmdEaXNhYmxlZChkaXNhYmxlZCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXREaXNhYmxlZChkaXNhYmxlZCk7XG59XG4vKipcbiAqIFN0YXJ0IHRoZSB0cmFjZSBleHBvcnQgbG9vcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0VHJhY2VFeHBvcnRMb29wKCkge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zdGFydEV4cG9ydExvb3AoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsIi8qKlxuICogRGVmaW5lcyBhbiBpbnB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUlucHV0R3VhcmRyYWlsKHsgbmFtZSwgZXhlY3V0ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG4vKipcbiAqIEEgaGFuZG9mZiBpcyB3aGVuIGFuIGFnZW50IGRlbGVnYXRlcyBhIHRhc2sgdG8gYW5vdGhlciBhZ2VudC5cbiAqIEZvciBleGFtcGxlLCBpbiBhIGN1c3RvbWVyIHN1cHBvcnQgc2NlbmFyaW8geW91IG1pZ2h0IGhhdmUgYSBcInRyaWFnZSBhZ2VudFwiIHRoYXQgZGV0ZXJtaW5lcyB3aGljaFxuICogYWdlbnQgc2hvdWxkIGhhbmRsZSB0aGUgdXNlcidzIHJlcXVlc3QsIGFuZCBzdWItYWdlbnRzIHRoYXQgc3BlY2lhbGl6ZSBpbiBkaWZmZXJlbnQgYXJlYXMgbGlrZVxuICogYmlsbGluZywgYWNjb3VudCBtYW5hZ2VtZW50LCBldGMuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGNsYXNzIEhhbmRvZmYge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sTmFtZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xEZXNjcmlwdGlvbjtcbiAgICAvKipcbiAgICAgKiBUaGUgSlNPTiBzY2hlbWEgZm9yIHRoZSBoYW5kb2ZmIGlucHV0LiBDYW4gYmUgZW1wdHkgaWYgdGhlIGhhbmRvZmYgZG9lcyBub3QgdGFrZSBhbiBpbnB1dFxuICAgICAqL1xuICAgIGlucHV0SnNvblNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICByZXF1aXJlZDogW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGlucHV0IEpTT04gc2NoZW1hIGlzIGluIHN0cmljdCBtb2RlLiBXZSAqKnN0cm9uZ2x5KiogcmVjb21tZW5kIHNldHRpbmcgdGhpcyB0b1xuICAgICAqIHRydWUsIGFzIGl0IGluY3JlYXNlcyB0aGUgbGlrZWxpaG9vZCBvZiBjb3JyZWN0IEpTT04gaW5wdXQuXG4gICAgICovXG4gICAgc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0aGUgaGFuZG9mZi4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIGFyZTpcbiAgICAgKiAxLiBUaGUgaGFuZG9mZiBydW4gY29udGV4dFxuICAgICAqIDIuIFRoZSBhcnVnbWVudHMgZnJvbSB0aGUgTExNLCBhcyBhIEpTT04gc3RyaW5nLiBFbXB0eSBzdHJpbmcgaWYgaW5wdXRKc29uU2NoZW1hIGlzIGVtcHR5LlxuICAgICAqXG4gICAgICogTXVzdCByZXR1cm4gYW4gYWdlbnRcbiAgICAgKi9cbiAgICBvbkludm9rZUhhbmRvZmY7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudE5hbWU7XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgdGhlIGlucHV0cyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIG5leHQgYWdlbnQuIEJ5IGRlZmF1bHQsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiBzZWVzIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHNvbWUgY2FzZXMsIHlvdSBtYXkgd2FudCB0byBmaWx0ZXIgaW5wdXRzIGUuZy4gdG9cbiAgICAgKiByZW1vdmUgb2xkZXIgaW5wdXRzLCBvciByZW1vdmUgdG9vbHMgZnJvbSBleGlzdGluZyBpbnB1dHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gd2lsbCByZWNlaXZlIHRoZSBlbnRpcmUgY29udmVyc2F0aW9uIGhpc3N0b3J5IHNvIGZhciwgaW5jbHVkaW5nIHRoZSBpbnB1dCBpdGVtXG4gICAgICogdGhhdCB0cmlnZ2VyZWQgdGhlIGhhbmRvZmYgYW5kIGEgdG9vbCBjYWxsIG91dHB1dCBpdGVtIHJlcHJlc2VudGluZyB0aGUgaGFuZG9mZiB0b29sJ3Mgb3V0cHV0LlxuICAgICAqXG4gICAgICogWW91IGFyZSBmcmVlIHRvIG1vZGlmeSB0aGUgaW5wdXQgaGlzdG9yeSBvciBuZXcgaXRlbXMgYXMgeW91IHNlZSBmaXQuIFRoZSBuZXh0IGFnZW50IHRoYXQgcnVuc1xuICAgICAqIHdpbGwgcmVjZWl2ZSBgaGFuZG9mZklucHV0RGF0YS5hbGxJdGVtc1xuICAgICAqL1xuICAgIGlucHV0RmlsdGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnQ7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvb2wgZGVmaW5pdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGludm9rZSB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICBnZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdGhpcy50b29sTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnRvb2xEZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRoaXMuaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICAgICAgc3RyaWN0OiB0aGlzLnN0cmljdEpzb25TY2hlbWEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwibGV0IERFRkFVTFRfUFJPVklERVI7XG4vKipcbiAqIFNldCB0aGUgbW9kZWwgcHJvdmlkZXIgdXNlZCB3aGVuIG5vIGV4cGxpY2l0IHByb3ZpZGVyIGlzIHN1cHBsaWVkLlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byB1c2UgYnkgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgREVGQVVMVF9QUk9WSURFUiA9IHByb3ZpZGVyO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICpcbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSB7XG4gICAgaWYgKHR5cGVvZiBERUZBVUxUX1BST1ZJREVSID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIgc2V0LiBNYWtlIHN1cmUgdG8gc2V0IGEgcHJvdmlkZXIgdXNpbmcgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgYmVmb3JlIGNhbGxpbmcgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgb3IgcGFzcyBhbiBleHBsaWNpdCBwcm92aWRlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIERFRkFVTFRfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlcnMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTaGFyZWQgYmFzZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVyeSBpdGVtIGluIHRoZSBwcm90b2NvbCBwcm92aWRlcyBhIGBwcm92aWRlckRhdGFgIGZpZWxkIHRvIGFjY29tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRGaWxlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfZmlsZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQ29udGVudHMgb2YgdGhlIGZpbGUgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgQXVkaW9Db250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXVkaW8gaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBhdWRpbzogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBmaWxlIGlkJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZvcm1hdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgZm9ybWF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbWFnZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGRhdGEuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGRhdGE6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbWVkaWEgdHlwZSBvZiB0aGUgaW1hZ2UuXG4gICAgICovXG4gICAgbWVkaWFUeXBlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdJQU5BIG1lZGlhIHR5cGUgb2YgdGhlIGltYWdlJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBJbnB1dFRleHQsXG4gICAgQXVkaW9Db250ZW50LFxuICAgIEltYWdlQ29udGVudCxcbl0pO1xuY29uc3QgTWVzc2FnZUJhc2UgPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFueSBpdGVtIHdpdGhvdXQgYSB0eXBlIGlzIHRyZWF0ZWQgYXMgYSBtZXNzYWdlXG4gICAgICovXG4gICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFzc2lzdGFudE1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIGFzc2lzdGFudCAoaS5lLiB0aGUgbW9kZWwpXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShBc3Npc3RhbnRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzZXJDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuICAgIEF1ZGlvQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFVzZXJNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShVc2VyQ29udGVudCkub3Ioei5zdHJpbmcoKSksXG59KTtcbmNvbnN0IFN5c3RlbU1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBzeXN0ZW0gbWVzc2FnZSB0byB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUb29sIGNhbGwgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBIb3N0ZWRUb29sQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbC4gRm9yIGV4YW1wbGUgYHdlYl9zZWFyY2hfY2FsbGAgb3IgYGZpbGVfc2VhcmNoX2NhbGxgXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbCcpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcHJpbWFyeSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC4gQWRkaXRpb25hbCBvdXRwdXQgbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtUb29sT3V0cHV0VGV4dCwgVG9vbE91dHB1dEltYWdlXSksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNwZWNpYWwgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlYXNvbmluZ0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZycpLFxuICAgIC8qKlxuICAgICAqIFRoZSB1c2VyIGZhY2luZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVhc29uaW5nLiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KElucHV0VGV4dCksXG59KTtcbi8qKlxuICogVGhpcyBpcyBhIGNhdGNoIGFsbCBmb3IgaXRlbXMgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICpcbiAqIEZvciBleGFtcGxlLCBhIG1vZGVsIG1pZ2h0IHJldHVybiBhbiBpdGVtIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sIHVzaW5nIHRoaXMgdHlwZS5cbiAqXG4gKiBJbiB0aGF0IGNhc2UgZXZlcnl0aGluZyByZXR1cm5lZCBmcm9tIHRoZSBtb2RlbCBzaG91bGQgYmUgcGFzc2VkIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAqXG4gKiBUaGlzIGVuYWJsZXMgbmV3IGZlYXR1cmVzIHRvIGJlIGFkZGVkIHRvIGJlIGFkZGVkIGJ5IGEgbW9kZWwgcHJvdmlkZXIgd2l0aG91dCBicmVha2luZyB0aGUgcHJvdG9jb2wuXG4gKi9cbmV4cG9ydCBjb25zdCBVbmtub3duSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd1bmtub3duJyksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpvaW5lZCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgT3V0cHV0TW9kZWxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG5leHBvcnQgY29uc3QgTW9kZWxJdGVtID0gei51bmlvbihbXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICBDb21wdXRlckNhbGxSZXN1bHRJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE1ldGEgZGF0YSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFVzYWdlRGF0YSA9IHoub2JqZWN0KHtcbiAgICByZXF1ZXN0czogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RyZWFtIGV2ZW50IHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIG5ldyBvdXRwdXQgdGV4dCBpcyBhdmFpbGFibGUgdG8gc3RyZWFtIHRvIHRoZSB1c2VyLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRUZXh0U3RyZWFtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHRfZGVsdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZGVsdGEgdGV4dCB0aGF0IHdhcyBzdHJlYW1lZCBieSB0aGUgbW9kZWx0byB0aGUgdXNlci5cbiAgICAgKi9cbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIG5ldyByZXNwb25zZSBpcyBzdGFydGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9zdGFydGVkJyksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSByZXNwb25zZSBpcyBjb21wbGV0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2VfZG9uZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXNwb25zZSBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByZXNwb25zZTogU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHVzYWdlIGRhdGEgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIHVzYWdlOiBVc2FnZURhdGEsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0OiB6LmFycmF5KE91dHB1dE1vZGVsSXRlbSksXG4gICAgfSksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgZm9yIGV2ZXJ5IGl0ZW0gdGhhdCBnZXRzIHN0cmVhbWVkIHRvIHRoZSBtb2RlbC4gVXNlZCB0byBleHBvc2UgdGhlIHJhdyBldmVudHNcbiAqIGZyb20gdGhlIG1vZGVsLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21vZGVsJyksXG4gICAgZXZlbnQ6IHouYW55KCkuZGVzY3JpYmUoJ1RoZSBldmVudCBmcm9tIHRoZSBtb2RlbCcpLFxufSk7XG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBTdHJlYW1FdmVudFRleHRTdHJlYW0sXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCxcbiAgICBTdHJlYW1FdmVudEdlbmVyaWNJdGVtLFxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm90b2NvbC5tanMubWFwIiwiaW1wb3J0IHsgVXNhZ2VEYXRhIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIFRyYWNrcyB0b2tlbiB1c2FnZSBhbmQgcmVxdWVzdCBjb3VudHMgZm9yIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHJlcXVlc3RzIG1hZGUgdG8gdGhlIExMTSBBUEkuXG4gICAgICovXG4gICAgcmVxdWVzdHM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYW5kIHJlY2VpdmVkLCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gaW5wdXQ/LnJlcXVlc3RzID8/IDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSBpbnB1dD8udG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgID8gW2lucHV0LmlucHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICA/IFtpbnB1dC5vdXRwdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkKG5ld1VzYWdlKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdHMgKz0gbmV3VXNhZ2UucmVxdWVzdHM7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKz0gbmV3VXNhZ2UuaW5wdXRUb2tlbnM7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zICs9IG5ld1VzYWdlLm91dHB1dFRva2VucztcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyArPSBuZXdVc2FnZS50b3RhbFRva2VucztcbiAgICAgICAgaWYgKG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVXNhZ2VEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2FnZS5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuLyoqXG4gKiBBIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Db250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGV4dCBvYmplY3QgcGFzc2VkIGJ5IHlvdSB0byB0aGUgYFJ1bm5lci5ydW4oKWBcbiAgICAgKi9cbiAgICBjb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBvZiB0aGUgYWdlbnQgcnVuIHNvIGZhci4gRm9yIHN0cmVhbWVkIHJlc3BvbnNlcywgdGhlIHVzYWdlIHdpbGwgYmUgc3RhbGUgdW50aWwgdGhlXG4gICAgICogbGFzdCBjaHVuayBvZiB0aGUgc3RyZWFtIGlzIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICB1c2FnZTtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0b29sIG5hbWVzIHRvIHdoZXRoZXIgdGhleSBoYXZlIGJlZW4gYXBwcm92ZWQuXG4gICAgICovXG4gICAgI2FwcHJvdmFscztcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0ID0ge30pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy51c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYnVpbGQgdGhlIGFwcHJvdmFscyBtYXAgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gcmVidWlsZC5cbiAgICAgKi9cbiAgICBfcmVidWlsZEFwcHJvdmFscyhhcHByb3ZhbHMpIHtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKHsgdG9vbE5hbWUsIGNhbGxJZCB9KSB7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzQXBwcm92ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LnJlamVjdGVkKSkge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gdG9vbCBoYXMgY2FsbF9pZCwgaG9zdGVkIHRvb2wgY2FsbCBoYXMgaWRcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIGFwcHJvdmFsSXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgPyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5jYWxsSWQgLy8gZnVuY3Rpb24gdG9vbHNcbiAgICAgICAgICAgICAgICA6IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmlkOyAvLyBob3N0ZWQgdG9vbHNcbiAgICAgICAgICAgIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQucHVzaChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGFwcHJvdmFsRW50cnkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICB1c2FnZTogdGhpcy51c2FnZSxcbiAgICAgICAgICAgIGFwcHJvdmFsczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuI2FwcHJvdmFscy5lbnRyaWVzKCkpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkNvbnRleHQubWpzLm1hcCIsImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtIGFzIF9SZWFkYWJsZVN0cmVhbSwgVHJhbnNmb3JtU3RyZWFtLCBSZWFkYWJsZSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuY2xhc3MgUnVuUmVzdWx0QmFzZSB7XG4gICAgc3RhdGU7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nXG4gICAgICogdGhlIGFnZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5pbnB1dCwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGVzZSBpbmNsdWRlIHRoaW5ncyBsaWtlIG5ldyBtZXNzYWdlcywgdG9vbFxuICAgICAqIGNhbGxzIGFuZCB0aGVpciBvdXRwdXRzLCBldGMuXG4gICAgICpcbiAgICAgKiBJdCBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhZ2VudHMgYW5kIGluc3RlYWQgcmVwcmVzZW50cyB0aGUgbW9kZWwgZGF0YS5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgb3V0cHV0IGluY2x1ZGluZyB0aGUgYWdlbnRzLCB1c2UgdGhlIGBuZXdJdGVtc2AgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dChbXSwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgY29weSBvZiB0aGUgb3JpZ2luYWwgaW5wdXQgaXRlbXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3JpZ2luYWxJbnB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJ1biBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoaXMgYXNzb2NpYXRlcyB0aGUgbW9kZWwgZGF0YSB3aXRoIHRoZSBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG1vZGVsIGRhdGEgdGhhdCBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1biwgdXNlIHRoZSBgb3V0cHV0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgbmV3SXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9nZW5lcmF0ZWRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJhdyBMTE0gcmVzcG9uc2VzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IHJhd1Jlc3BvbnNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX21vZGVsUmVzcG9uc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCByZXNwb25zZSBJRCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBsYXN0UmVzcG9uc2VJZCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gdGhpcy5yYXdSZXNwb25zZXM7XG4gICAgICAgIHJldHVybiByZXNwb25zZXMgJiYgcmVzcG9uc2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXS5yZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgYWdlbnQgdGhhdCB3YXMgcnVuXG4gICAgICovXG4gICAgZ2V0IGxhc3RBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbnkgaW50ZXJydXB0aW9ucyB0aGF0IG9jY3VycmVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIGZvciBleGFtcGxlIGZvciB0b29sIGFwcHJvdmFscy5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC4gSWYgdGhlIG91dHB1dCB0eXBlIHdhcyBzZXQgdG8gYW55dGhpbmcgb3RoZXIgdGhhbiBgdGV4dGAsXG4gICAgICogdGhpcyB3aWxsIGJlIHBhcnNlZCBlaXRoZXIgYXMgSlNPTiBvciB1c2luZyB0aGUgWm9kIHNjaGVtYSB5b3UgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZ2V0IGZpbmFsT3V0cHV0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2FybignQWNjZXNzZWQgZmluYWxPdXRwdXQgYmVmb3JlIGFnZW50IHJ1biBpcyBjb21wbGV0ZWQuJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuIGluIHN0cmVhbWluZyBtb2RlLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtZWRSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCB0aGF0IGlzIHJ1bm5pbmdcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHR1cm4gbnVtYmVyXG4gICAgICovXG4gICAgY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0dXJucyB0aGF0IGNhbiBiZSBydW5cbiAgICAgKi9cbiAgICBtYXhUdXJucztcbiAgICAjZXJyb3IgPSBudWxsO1xuICAgICNzaWduYWw7XG4gICAgI3JlYWRhYmxlQ29udHJvbGxlcjtcbiAgICAjcmVhZGFibGVTdHJlYW07XG4gICAgI2NvbXBsZXRlZFByb21pc2U7XG4gICAgI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVqZWN0O1xuICAgICNjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQgPSB7fSkge1xuICAgICAgICBzdXBlcihyZXN1bHQuc3RhdGUpO1xuICAgICAgICB0aGlzLiNzaWduYWwgPSByZXN1bHQuc2lnbmFsO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcmVhZGFibGVTdHJlYW0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZWFkYWJsZVN0cmVhbSA9IG5ldyBfUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQ6IChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoZSBzdHJlYW0gb2Ygb3V0cHV0IGl0ZW1zXG4gICAgICovXG4gICAgX2FkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXI/LmVucXVldWUoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBfZG9uZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEhhbmRsZXMgYW4gZXJyb3IgaW4gdGhlIHN0cmVhbSBsb29wLlxuICAgICAqL1xuICAgIF9yYWlzZUVycm9yKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkICYmIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3Q/LihlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmVhbSBoYXMgYmVlbiBjYW5jZWxsZWQuXG4gICAgICovXG4gICAgZ2V0IGNhbmNlbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NhbmNlbGxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyByZWFkYWJsZSBzdHJlYW0uXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gb2YgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICB0b1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlYWRhYmxlU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBd2FpdCB0aGlzIHByb21pc2UgdG8gZW5zdXJlIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWQgaWYgeW91IGFyZSBub3QgY29uc3VtaW5nIHRoZVxuICAgICAqIHN0cmVhbSBkaXJlY3RseS5cbiAgICAgKi9cbiAgICBnZXQgY29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29tcGxldGVkUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXJyb3IgdGhyb3duIGR1cmluZyB0aGUgcnVuLCBpZiBhbnkuXG4gICAgICovXG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIHRvVGV4dFN0cmVhbShvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy4jcmVhZGFibGVTdHJlYW0ucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgICB0cmFuc2Zvcm0oZXZlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSA9PT0gJ291dHB1dF90ZXh0X2RlbHRhJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gU3RyZWFtRXZlbnRUZXh0U3RyZWFtLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoaXRlbS5kZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5jb21wYXRpYmxlV2l0aE5vZGVTdHJlYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhZGFibGUuZnJvbVdlYihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVUb29sKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBzdHJpY3Q6IHRvb2wuc3RyaWN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIEV4dHJhY3QgYWxsIHRleHQgb3V0cHV0IGZyb20gYSBsaXN0IG9mIHJ1biBpdGVtcyBieSBjb25jYXRlbmF0aW5nIHRoZSBjb250ZW50IG9mIGFsbFxuICogbWVzc2FnZSBvdXRwdXQgaXRlbXMuXG4gKlxuICogQHBhcmFtIGl0ZW1zIC0gVGhlIGxpc3Qgb2YgcnVuIGl0ZW1zIHRvIGV4dHJhY3QgdGV4dCBmcm9tLlxuICogQHJldHVybnMgQSBzdHJpbmcgb2YgYWxsIHRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBydW4gaXRlbXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0QWxsVGV4dE91dHB1dChpdGVtcykge1xuICAgIHJldHVybiBpdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09ICdtZXNzYWdlX291dHB1dF9pdGVtJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5jb250ZW50KVxuICAgICAgICAuam9pbignJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRNZXNzYWdlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXRNZXNzYWdlKSB7XG4gICAgaWYgKG91dHB1dE1lc3NhZ2UudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXRNZXNzYWdlLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJdGVtID0gb3V0cHV0TWVzc2FnZS5jb250ZW50W291dHB1dE1lc3NhZ2UuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEl0ZW0udHlwZSAhPT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEl0ZW0udGV4dDtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0cHV0VGV4dChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0Lm91dHB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gKGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0Lm91dHB1dFtvdXRwdXQub3V0cHV0Lmxlbmd0aCAtIDFdKSB8fCAnJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlcy5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1bkl0ZW1TdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NNb2RlbFJlc3BvbnNlKG1vZGVsUmVzcG9uc2UsIGFnZW50LCB0b29scywgaGFuZG9mZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkhhbmRvZmZzID0gW107XG4gICAgY29uc3QgcnVuRnVuY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuQ29tcHV0ZXJBY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyA9IFtdO1xuICAgIGNvbnN0IHRvb2xzVXNlZCA9IFtdO1xuICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGhhbmRvZmZzLm1hcCgoaCkgPT4gW2gudG9vbE5hbWUsIGhdKSk7XG4gICAgY29uc3QgZnVuY3Rpb25NYXAgPSBuZXcgTWFwKHRvb2xzLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnZnVuY3Rpb24nKS5tYXAoKHQpID0+IFt0Lm5hbWUsIHRdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBjb25zdCBtY3BUb29sTWFwID0gbmV3IE1hcCh0b29sc1xuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3AnKVxuICAgICAgICAubWFwKCh0KSA9PiB0KVxuICAgICAgICAubWFwKCh0KSA9PiBbdC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLCB0XSkpO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0LnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IG91dHB1dC5uYW1lO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2godG9vbE5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcgfHxcbiAgICAgICAgICAgICAgICBvdXRwdXQubmFtZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jykge1xuICAgICAgICAgICAgICAgIC8vIEhvc3RlZCByZW1vdGUgTUNQIHNlcnZlcidzIGFwcHJvdmFsIHByb2Nlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1jcFNlcnZlckxhYmVsID0gcHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbDtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJUb29sID0gbWNwVG9vbE1hcC5nZXQobWNwU2VydmVyTGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWNwU2VydmVyVG9vbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNQ1Agc2VydmVyICgke21jcFNlcnZlckxhYmVsfSkgbm90IGZvdW5kIGluIEFnZW50ICgke2FnZW50Lm5hbWV9KWA7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtY3Bfc2VydmVyX2xhYmVsOiBtY3BTZXJ2ZXJMYWJlbCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRG8gdGhpcyBhcHByb3ZhbCBsYXRlcjpcbiAgICAgICAgICAgICAgICAvLyBXZSBzdXBwb3J0IGJvdGggb25BcHByb3ZhbCBjYWxsYmFjayAobGlrZSB0aGUgUHl0aG9uIFNESyBkb2VzKSBhbmQgSElUTCBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1c2UgdGhpcyBuYW1lIHRvIGFsaWduIHdpdGggdGhlIG5hbWUgc2VudCBmcm9tIHRoZSBzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3ZpZGVyRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZDogcHJvdmlkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCk7XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEl0ZW06IGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgICAgICAgICAgbWNwVG9vbDogbWNwU2VydmVyVG9vbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1jcFNlcnZlclRvb2wucHJvdmlkZXJEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gb25BcHByb3ZhbCBmdW5jdGlvbiBleGlzdHMsIGl0IGNvbmZpcm1zIHRoZSBhcHByb3ZhbCByaWdodCBhZnRlciB0aGlzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaHVzLCB0aGlzIGFwcHJvdmFsIGl0ZW0gbXVzdCBiZSBhcHBlbmRlZCBvbmx5IGZvciB0aGUgbmV4dCB0dXJuIGludGVycnB1dGlvbiBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ3JlYXNvbmluZycpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blJlYXNvbmluZ0l0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY29tcHV0ZXJfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnY29tcHV0ZXJfdXNlJyk7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5Db21wdXRlckFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KG91dHB1dC5uYW1lKTtcbiAgICAgICAgaWYgKGhhbmRvZmYpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBydW5IYW5kb2Zmcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmYsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgICAgICBpZiAoIWZ1bmN0aW9uVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHtvdXRwdXQubmFtZX0gbm90IGZvdW5kIGluIGFnZW50ICR7YWdlbnQubmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuRnVuY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogZnVuY3Rpb25Ub29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV3SXRlbXM6IGl0ZW1zLFxuICAgICAgICBoYW5kb2ZmczogcnVuSGFuZG9mZnMsXG4gICAgICAgIGZ1bmN0aW9uczogcnVuRnVuY3Rpb25zLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHJ1bkNvbXB1dGVyQWN0aW9ucyxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyxcbiAgICAgICAgdG9vbHNVc2VkOiB0b29sc1VzZWQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbmV4dFN0ZXBTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX2hhbmRvZmYnKSxcbiAgICAgICAgbmV3QWdlbnQ6IHouYW55KCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfcnVuX2FnYWluJyksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG5dKTtcbmNsYXNzIFNpbmdsZVN0ZXBSZXN1bHQge1xuICAgIG9yaWdpbmFsSW5wdXQ7XG4gICAgbW9kZWxSZXNwb25zZTtcbiAgICBwcmVTdGVwSXRlbXM7XG4gICAgbmV3U3RlcEl0ZW1zO1xuICAgIG5leHRTdGVwO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBpdGVtcyBpLmUuIHRoZSBpdGVtcyBiZWZvcmUgcnVuKCkgd2FzIGNhbGxlZC4gTWF5IGJlIG11dGVkIGJ5IGhhbmRvZmYgaW5wdXQgZmlsdGVyc1xuICAgICAqL1xuICAgIG9yaWdpbmFsSW5wdXQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAqL1xuICAgIG1vZGVsUmVzcG9uc2UsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwcmVTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIG5ld1N0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIG5leHQgc3RlcCB0byBleGVjdXRlXG4gICAgICovXG4gICAgbmV4dFN0ZXApIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbElucHV0ID0gb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgdGhpcy5tb2RlbFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZTtcbiAgICAgICAgdGhpcy5wcmVTdGVwSXRlbXMgPSBwcmVTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV3U3RlcEl0ZW1zID0gbmV3U3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5leHRTdGVwID0gbmV4dFN0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gKGkuZS4gZXZlcnl0aGluZyBnZW5lcmF0ZWQgYWZ0ZXIgb3JpZ2luYWxJbnB1dClcbiAgICAgKi9cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxsSWRzLmluY2x1ZGVzKHJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gQ3JlYXRlIHRoZSBpbml0aWFsIHNldCBvZiB0aGUgb3V0cHV0IGl0ZW1zXG4gICAgY29uc3QgbmV3SXRlbXMgPSBmdW5jdGlvblJlc3VsdHMubWFwKChyKSA9PiByLnJ1bkl0ZW0pO1xuICAgIC8vIFJ1biBNQ1AgdG9vbHMgdGhhdCByZXF1aXJlIGFwcHJvdmFsIGFmdGVyIHRoZXkgZ2V0IHRoZWlyIGFwcHJvdmFsIHJlc3VsdHNcbiAgICBjb25zdCBtY3BBcHByb3ZhbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmZpbHRlcigocnVuKSA9PiB7XG4gICAgICAgIHJldHVybiAocnVuLnJlcXVlc3RJdGVtLnR5cGUgPT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcgJiZcbiAgICAgICAgICAgIHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLnByb3ZpZGVyRGF0YT8udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jyk7XG4gICAgfSk7XG4gICAgZm9yIChjb25zdCBydW4gb2YgbWNwQXBwcm92YWxSdW5zKSB7XG4gICAgICAgIC8vIHRoZSBhcHByb3ZhbF9yZXF1ZXN0X2lkIFwibWNwcl8xMjMuLi5cIlxuICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLmlkO1xuICAgICAgICBjb25zdCBhcHByb3ZlZCA9IHN0YXRlLl9jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXRlbSBuYW1lIG11c3QgYmUgdGhlIHNhbWUgd2l0aCB0aGUgb25lIHNlbnQgZnJvbSBSZXNwb25zZXMgQVBJIHNlcnZlclxuICAgICAgICAgICAgdG9vbE5hbWU6IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHByb3ZlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUZWxsIFJlc3BvbnNlcyBBUEkgc2VydmVyIHRoZSBhcHByb3ZhbCByZXN1bHQgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgbmV3SXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGVja1Rvb2xPdXRwdXQgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICAvLyBFeGNsdWRlIHRoZSB0b29sIGFwcHJvdmFsIGl0ZW1zLCB3aGljaCBzaG91bGQgbm90IGJlIHNlbnQgdG8gUmVzcG9uc2VzIEFQSSxcbiAgICAvLyBmcm9tIHRoZSBTaW5nbGVTdGVwUmVzdWx0J3MgcHJlU3RlcEl0ZW1zXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiAhKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKTtcbiAgICB9KTtcbiAgICBpZiAoY2hlY2tUb29sT3V0cHV0LmlzRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNJbnRlcnJ1cHRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zOiBjaGVja1Rvb2xPdXRwdXQuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB3ZSBvbmx5IHJhbiBuZXcgdG9vbHMgYW5kIHNpZGUgZWZmZWN0cy4gV2UgbmVlZCB0byBydW4gdGhlIHJlc3Qgb2YgdGhlIGFnZW50XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zO1xuICAgIGxldCBuZXdJdGVtcyA9IHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zO1xuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICBdKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChmdW5jdGlvblJlc3VsdHMubWFwKChyKSA9PiByLnJ1bkl0ZW0pKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChjb21wdXRlclJlc3VsdHMpO1xuICAgIC8vIHJ1biBob3N0ZWQgTUNQIGFwcHJvdmFsIHJlcXVlc3RzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFwcHJvdmFsUmVxdWVzdCBvZiBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBjb25zdCB0b29sRGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICAucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgaWYgKHRvb2xEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgLy8gc3luY2hyb25vdXNseSBoYW5kbGUgdGhlIGFwcHJvdmFsIHByb2Nlc3MgaGVyZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzdWx0ID0gYXdhaXQgdG9vbERhdGEub25fYXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXNwb25zZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsUmVzdWx0LmFwcHJvdmUsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHJlcXVlc3REYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IGFwcHJvdmFsUmVzdWx0LnJlYXNvbixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogYXBwcm92YWxSZXNwb25zZURhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHJlY2VpdmUgYSB1c2VyJ3MgYXBwcm92YWwgb24gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfbWNwX3Rvb2xfYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcmVxdWVzdERhdGEuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiByZXF1ZXN0RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25SZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICAvLyBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsSXRlbS5ydW5JdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm9jZXNzIGhhbmRvZmZzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2ZmcywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrVG9vbE91dHB1dCA9IGF3YWl0IGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIGZ1bmN0aW9uUmVzdWx0cywgc3RhdGUpO1xuICAgIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNGaW5hbE91dHB1dCkge1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICBvdXRwdXQ6IGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IGNoZWNrVG9vbE91dHB1dC5pbnRlcnJ1cHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNoZWNrIGlmIHRoZSBhZ2VudCBwcm9kdWNlZCBhbnkgbWVzc2FnZXNcbiAgICBjb25zdCBtZXNzYWdlSXRlbXMgPSBuZXdJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSk7XG4gICAgLy8gd2Ugd2lsbCB1c2UgdGhlIGxhc3QgY29udGVudCBvdXRwdXQgYXMgdGhlIGZpbmFsIG91dHB1dFxuICAgIGNvbnN0IHBvdGVudGlhbEZpbmFsT3V0cHV0ID0gbWVzc2FnZUl0ZW1zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG1lc3NhZ2VJdGVtc1ttZXNzYWdlSXRlbXMubGVuZ3RoIC0gMV0ucmF3SXRlbSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gb3V0cHV0IHdlIGp1c3QgcnVuIGFnYWluXG4gICAgaWYgKCFwb3RlbnRpYWxGaW5hbE91dHB1dCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSA9PT0gJ3RleHQnICYmXG4gICAgICAgICFwcm9jZXNzZWRSZXNwb25zZS5oYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChhZ2VudC5vdXRwdXRUeXBlICE9PSAndGV4dCcgJiYgcG90ZW50aWFsRmluYWxPdXRwdXQpIHtcbiAgICAgICAgLy8gU3RydWN0dXJlZCBvdXRwdXQgc2NoZW1hID0+IGFsd2F5cyBsZWFkcyB0byBhIGZpbmFsIG91dHB1dCBpZiB3ZSBoYXZlIHRleHRcbiAgICAgICAgY29uc3QgeyBwYXJzZXIgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoYWdlbnQub3V0cHV0VHlwZSwgJ2ZpbmFsX291dHB1dCcpO1xuICAgICAgICBjb25zdCBbZXJyb3JdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKHBvdGVudGlhbEZpbmFsT3V0cHV0KSk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvdXRwdXQgdHlwZScsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIG91dHB1dCB0eXBlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jywgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbENhbGwsIG91dHB1dCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRleHQ6IHRvU21hcnRTdHJpbmcob3V0cHV0KSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgdG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5TaW5nbGVUb29sKHRvb2xSdW4pIHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IGF3YWl0IHRvb2xSdW4udG9vbC5uZWVkc0FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBwYXJzZWRBcmdzLCB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHN0YXRlLl9jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlamVjdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBUb29sIGV4ZWN1dGlvbiBmb3IgJHt0b29sUnVuLnRvb2xDYWxsLmNhbGxJZH0gd2FzIG1hbnVhbGx5IHJlamVjdGVkIGJ5IHVzZXIuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgcmVzcG9uc2UpLCBhZ2VudCwgcmVzcG9uc2UpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFwcHJvdmFsIHByb2Nlc3MgbmVlZHMgdG8gYmUgZG9uZSBpbiB0aGUgbmV4dCB0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sUnVuLnRvb2xDYWxsLCBhZ2VudCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEuaW5wdXQgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sUnVuLnRvb2wuaW52b2tlKHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBkYXRhIGZvciB0cmFjaW5nIGFuZCBldmVudCBlbWl0dGVyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3VsdCksIGFnZW50LCByZXN1bHQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0b29sUnVucy5tYXAocnVuU2luZ2xlVG9vbCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRvb2xDYWxsRXJyb3IoYEZhaWxlZCB0byBydW4gZnVuY3Rpb24gdG9vbHM6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gSW50ZXJuYWwgaGVscGVyOiBkaXNwYXRjaCBhIGNvbXB1dGVyIGFjdGlvbiBhbmQgcmV0dXJuIGEgc2NyZWVuc2hvdCAoc3luYy9hc3luYylcbmFzeW5jIGZ1bmN0aW9uIF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdG9vbENhbGwuYWN0aW9uO1xuICAgIGxldCBzY3JlZW5zaG90O1xuICAgIC8vIERpc3BhdGNoIGJhc2VkIG9uIGFjdGlvbiB0eXBlIHN0cmluZyAoYXNzdW1lIGFjdGlvbi50eXBlIGV4aXN0cylcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLmJ1dHRvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG91YmxlX2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRvdWJsZUNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZHJhZyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kcmFnKGFjdGlvbi5wYXRoLm1hcCgocCkgPT4gW3AueCwgcC55XSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2tleXByZXNzJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmtleXByZXNzKGFjdGlvbi5rZXlzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3ZlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLm1vdmUoYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JlZW5zaG90JzpcbiAgICAgICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nyb2xsJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnNjcm9sbChhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5zY3JvbGxfeCwgYWN0aW9uLnNjcm9sbF95KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnR5cGUoYWN0aW9uLnRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXQnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIud2FpdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhY3Rpb247IC8vIGVuc3VyZXMgdGhhdCB3ZSBoYW5kbGUgZXZlcnkgYWN0aW9uIHdlIGtub3cgb2ZcbiAgICAgICAgICAgIC8vIFVua25vd24gYWN0aW9uLCBqdXN0IHRha2Ugc2NyZWVuc2hvdFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgfVxuICAgIC8vIEFsd2F5cyByZXR1cm4gc2NyZWVuc2hvdCBhcyBiYXNlNjQgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBjb21wdXRlci5zY3JlZW5zaG90ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ29tcHV0ZXIgZG9lcyBub3QgaW1wbGVtZW50IHNjcmVlbnNob3QoKScpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29tcHV0ZXIgPSBhY3Rpb24uY29tcHV0ZXIuY29tcHV0ZXI7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICAvLyBIb29rczogb25fdG9vbF9zdGFydCAoZ2xvYmFsICsgYWdlbnQpXG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUnVuIHRoZSBhY3Rpb24gYW5kIGdldCBzY3JlZW5zaG90XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgY29tcHV0ZXIgYWN0aW9uOicsIGVycik7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBIb29rczogb25fdG9vbF9lbmQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCBvdXRwdXQsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmV0dXJuIGEgc2NyZWVuc2hvdCBhcyBhIGJhc2U2NCBkYXRhIFVSTFxuICAgICAgICBjb25zdCBpbWFnZVVybCA9IG91dHB1dCA/IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtvdXRwdXR9YCA6ICcnO1xuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiB7IHR5cGU6ICdjb21wdXRlcl9zY3JlZW5zaG90JywgZGF0YTogaW1hZ2VVcmwgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIGltYWdlVXJsKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcnVuSGFuZG9mZnMsIHJ1bm5lciwgcnVuQ29udGV4dCkge1xuICAgIG5ld1N0ZXBJdGVtcyA9IFsuLi5uZXdTdGVwSXRlbXNdO1xuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luY29ycmVjdGx5IGNhbGxlZCBleGVjdXRlSGFuZG9mZkNhbGxzIHdpdGggbm8gaGFuZG9mZnMuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4uIE1vdmluZyBvbi4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGhhbmRvZmZzLiBJZ25vcmluZyBhbGwgYnV0IHRoZSBmaXJzdCBvbmUgYnkgYWRkaW5nIHJlamVjdCByZXNwb25zZXMgZm9yIHRob3NlXG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2UgPSAnTXVsdGlwbGUgaGFuZG9mZnMgZGV0ZWN0ZWQsIGlnbm9ybmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGlucHV0RmlsdGVyKGhhbmRvZmZJbnB1dERhdGEpO1xuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dCA9IGZpbHRlcmVkLmlucHV0SGlzdG9yeTtcbiAgICAgICAgICAgIHByZVN0ZXBJdGVtcyA9IGZpbHRlcmVkLnByZUhhbmRvZmZJdGVtcztcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcyA9IGZpbHRlcmVkLm5ld0l0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJywgbmV3QWdlbnQgfSk7XG4gICAgfSwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBmcm9tX2FnZW50OiBhZ2VudC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuY29uc3QgTk9UX0ZJTkFMX09VVFBVVCA9IHtcbiAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIHRvb2xSZXN1bHRzLCBzdGF0ZSkge1xuICAgIGlmICh0b29sUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSB0b29sUmVzdWx0c1xuICAgICAgICAuZmlsdGVyKChyKSA9PiByLnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKVxuICAgICAgICAubWFwKChyKSA9PiByLnJ1bkl0ZW0pO1xuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgc3RlcCkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdGVwLm5ld1N0ZXBJdGVtcykge1xuICAgICAgICBsZXQgaXRlbU5hbWU7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuTWVzc2FnZU91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZk91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3Rvb2xfY2FsbGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxPdXRwdXRJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX291dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blJlYXNvbmluZ0l0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVW5rbm93biBpdGVtIHR5cGU6ICcsIGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWdlbnRUb29sVXNlVHJhY2tlciB7XG4gICAgI2FnZW50VG9Ub29scyA9IG5ldyBNYXAoKTtcbiAgICBhZGRUb29sVXNlKGFnZW50LCB0b29sTmFtZXMpIHtcbiAgICAgICAgdGhpcy4jYWdlbnRUb1Rvb2xzLnNldChhZ2VudCwgdG9vbE5hbWVzKTtcbiAgICB9XG4gICAgaGFzVXNlZFRvb2xzKGFnZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhZ2VudFRvVG9vbHMuaGFzKGFnZW50KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKEFycmF5LmZyb20odGhpcy4jYWdlbnRUb1Rvb2xzLmVudHJpZXMoKSkubWFwKChbYWdlbnQsIHRvb2xOYW1lc10pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbYWdlbnQubmFtZSwgdG9vbE5hbWVzXTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkltcGxlbWVudGF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgQWdlbnRUb29sVXNlVHJhY2tlciwgbmV4dFN0ZXBTY2hlbWEsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1FcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG4vKipcbiAqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgc2VyaWFsaXplZCBydW4gc3RhdGUuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgc2VyaWFsaXplZFxuICogcnVuIHN0YXRlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBTREsuXG4gKiBJZiBhbnl0aGluZyBpbiB0aGlzIHNjaGVtYSBjaGFuZ2VzLCB0aGUgdmVyc2lvbiB3aWxsIGhhdmUgdG8gYmUgaW5jcmVtZW50ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OID0gJzEuMCc7XG5jb25zdCAkc2NoZW1hVmVyc2lvbiA9IHoubGl0ZXJhbChDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKTtcbmNvbnN0IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkU3BhbkJhc2UgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlLnNwYW4nKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB0cmFjZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJlbnRfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZW5kZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlcnJvcjogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzcGFuX2RhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBTZXJpYWxpemVkU3BhbiA9IHNlcmlhbGl6ZWRTcGFuQmFzZS5leHRlbmQoe1xuICAgIHByZXZpb3VzX3NwYW46IHoubGF6eSgoKSA9PiBTZXJpYWxpemVkU3Bhbikub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgdXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxufSk7XG5jb25zdCBtb2RlbFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICBvdXRwdXQ6IHouYXJyYXkocHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtKSxcbiAgICByZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBpdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlRvb2xDYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5SZWFzb25pbmdJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIHNvdXJjZUFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRhcmdldEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfYXBwcm92YWxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG5dKTtcbmNvbnN0IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2UnKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB3b3JrZmxvd19uYW1lOiB6LnN0cmluZygpLFxuICAgIGdyb3VwX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmV3SXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgdG9vbHNVc2VkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIGhhbmRvZmZzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGhhbmRvZmY6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGZ1bmN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICB0b29sOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBjb21wdXRlckFjdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgY29tcHV0ZXI6IHouYW55KCksXG4gICAgfSkpLFxuICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgcmVxdWVzdEl0ZW06IHoub2JqZWN0KHtcbiAgICAgICAgICAgIC8vIHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbVxuICAgICAgICAgICAgcmF3SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIEhvc3RlZE1DUFRvb2xcbiAgICAgICAgbWNwVG9vbDogei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbCcpLFxuICAgICAgICAgICAgbmFtZTogei5saXRlcmFsKCdob3N0ZWRfbWNwJyksXG4gICAgICAgICAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICB9KSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHRyaXB3aXJlVHJpZ2dlcmVkOiB6LmJvb2xlYW4oKSxcbiAgICBvdXRwdXRJbmZvOiB6LmFueSgpLFxufSk7XG5jb25zdCBpbnB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBndWFyZHJhaWw6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIG91dHB1dDogZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEsXG59KTtcbmNvbnN0IG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBndWFyZHJhaWw6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBhZ2VudE91dHB1dDogei5hbnkoKSxcbiAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG91dHB1dDogZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBTZXJpYWxpemVkUnVuU3RhdGUgPSB6Lm9iamVjdCh7XG4gICAgJHNjaGVtYVZlcnNpb24sXG4gICAgY3VycmVudFR1cm46IHoubnVtYmVyKCksXG4gICAgY3VycmVudEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3JpZ2luYWxJbnB1dDogei5zdHJpbmcoKS5vcih6LmFycmF5KHByb3RvY29sLk1vZGVsSXRlbSkpLFxuICAgIG1vZGVsUmVzcG9uc2VzOiB6LmFycmF5KG1vZGVsUmVzcG9uc2VTY2hlbWEpLFxuICAgIGNvbnRleHQ6IHoub2JqZWN0KHtcbiAgICAgICAgdXNhZ2U6IHVzYWdlU2NoZW1hLFxuICAgICAgICBhcHByb3ZhbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoub2JqZWN0KHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9yKHouYm9vbGVhbigpKSxcbiAgICAgICAgICAgIHJlamVjdGVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9yKHouYm9vbGVhbigpKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBjb250ZXh0OiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICB9KSxcbiAgICB0b29sVXNlVHJhY2tlcjogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSksXG4gICAgbWF4VHVybnM6IHoubnVtYmVyKCksXG4gICAgY3VycmVudEFnZW50U3BhbjogU2VyaWFsaXplZFNwYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIG5vQWN0aXZlQWdlbnRSdW46IHouYm9vbGVhbigpLFxuICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogei5hcnJheShpbnB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogei5hcnJheShvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIGN1cnJlbnRTdGVwOiBuZXh0U3RlcFNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGxhc3RNb2RlbFJlc3BvbnNlOiBtb2RlbFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgZ2VuZXJhdGVkSXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgbGFzdFByb2Nlc3NlZFJlc3BvbnNlOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICB0cmFjZTogc2VyaWFsaXplZFRyYWNlU2NoZW1hLm51bGxhYmxlKCksXG59KTtcbi8qKlxuICogU2VyaWFsaXphYmxlIHNuYXBzaG90IG9mIGFuIGFnZW50J3MgcnVuLCBpbmNsdWRpbmcgY29udGV4dCwgdXNhZ2UgYW5kIHRyYWNlLlxuICogV2hpbGUgdGhpcyBjbGFzcyBoYXMgcHVibGljbHkgd3JpdGFibGUgcHJvcGVydGllcyAocHJlZml4ZWQgd2l0aCBgX2ApLCB0aGV5IGFyZSBub3QgbWVhbnQgdG8gYmVcbiAqIHVzZWQgZGlyZWN0bHkuIFRvIHJlYWQgdGhlc2UgcHJvcGVydGllcywgdXNlIHRoZSBgUnVuUmVzdWx0YCBpbnN0ZWFkLlxuICpcbiAqIE1hbmlwdWxhdGlvbiBvZiB0aGUgc3RhdGUgZGlyZWN0bHkgY2FuIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvciBhbmQgc2hvdWxkIGJlIGF2b2lkZWQuXG4gKiBJbnN0ZWFkLCB1c2UgdGhlIGBhcHByb3ZlYCBhbmQgYHJlamVjdGAgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blN0YXRlIHtcbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHR1cm4gbnVtYmVyIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudDtcbiAgICAvKipcbiAgICAgKiBPcmlnaW5hbCB1c2VyIGlucHV0IHByaW9yIHRvIGFueSBwcm9jZXNzaW5nLlxuICAgICAqL1xuICAgIF9vcmlnaW5hbElucHV0O1xuICAgIC8qKlxuICAgICAqIFJlc3BvbnNlcyBmcm9tIHRoZSBtb2RlbCBzbyBmYXIuXG4gICAgICovXG4gICAgX21vZGVsUmVzcG9uc2VzO1xuICAgIC8qKlxuICAgICAqIEFjdGl2ZSB0cmFjaW5nIHNwYW4gZm9yIHRoZSBjdXJyZW50IGFnZW50IGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50U3BhbjtcbiAgICAvKipcbiAgICAgKiBSdW4gY29udGV4dCB0cmFja2luZyBhcHByb3ZhbHMsIHVzYWdlLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAgICovXG4gICAgX2NvbnRleHQ7XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoYXQgdG9vbHMgZWFjaCBhZ2VudCBoYXMgdXNlZC5cbiAgICAgKi9cbiAgICBfdG9vbFVzZVRyYWNrZXI7XG4gICAgLyoqXG4gICAgICogSXRlbXMgZ2VuZXJhdGVkIGJ5IHRoZSBhZ2VudCBkdXJpbmcgdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfZ2VuZXJhdGVkSXRlbXM7XG4gICAgLyoqXG4gICAgICogTWF4aW11bSBhbGxvd2VkIHR1cm5zIGJlZm9yZSBmb3JjaW5nIHRlcm1pbmF0aW9uLlxuICAgICAqL1xuICAgIF9tYXhUdXJucztcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBydW4gaGFzIGFuIGFjdGl2ZSBhZ2VudCBzdGVwIGluIHByb2dyZXNzLlxuICAgICAqL1xuICAgIF9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBMYXN0IG1vZGVsIHJlc3BvbnNlIGZvciB0aGUgcHJldmlvdXMgdHVybi5cbiAgICAgKi9cbiAgICBfbGFzdFR1cm5SZXNwb25zZTtcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gaW5wdXQgZ3VhcmRyYWlscyBhcHBsaWVkIHRvIHRoZSBydW4uXG4gICAgICovXG4gICAgX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gb3V0cHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIE5leHQgc3RlcCBjb21wdXRlZCBmb3IgdGhlIGFnZW50IHRvIHRha2UuXG4gICAgICovXG4gICAgX2N1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIFBhcnNlZCBtb2RlbCByZXNwb25zZSBhZnRlciBhcHBseWluZyBndWFyZHJhaWxzIGFuZCB0b29scy5cbiAgICAgKi9cbiAgICBfbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIFRyYWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJ1biBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX3RyYWNlID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBvcmlnaW5hbElucHV0LCBzdGFydGluZ0FnZW50LCBtYXhUdXJucykge1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxJbnB1dCA9IHN0cnVjdHVyZWRDbG9uZShvcmlnaW5hbElucHV0KTtcbiAgICAgICAgdGhpcy5fbW9kZWxSZXNwb25zZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50ID0gc3RhcnRpbmdBZ2VudDtcbiAgICAgICAgdGhpcy5fdG9vbFVzZVRyYWNrZXIgPSBuZXcgQWdlbnRUb29sVXNlVHJhY2tlcigpO1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZWRJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLl9tYXhUdXJucyA9IG1heFR1cm5zO1xuICAgICAgICB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl90cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBpbnRlcnJ1cHRpb25zIGlmIHRoZSBjdXJyZW50IHN0ZXAgaXMgYW4gaW50ZXJydXB0aW9uIG90aGVyd2lzZSByZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxuICAgICAqL1xuICAgIGdldEludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRTdGVwLmRhdGEuaW50ZXJydXB0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gYXBwcm92ZSB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSBhcHByb3ZlIHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzQXBwcm92ZWAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBhcHByb3ZhbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdHMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gcmVqZWN0IHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IHJlamVjdCB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c1JlamVjdGAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHJlamVjdGlvbi5cbiAgICAgKi9cbiAgICByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgICRzY2hlbWFWZXJzaW9uOiBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OLFxuICAgICAgICAgICAgY3VycmVudFR1cm46IHRoaXMuX2N1cnJlbnRUdXJuLFxuICAgICAgICAgICAgY3VycmVudEFnZW50OiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dDogdGhpcy5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgIG1vZGVsUmVzcG9uc2VzOiB0aGlzLl9tb2RlbFJlc3BvbnNlcy5tYXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzOiByZXNwb25zZS51c2FnZS5yZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLm91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcmVzcG9uc2UucmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiByZXNwb25zZS5wcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5fY29udGV4dC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xVc2VUcmFja2VyOiB0aGlzLl90b29sVXNlVHJhY2tlci50b0pTT04oKSxcbiAgICAgICAgICAgIG1heFR1cm5zOiB0aGlzLl9tYXhUdXJucyxcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudFNwYW46IHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4/LnRvSlNPTigpLFxuICAgICAgICAgICAgbm9BY3RpdmVBZ2VudFJ1bjogdGhpcy5fbm9BY3RpdmVBZ2VudFJ1bixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgICBhZ2VudDogci5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiB0aGlzLl9jdXJyZW50U3RlcCxcbiAgICAgICAgICAgIGxhc3RNb2RlbFJlc3BvbnNlOiB0aGlzLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHRoaXMuX2dlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS50b0pTT04oKSksXG4gICAgICAgICAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHRoaXMuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSxcbiAgICAgICAgICAgIHRyYWNlOiB0aGlzLl90cmFjZSA/IHRoaXMuX3RyYWNlLnRvSlNPTigpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGFyc2luZyB0aGUgc2NoZW1hIHRvIGVuc3VyZSB0aGUgb3V0cHV0IGlzIHZhbGlkIGZvciByZXBhcnNpbmdcbiAgICAgICAgY29uc3QgcGFyc2VkID0gU2VyaWFsaXplZFJ1blN0YXRlLnNhZmVQYXJzZShvdXRwdXQpO1xuICAgICAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3lzdGVtRXJyb3IoYEZhaWxlZCB0byBzZXJpYWxpemUgcnVuIHN0YXRlLiAke3BhcnNlZC5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICBjb25zdCBbcGFyc2luZ0Vycm9yLCBqc29uUmVzdWx0XSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBydW4gc3RhdGUuICR7cGFyc2luZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBwYXJzaW5nRXJyb3IubWVzc2FnZSA6IFN0cmluZyhwYXJzaW5nRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignUnVuIHN0YXRlIGlzIG1pc3Npbmcgc2NoZW1hIHZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNjaGVtYVZlcnNpb24gIT09IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFJ1biBzdGF0ZSBzY2hlbWEgdmVyc2lvbiAke2N1cnJlbnRTY2hlbWFWZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIHZlcnNpb24gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlSnNvbiA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5wYXJzZShKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBjb25zdCBhZ2VudE1hcCA9IGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVidWlsZCB0aGUgY29udGV4dFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoc3RhdGVKc29uLmNvbnRleHQuY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQuX3JlYnVpbGRBcHByb3ZhbHMoc3RhdGVKc29uLmNvbnRleHQuYXBwcm92YWxzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBhZ2VudCBmcm9tIHRoZSBpbml0aWFsIGFnZW50XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWUpO1xuICAgICAgICBpZiAoIWN1cnJlbnRBZ2VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQWdlbnQgJHtzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gbmV3IFJ1blN0YXRlKGNvbnRleHQsICcnLCBjdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5tYXhUdXJucyk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVybiA9IHN0YXRlSnNvbi5jdXJyZW50VHVybjtcbiAgICAgICAgLy8gcmVidWlsZCB0b29sIHVzZSB0cmFja2VyXG4gICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2FnZW50TmFtZSwgdG9vbE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZUpzb24udG9vbFVzZVRyYWNrZXIpKSB7XG4gICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShhZ2VudE1hcC5nZXQoYWdlbnROYW1lKSwgdG9vbE5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWJ1aWxkIGN1cnJlbnQgYWdlbnQgc3BhblxuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNlIGlzIG5vdCBzZXQsIHNraXBwaW5nIHRyYWNpbmcgc2V0dXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgICAgICB0cmFjZUlkOiBzdGF0ZUpzb24udHJhY2U/LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlSnNvbi50cmFjZT8ud29ya2Zsb3dfbmFtZSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogc3RhdGVKc29uLnRyYWNlPy5tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgIHN0YXRlLl90cmFjZSA9IHRyYWNlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gc3RhdGVKc29uLm5vQWN0aXZlQWdlbnRSdW47XG4gICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICAgICAgc3RhdGVKc29uLmlucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBzdGF0ZUpzb24ub3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50TWFwLmdldChyLmFnZW50Lm5hbWUpLFxuICAgICAgICB9KSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlSnNvbi5jdXJyZW50U3RlcDtcbiAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSBzdGF0ZUpzb24ub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzID0gc3RhdGVKc29uLm1vZGVsUmVzcG9uc2VzLm1hcChkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UpO1xuICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZVxuICAgICAgICAgICAgPyBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHN0YXRlSnNvbi5nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpO1xuICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZVxuICAgICAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgICAgIG5ld0FnZW50OiBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRTdGVwLm5ld0FnZW50Lm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHF1ZXVlID0gW2luaXRpYWxBZ2VudF07XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKG1hcC5oYXMoY3VycmVudEFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0KGN1cnJlbnRBZ2VudC5uYW1lLCBjdXJyZW50QWdlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRvZmYgb2YgY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZG9mZiBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kb2ZmLmFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYuYWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmLmFnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuKSB7XG4gICAgY29uc3Qgc3BhbkRhdGEgPSBzZXJpYWxpemVkU3Bhbi5zcGFuX2RhdGE7XG4gICAgY29uc3QgcHJldmlvdXNTcGFuID0gc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhblxuICAgICAgICA/IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhbilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzZXJpYWxpemVkU3Bhbi5pZCxcbiAgICAgICAgdHJhY2VJZDogc2VyaWFsaXplZFNwYW4udHJhY2VfaWQsXG4gICAgICAgIHBhcmVudElkOiBzZXJpYWxpemVkU3Bhbi5wYXJlbnRfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLnN0YXJ0ZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBlbmRlZEF0OiBzZXJpYWxpemVkU3Bhbi5lbmRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHNwYW5EYXRhLFxuICAgIH0sIHRyYWNlKTtcbiAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHByZXZpb3VzU3BhbjtcbiAgICByZXR1cm4gc3Bhbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UpIHtcbiAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgIHVzYWdlLnJlcXVlc3RzID0gc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UucmVxdWVzdHM7XG4gICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5pbnB1dFRva2VucztcbiAgICB1c2FnZS5vdXRwdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgdXNhZ2UudG90YWxUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS50b3RhbFRva2VucztcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICBwcm92aWRlckRhdGE6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplSXRlbShzZXJpYWxpemVkSXRlbSwgYWdlbnRNYXApIHtcbiAgICBzd2l0Y2ggKHNlcmlhbGl6ZWRJdGVtLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSksIHNlcmlhbGl6ZWRJdGVtLm91dHB1dCk7XG4gICAgICAgIGNhc2UgJ3JlYXNvbmluZ19pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVhc29uaW5nSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX2NhbGxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLnNvdXJjZUFnZW50Lm5hbWUpLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0udGFyZ2V0QWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2FwcHJvdmFsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgY3VycmVudEFnZW50LCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpO1xuICAgIGNvbnN0IHRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnY29tcHV0ZXInKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGhhbmRvZmZzID0gbmV3IE1hcChjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtlbnRyeS5uYW1lLCBoYW5kb2ZmKGVudHJ5KV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtlbnRyeS50b29sTmFtZSwgZW50cnldO1xuICAgIH0pKTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIG5ld0l0ZW1zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKSxcbiAgICAgICAgdG9vbHNVc2VkOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkLFxuICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kb2Zmcy5oYXMoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEhhbmRvZmYgJHtoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogaGFuZG9mZi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2Zmcy5nZXQoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBmdW5jdGlvbnM6IGF3YWl0IFByb21pc2UuYWxsKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbkNhbGwpID0+IHtcbiAgICAgICAgICAgIGlmICghdG9vbHMuaGFzKGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVG9vbCAke2Z1bmN0aW9uQ2FsbC50b29sLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogZnVuY3Rpb25DYWxsLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xzLmdldChmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLm1hcCgoY29tcHV0ZXJBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY29tcHV0ZXJBY3Rpb24uY29tcHV0ZXIubmFtZTtcbiAgICAgICAgICAgIGlmICghY29tcHV0ZXJUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQ29tcHV0ZXIgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGNvbXB1dGVyQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyOiBjb21wdXRlclRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzID8/IFtdKS5tYXAoKGFwcHJvdmFsUmVxdWVzdCkgPT4gKHtcbiAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW1cbiAgICAgICAgICAgICAgICAucmF3SXRlbSwgY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgIG1jcFRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0LmhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuZnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuU3RhdGUubWpzLm1hcCIsImltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVUb29sLCBzZXJpYWxpemVIYW5kb2ZmIH0gZnJvbSBcIi4vdXRpbHMvc2VyaWFsaXplLm1qc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVXNlckVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFkZFN0ZXBUb1J1blJlc3VsdCwgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cywgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMsIG1heWJlUmVzZXRUb29sQ2hvaWNlLCBwcm9jZXNzTW9kZWxSZXNwb25zZSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBZ2VudFNwYW4sIHdpdGhHdWFyZHJhaWxTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmNvbnN0IERFRkFVTFRfTUFYX1RVUk5TID0gMTA7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1cm5JbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgIGNvbnN0IHJhd0l0ZW1zID0gZ2VuZXJhdGVkSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlICE9PSAndG9vbF9hcHByb3ZhbF9pdGVtJykgLy8gZG9uJ3QgaW5jbHVkZSBhcHByb3ZhbCBpdGVtcyB0byBhdm9pZCBkb3VibGUgZnVuY3Rpb24gY2FsbHNcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtKTtcbiAgICBpZiAodHlwZW9mIG9yaWdpbmFsSW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9yaWdpbmFsSW5wdXQgPSBbeyB0eXBlOiAnbWVzc2FnZScsIHJvbGU6ICd1c2VyJywgY29udGVudDogb3JpZ2luYWxJbnB1dCB9XTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5vcmlnaW5hbElucHV0LCAuLi5yYXdJdGVtc107XG59XG4vKipcbiAqIEEgUnVubmVyIGlzIHJlc3BvbnNpYmxlIGZvciBydW5uaW5nIGFuIGFnZW50IHdvcmtmbG93LlxuICovXG5leHBvcnQgY2xhc3MgUnVubmVyIGV4dGVuZHMgUnVuSG9va3Mge1xuICAgIGNvbmZpZztcbiAgICBpbnB1dEd1YXJkcmFpbERlZnM7XG4gICAgb3V0cHV0R3VhcmRyYWlsRGVmcztcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIG1vZGVsUHJvdmlkZXI6IGNvbmZpZy5tb2RlbFByb3ZpZGVyID8/IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCksXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBoYW5kb2ZmSW5wdXRGaWx0ZXI6IGNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXIsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbHM6IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxzOiBjb25maWcub3V0cHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIHRyYWNpbmdEaXNhYmxlZDogY29uZmlnLnRyYWNpbmdEaXNhYmxlZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGE6IGNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhID8/IHRydWUsXG4gICAgICAgICAgICB3b3JrZmxvd05hbWU6IGNvbmZpZy53b3JrZmxvd05hbWUgPz8gJ0FnZW50IHdvcmtmbG93JyxcbiAgICAgICAgICAgIHRyYWNlSWQ6IGNvbmZpZy50cmFjZUlkLFxuICAgICAgICAgICAgZ3JvdXBJZDogY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICB0cmFjZU1ldGFkYXRhOiBjb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgc2F2ZWQgc3RhdGUgd2UgdXNlIHRoYXQgb25lLCBvdGhlcndpc2Ugd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgc3RhcnRpbmdBZ2VudCwgb3B0aW9ucy5tYXhUdXJucyA/PyBERUZBVUxUX01BWF9UVVJOUyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IHN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWwgPz8gdGhpcy5jb25maWcubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZzID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZk5hbWVzID0gaGFuZG9mZnMubWFwKChoKSA9PiBoLmFnZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBjcmVhdGVBZ2VudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZS5fY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogaGFuZG9mZk5hbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0U2NoZW1hTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiBzZXJpYWxpemVUb29sKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zcGFuRGF0YS50b29scyA9IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA+IHN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3N0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IGdldFR1cm5JbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBhd2FpdCBtb2RlbC5nZXRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2Uoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQgPSBzdGF0ZS5fY3VycmVudFN0ZXAubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIG91dHB1dCkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dEd1YXJkcmFpbHMubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCkpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE91dHB1dCA9IHN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCk7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgbW9kZWxSZXNwb25zZTogc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHNlcmlhbGl6ZVRvb2wodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgc3RpbGwgaW4gYW4gaW50ZXJydXB0aW9uLCBzbyB3ZSBuZWVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGN1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4ocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcmVzdWx0LnN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3Jlc3VsdC5zdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7Y3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7cmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IGN1cnJlbnRBZ2VudC5tb2RlbCA/PyB0aGlzLmNvbmZpZy5tb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzID0gbWF5YmVSZXNldFRvb2xDaG9pY2UoY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybklucHV0ID0gZ2V0VHVybklucHV0KHJlc3VsdC5pbnB1dCwgcmVzdWx0Lm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBtb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogYXdhaXQgY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChyZXN1bHQuc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHJlc3VsdC5zdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogdHVybklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sczogc2VyaWFsaXplZFRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IHNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShjdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyZXNwb25zZV9kb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQucGFyc2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlOiBuZXcgVXNhZ2UocGFyc2VkLnJlc3BvbnNlLnVzYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWQucmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgdXNlcidzIGNvZGUgZXhpdHMgYSBsb29wIHRvIGNvbnN1bWUgdGhlIHN0cmVhbSwgd2UgbmVlZCB0byBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbG9vcCB0byBwcmV2ZW50IGludGVybmFsIGZhbHNlIGVycm9ycyBhbmQgdW5uZWNlc3NhcnkgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuUmF3TW9kZWxTdHJlYW1FdmVudChldmVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIGRpZCBub3QgcHJvY3VkZSBhIGZpbmFsIHJlc3BvbnNlIScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gZmluYWxSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2UocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBjdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShjdXJyZW50QWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgZG9uZSBmb3Igbm93LiBEb24ndCBydW4gYW55IG91dHB1dCBndWFyZHJhaWxzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgPy5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudChjdXJyZW50QWdlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgYWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc3RyZWFtZWQgcmVzdWx0IHdpdGggZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJlYW1lZFJ1blJlc3VsdCh7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2V0dXAgZGVmYXVsdHNcbiAgICAgICAgICAgIHJlc3VsdC5tYXhUdXJucyA9IG9wdGlvbnMubWF4VHVybnMgPz8gc3RhdGUuX21heFR1cm5zO1xuICAgICAgICAgICAgLy8gQ29udGludWUgdGhlIHN0cmVhbSBsb29wIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RvbmUoKTtcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX3JhaXNlRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgIGNvbnRleHQ6IHVuZGVmaW5lZCxcbiAgICB9KSB7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlICYmIGlucHV0Ll90cmFjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpdGhUcmFjZShpbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oaW5wdXQuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxubGV0IF9kZWZhdWx0UnVubmVyID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFJ1bm5lcigpIHtcbiAgICBpZiAoX2RlZmF1bHRSdW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xuICAgIH1cbiAgICBfZGVmYXVsdFJ1bm5lciA9IG5ldyBSdW5uZXIoKTtcbiAgICByZXR1cm4gX2RlZmF1bHRSdW5uZXI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bi5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgdG9vbCwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5hbWU7XG4gICAgaW5zdHJ1Y3Rpb25zO1xuICAgIHByb21wdDtcbiAgICBoYW5kb2ZmRGVzY3JpcHRpb247XG4gICAgaGFuZG9mZnM7XG4gICAgbW9kZWw7XG4gICAgbW9kZWxTZXR0aW5ncztcbiAgICB0b29scztcbiAgICBtY3BTZXJ2ZXJzO1xuICAgIGlucHV0R3VhcmRyYWlscztcbiAgICBvdXRwdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dFR5cGUgPSAndGV4dCc7XG4gICAgdG9vbFVzZUJlaGF2aW9yO1xuICAgIHJlc2V0VG9vbENob2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcubmFtZSAhPT0gJ3N0cmluZycgfHwgY29uZmlnLm5hbWUudHJpbSgpID09PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQWdlbnQgbXVzdCBoYXZlIGEgbmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWcubmFtZTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBjb25maWcuaW5zdHJ1Y3Rpb25zID8/ICcnO1xuICAgICAgICB0aGlzLnByb21wdCA9IGNvbmZpZy5wcm9tcHQ7XG4gICAgICAgIHRoaXMuaGFuZG9mZkRlc2NyaXB0aW9uID0gY29uZmlnLmhhbmRvZmZEZXNjcmlwdGlvbiA/PyAnJztcbiAgICAgICAgdGhpcy5oYW5kb2ZmcyA9IGNvbmZpZy5oYW5kb2ZmcyA/PyBbXTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGNvbmZpZy5tb2RlbCA/PyAnJztcbiAgICAgICAgdGhpcy5tb2RlbFNldHRpbmdzID0gY29uZmlnLm1vZGVsU2V0dGluZ3MgPz8ge307XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMubWNwU2VydmVycyA9IGNvbmZpZy5tY3BTZXJ2ZXJzID8/IFtdO1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlscyA9IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlscyA9IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICBpZiAoY29uZmlnLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VHlwZSA9IGNvbmZpZy5vdXRwdXRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yID0gY29uZmlnLnRvb2xVc2VCZWhhdmlvciA/PyAncnVuX2xsbV9hZ2Fpbic7XG4gICAgICAgIHRoaXMucmVzZXRUb29sQ2hvaWNlID0gY29uZmlnLnJlc2V0VG9vbENob2ljZSA/PyB0cnVlO1xuICAgICAgICAvLyAtLS0gUnVudGltZSB3YXJuaW5nIGZvciBoYW5kb2ZmIG91dHB1dCB0eXBlIGNvbXBhdGliaWxpdHkgLS0tXG4gICAgICAgIGlmIChjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZG9mZnMgJiYgdGhpcy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZXMgPSBuZXcgU2V0KFtKU09OLnN0cmluZ2lmeSh0aGlzLm91dHB1dFR5cGUpXSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoIG9mIHRoaXMuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvdXRwdXRUeXBlJyBpbiBoICYmIGgub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGgub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdhZ2VudCcgaW4gaCAmJiBoLmFnZW50Lm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLmFnZW50Lm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0VHlwZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtBZ2VudF0gV2FybmluZzogSGFuZG9mZiBhZ2VudHMgaGF2ZSBkaWZmZXJlbnQgb3V0cHV0IHR5cGVzOiAke0FycmF5LmZyb20ob3V0cHV0VHlwZXMpLmpvaW4oJywgJyl9LiBZb3UgY2FuIG1ha2UgaXQgdHlwZS1zYWZlIGJ5IHVzaW5nIEFnZW50LmNyZWF0ZSh7IC4uLiB9KSBtZXRob2QgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT3VwdXQgc2NoZW1hIG5hbWVcbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0U2NoZW1hTmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnWm9kT3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29weSBvZiB0aGUgYWdlbnQsIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cyBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGRvOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV3QWdlbnQgPSBhZ2VudC5jbG9uZSh7IGluc3RydWN0aW9uczogJ05ldyBpbnN0cnVjdGlvbnMnIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gQSBwYXJ0aWFsIGNvbmZpZ3VyYXRpb24gdG8gY2hhbmdlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGFnZW50IHdpdGggdGhlIGdpdmVuIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2xvbmUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGlzIGFnZW50IGludG8gYSB0b29sLCBjYWxsYWJsZSBieSBvdGhlciBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIGhhbmRvZmZzIGluIHR3byB3YXlzOlxuICAgICAqIDEuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHJlY2VpdmVzIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50XG4gICAgICogICAgcmVjZWl2ZXMgZ2VuZXJhdGVkIGlucHV0LlxuICAgICAqIDIuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHRha2VzIG92ZXIgdGhlIGNvbnZlcnNhdGlvbi4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50IGlzXG4gICAgICogICAgY2FsbGVkIGFzIGEgdG9vbCwgYW5kIHRoZSBjb252ZXJzYXRpb24gaXMgY29udGludWVkIGJ5IHRoZSBvcmlnaW5hbCBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSB0b29sIHRoYXQgcnVucyB0aGUgYWdlbnQgYW5kIHJldHVybnMgdGhlIG91dHB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzVG9vbChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIHRvb2xEZXNjcmlwdGlvbiwgY3VzdG9tT3V0cHV0RXh0cmFjdG9yIH0gPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogWydpbnB1dCddLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0Py5jb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21PdXRwdXRFeHRyYWN0b3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE91dHB1dFRleHQocmVzdWx0LnJhd1Jlc3BvbnNlc1tyZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMubWNwU2VydmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QWxsTWNwVG9vbHModGhpcy5tY3BTZXJ2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFMbCBhZ2VudCB0b29scywgaW5jbHVkaW5nIHRoZSBNQ1BsIGFuZCBmdW5jdGlvbiB0b29scy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFsbCBjb25maWd1cmVkIHRvb2xzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QWxsVG9vbHMoKSB7XG4gICAgICAgIHJldHVybiBbLi4uKGF3YWl0IHRoaXMuZ2V0TWNwVG9vbHMoKSksIC4uLnRoaXMudG9vbHNdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICogQHJldHVybnMgVGhlIHBhcnNlZCBvdXQuXG4gICAgICovXG4gICAgcHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG91dHB1dCk7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUucGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGFnZW50LCB3aGljaCBpcyBzZXJpYWxpemFibGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGFnZW50J3MgbmFtZS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdlbnQubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5leHBvcnQgeyBBZ2VudEhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuZXhwb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0QWxsTWNwVG9vbHMsIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlLCBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCBob3N0ZWRNY3BUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZSA/PyAnYXNoJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogelxuICAgICAgICAgICAgLnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgndGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgXSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNvbnRlbnQ6IHouYXJyYXkoY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5pdGVtJykub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5lbnVtKFsnbWVzc2FnZScsICdmdW5jdGlvbl9jYWxsJywgJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0J10pLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnZlcnNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuY29udmVyc2F0aW9uJykub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLnRleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LTRvLXJlYWx0aW1lLXByZXZpZXcnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBzZXNzaW9uIGNvbmZpZyB0aGF0IGdldHMgc2VuZCBvdmVyIGR1cmluZyBzZXNzaW9uIGNvbm5lY3Rpb24gdW5sZXNzIG92ZXJyaWRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICB2b2ljZTogJ2FzaCcsXG4gICAgbW9kYWxpdGllczogWyd0ZXh0JywgJ2F1ZGlvJ10sXG4gICAgaW5wdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBvdXRwdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbjoge1xuICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnLFxuICAgIH0sXG4gICAgdHVybkRldGVjdGlvbjoge1xuICAgICAgICB0eXBlOiAnc2VtYW50aWNfdmFkJyxcbiAgICB9LFxufTtcbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZUJhc2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgI21vZGVsO1xuICAgICNhcGlLZXk7XG4gICAgI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI21vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50TW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICogKipOb3RlKio6IFRoZSBtb2RlbCBjYW5ub3QgYmUgY2hhbmdlZCBtaWQgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHNldCBjdXJyZW50TW9kZWwobW9kZWwpIHtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXNhZ2VfdXBkYXRlJywgdXNhZ2UpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXJuX2RvbmUnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlX2RvbmUnLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLmlkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2Uub3V0cHV0ID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS50ZXh0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Z1bmN0aW9uX2NhbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaXRlbS5jYWxsX2lkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogbWVzc2FnZSxcbiAgICAgICAgICAgIC4uLm90aGVyRXZlbnREYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsID8/XG4gICAgICAgICAgICAgICAgdGhpcy4jbW9kZWwgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RlbCxcbiAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudm9pY2UsXG4gICAgICAgICAgICBtb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RhbGl0aWVzLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fZm9ybWF0OiBjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiBjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5vdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHVybl9kZXRlY3Rpb246IE9wZW5BSVJlYWx0aW1lQmFzZS5idWlsZFR1cm5EZXRlY3Rpb25Db25maWcoY29uZmlnLnR1cm5EZXRlY3Rpb24pID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBjb25maWcudG9vbENob2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scz8ubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihjb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgLi4ucmVzdCB9ID0gYztcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZV9yZXNwb25zZTogY3JlYXRlUmVzcG9uc2UgPyBjcmVhdGVSZXNwb25zZSA6IGNyZWF0ZV9yZXNwb25zZSxcbiAgICAgICAgICAgIGVhZ2VybmVzcyxcbiAgICAgICAgICAgIGludGVycnVwdF9yZXNwb25zZTogaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA/IGludGVycnVwdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgOiBpbnRlcnJ1cHRfcmVzcG9uc2UsXG4gICAgICAgICAgICBwcmVmaXhfcGFkZGluZ19tczogcHJlZml4UGFkZGluZ01zID8gcHJlZml4UGFkZGluZ01zIDogcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgID8gc2lsZW5jZUR1cmF0aW9uTXNcbiAgICAgICAgICAgICAgICA6IHNpbGVuY2VfZHVyYXRpb25fbXMsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBjb25maWdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb25maWcpLmxlbmd0aCA+IDAgPyBjb25maWcgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZXNzaW9uIGNvbmZpZy4gVGhpcyB3aWxsIG1lcmdlIGl0IHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbiBjb25maWcgd2l0aCB0aGUgZGVmYXVsdFxuICAgICAqIHZhbHVlcyBhbmQgc2VuZCBpdCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgdXBkYXRlU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB0aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG91dHB1dCBvZiBhIGZ1bmN0aW9uIGNhbGwgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b29sQ2FsbCAtIFRoZSB0b29sIGNhbGwgdG8gc2VuZCB0aGUgb3V0cHV0IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcGFyYW0gc3RhcnRSZXNwb25zZSAtIFdoZXRoZXIgdG8gc3RhcnQgYSBuZXcgcmVzcG9uc2UgYWZ0ZXIgc2VuZGluZyB0aGUgb3V0cHV0LlxuICAgICAqL1xuICAgIHNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgc3RhcnRSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHRvb2xDYWxsLnByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdG9vbCBjYWxsIGl0ZW0nLCBlcnJvciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBJZiBgeyBjb21taXQ6IHRydWUgfWAgaXMgcGFzc2VkLCB0aGUgYXVkaW8gYnVmZmVyXG4gICAgICogd2lsbCBiZSBjb21taXR0ZWQgYW5kIHRoZSBtb2RlbCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGlmIHlvdSBoYXZlXG4gICAgICogZGlzYWJsZWQgdHVybiBkZXRlY3Rpb24gLyB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIHsgY29tbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyxcbiAgICAgICAgICAgIGF1ZGlvOiBhcnJheUJ1ZmZlclRvQmFzZTY0KGF1ZGlvKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb21taXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLiBUaGlzIHdpbGwgY3JlYXRlIGEgZGlmZiBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBoaXN0b3J5XG4gICAgICogYW5kIHNlbmQgdGhlIG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIFJlYWx0aW1lIEFQSSB0byB1cGRhdGUgdGhlIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgcmVzZXRIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdmFscywgYWRkaXRpb25zLCB1cGRhdGVzIH0gPSBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpO1xuICAgICAgICBjb25zdCByZW1vdmFsSWRzID0gbmV3IFNldChyZW1vdmFscy5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkKSk7XG4gICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gdXBkYXRlIGV2ZW50IGZvciBpdGVtcyBzbyB3ZSB3aWxsIHJlbW92ZSBhbmQgcmUtYWRkIHdoYXQncyB0aGVyZVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICByZW1vdmFsSWRzLmFkZCh1cGRhdGUuaXRlbUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZhbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtSWQgb2YgcmVtb3ZhbElkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRpdGlvbnNBbmRVcGRhdGVzID0gWy4uLmFkZGl0aW9ucywgLi4udXBkYXRlc107XG4gICAgICAgIGZvciAoY29uc3QgYWRkaXRpb24gb2YgYWRkaXRpb25zQW5kVXBkYXRlcykge1xuICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBhZGRpdGlvbi5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRpdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb24uaXRlbUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnJvbGUgIT09ICdzeXN0ZW0nICYmIGFkZGl0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRW50cnkuc3RhdHVzID0gYWRkaXRpb24uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRW50cnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhZGRpdGlvbi50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRnVuY3Rpb24gY2FsbHMgY2Fubm90IGJlIG1hbnVhbGx5IGFkZGVkIG9yIHVwZGF0ZWQgYXQgdGhlIG1vbWVudC4gSWdub3JpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUJhc2UubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5pbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBIRUFERVJTIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJSVEMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdCBjYW5cbiAqIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICpcbiAqIFVubGVzcyB5b3Ugc3BlY2lmeSBhIGBtZWRpYVN0cmVhbWAgb3IgYGF1ZGlvRWxlbWVudGAgb3B0aW9uLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZSBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViUlRDIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICBvcHRpb25zO1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjbXV0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLmJhc2VVcmwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWVgO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW5jbHVkaW5nIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGRhdGFcbiAgICAgKiBjaGFubmVsLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJXG4gICAgICogdmlhIFdlYlJUQy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAgICAgKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0aW5nJykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4gUGxlYXNlIGF3YWl0IG9yaWdpbmFsIHByb21pc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBvcHRpb25zLnVybCA/PyB0aGlzLiN1cmw7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRLZXkgPSB0eXBlb2YgYXBpS2V5ID09PSAnc3RyaW5nJyAmJiBhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSAmJiAhaXNDbGllbnRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gaW5zZWN1cmUgQVBJIGtleS4gUGxlYXNlIHVzZSBhIFdlYlNvY2tldCBjb25uZWN0aW9uIGluc3RlYWQgb3Igc2V0IHRoZSB1c2VJbnNlY3VyZUFwaUtleSBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyU2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVXJsID0gbmV3IFVSTChiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kaW5nIHRoZSBzZXNzaW9uIGNvbmZpZyBhZ2FpbiBoZXJlIG9uY2UgdGhlIGNoYW5uZWwgaXMgY29ubmVjdGVkIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBzZXNzaW9uIGNvbmZpZyBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZSBmaXJzdCByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGl0IG9uIGNvbm5lY3Rpb24gc2hvdWxkIHdvcmsgYnV0IHRoZSBjb25maWcgaXMgbm90IGJlaW5nIHZhbGlkYXRlZCBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyLiBUaGlzIHRyaWdnZXJzIGEgdmFsaWRhdGlvbiBlcnJvciBpZiB0aGUgY29uZmlnIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmcgPz8gJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhdWRpbyBwbGF5YmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudCA9IHRoaXMub3B0aW9ucy5hdWRpb0VsZW1lbnQgPz8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IGV2ZW50LnN0cmVhbXNbMF07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgbWljcm9waG9uZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9wdGlvbnMubWVkaWFTdHJlYW0gPz9cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBwZWVyQ29ubmVjdGlvbiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3NkcCcsIG9mZmVyLnNkcCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ29uZmlnKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2RwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25uZWN0aW9uVXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IEhFQURFUlNbJ1gtT3BlbkFJLUFnZW50cy1TREsnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IGF3YWl0IHNkcFJlc3BvbnNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLmRhdGFDaGFubmVsIHx8XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGRhdGEgY2hhbm5lbCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSBvciB1bm11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSAhbXV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSSBhbmQgZGlzY29ubmVjdHMgdGhlIHVuZGVybHlpbmcgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrPy5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgY3VycmVudCByZXNwb25zZSBpZiBvbmUgaXMgb25nb2luZyBhbmQgY2xlYXIgdGhlIGF1ZGlvIGJ1ZmZlciBzbyB0aGF0IHRoZSBhZ2VudFxuICAgICAqIHN0b3BzIHRhbGtpbmcuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5leHBvcnQgY29uc3QgV2ViU29ja2V0ID0gZ2xvYmFsVGhpcy5XZWJTb2NrZXQ7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgV2ViU29ja2V0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL19zaGltcyc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgYmFzZTY0VG9BcnJheUJ1ZmZlciwgSEVBREVSUywgV0VCU09DS0VUX01FVEEgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJTb2NrZXRzLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXRcbiAqIGNhbiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICAjYXBpS2V5O1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjY3VycmVudEl0ZW1JZDtcbiAgICAjY3VycmVudEF1ZGlvQ29udGVudEluZGV4O1xuICAgIC8qKlxuICAgICAqIFRpbWVzdGFtcCBtYWludGFpbmVkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIgdG8gYWlkIHdpdGggdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBlbGFwc2VkIHRpbWVcbiAgICAgKiBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZCB0byBjb21wdXRlIHRoZSByaWdodCBpbnRlcnJ1cHRpb24gdGltZS5cbiAgICAgKlxuICAgICAqIE1vc3RseSBpbnRlcm5hbCBidXQgbWlnaHQgYmUgdXNlZCBieSBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXJzIGZvciB0aGVpciBpbnRlcnJ1cHRpb25cbiAgICAgKiBjYWxjdWxhdGlvbi5cbiAgICAgKi9cbiAgICBfZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICBfYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx3YXlzIHJldHVybnMgYG51bGxgIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IGhhbmRsZSBtdXRpbmcuIEluc3RlYWQsXG4gICAgICogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgY2xpZW50IGJ5IG5vdCB0cmlnZ2VyaW5nIHRoZSBgc2VuZEF1ZGlvYCBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgaXRlbSBJRCBvZiB0aGUgb25nb2luZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEl0ZW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRJdGVtSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIHRoZSBgYXVkaW9gIGV2ZW50IHRoYXQgYSBjbGllbnQgbWlnaHQgbGlzdGVuIHRvIHRvIHJlY2VpdmUgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKiBQcm90ZWN0ZWQgZm9yIHlvdSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIGFuZCBkaXNhYmxlIGVtaXR0aW5nIHRoaXMgZXZlbnQgaW4gY2FzZSB5b3VyIGV4dGVuZGVkXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGhhbmRsZXMgYXVkaW8gaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpb0V2ZW50IC0gVGhlIGF1ZGlvIGV2ZW50IHRvIGVtaXQuXG4gICAgICovXG4gICAgX29uQXVkaW8oYXVkaW9FdmVudCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgYXVkaW9FdmVudCk7XG4gICAgfVxuICAgICNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4jYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBUEkga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIGBjb25uZWN0KClgIHdpdGggYW4gQVBJIGtleSBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJlxuICAgICAgICAgICAgIXRoaXMuI2FwaUtleS5zdGFydHNXaXRoKCdla18nKSAmJlxuICAgICAgICAgICAgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgaGF2ZSB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3ZWJzb2NrZXRBcmd1bWVudHMgPSBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgIC8vIEF1dGhcbiAgICAgICAgICAgICAgICAnb3BlbmFpLWluc2VjdXJlLWFwaS1rZXkuJyArIHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgICAgICAvLyBCZXRhIHByb3RvY29sLCByZXF1aXJlZFxuICAgICAgICAgICAgICAgICdvcGVuYWktYmV0YS5yZWFsdGltZS12MScsXG4gICAgICAgICAgICAgICAgLy8gVmVyc2lvbiBoZWFkZXJcbiAgICAgICAgICAgICAgICBXRUJTT0NLRVRfTUVUQSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuI2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAnT3BlbkFJLUJldGEnOiAncmVhbHRpbWU9djEnLFxuICAgICAgICAgICAgICAgICAgICAuLi5IRUFERVJTLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCB3cyA9IG5ldyBXZWJTb2NrZXQodGhpcy4jdXJsLCB3ZWJzb2NrZXRBcmd1bWVudHMpO1xuICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpby5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSBwYXJzZWQuY29udGVudF9pbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gcGFyc2VkLml0ZW1faWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2Ugc3RhcnQgdGltZXN0YW1wIGlzIG5vdCBzZXQsIHdlIHNldCBpdCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBlbGFwc2VkIHRpbWUgZm9yIGludGVycnVwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBidWZmID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwYXJzZWQuZGVsdGEpO1xuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYXVkaW8gbGVuZ3RoIGluIG1pbGxpc2Vjb25kcyBhc3N1bWluZyAyNGtIeiBwY20xNmxlXG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7IC8vIDI0a0h6ICogMiBieXRlcyBwZXIgc2FtcGxlXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcoc2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9XG4gICAgICAgICAgICBvcHRpb25zLnVybCA/P1xuICAgICAgICAgICAgICAgIGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZXNldCBhbnkgaW50ZXJuYWwgY29ubmVjdGlvbiB0cmFja2luZyB1c2VkIGZvciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldD8uY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBtdXRlKF9tdXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQuIFlvdSBoYXZlIHRvIG11dGUgdGhlIGF1ZGlvIGlucHV0IHlvdXJzZWxmLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgZm9yIHlvdXIgY2xpZW50IHRvIHNlbmQgYXVkaW8gdG8gdGhlXG4gICAgICogbW9kZWwgdG8gcmVzcG9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICBzdXBlci5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBjYW5jZWwgcmVzcG9uc2UgZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIHRvIGNhbmNlbCBhbiBvbmdvaW5nXG4gICAgICogIHJlc3BvbnNlIHRoYXQgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBnZW5lcmF0aW5nLlxuICAgICAqL1xuICAgIF9jYW5jZWxSZXNwb25zZSgpIHtcbiAgICAgICAgLy8gY2FuY2VsIHRoZSBvbmdvaW5nIHJlc3BvbnNlXG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSkge1xuICAgICAgICAvLyBpbW1lZGlhdGVseSBlbWl0IHRoaXMgZXZlbnQgc28gdGhlIGNsaWVudCBjYW4gc3RvcCBwbGF5aW5nIGF1ZGlvXG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXM6IGVsYXBzZWRUaW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhbmNlbFJlc3BvbnNlKCk7XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSAwICYmIGVsYXBzZWRUaW1lIDwgdGhpcy5fYXVkaW9MZW5ndGhNcykge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJydXB0KGVsYXBzZWRUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRIYW5kb2ZmLCBnZXRUcmFuc2Zlck1lc3NhZ2UsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFJ1bkNvbnRleHQsIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgaXNab2RPYmplY3QsIHRvU21hcnRTdHJpbmcgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbmltcG9ydCB7IGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsLCBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncywgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQyB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSwgaGFzV2ViUlRDU3VwcG9ydCwgdXBkYXRlUmVhbHRpbWVIaXN0b3J5LCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIEEgYFJlYWx0aW1lU2Vzc2lvbmAgaXMgdGhlIGNvcm5lciBwaWVjZSBvZiBidWlsZGluZyBWb2ljZSBBZ2VudHMuIEl0J3MgdGhlIGVxdWl2YWxlbnQgb2YgYVxuICogUnVubmVyIGluIHRleHQtYmFzZWQgYWdlbnRzIGV4Y2VwdCB0aGF0IGl0IGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBtdWx0aXBsZSB0dXJucyBieSBtYWludGFpbmluZyBhXG4gKiBjb25uZWN0aW9uIHdpdGggdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIFRoZSBzZXNzaW9uIGhhbmRsZXMgbWFuYWdpbmcgdGhlIGxvY2FsIGhpc3RvcnkgY29weSwgZXhlY3V0ZXMgdG9vbHMsIHJ1bnMgb3V0cHV0IGd1YXJkcmFpbHMsIGFuZFxuICogZmFjaWxpdGllcyBoYW5kb2Zmcy5cbiAqXG4gKiBUaGUgYWN0dWFsIGF1ZGlvIGhhbmRsaW5nIGFuZCBnZW5lcmF0aW9uIG9mIG1vZGVsIHJlc3BvbnNlcyBpcyBoYW5kbGVkIGJ5IHRoZSB1bmRlcmx5aW5nXG4gKiB0cmFuc3BvcnQgbGF5ZXIuIEJ5IGRlZmF1bHQgaWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIgd2l0aCBXZWJSVEMgc3VwcG9ydCwgdGhlIHNlc3Npb24gd2lsbFxuICogYXV0b21hdGljYWxseSB1c2UgdGhlIFdlYlJUQyB2ZXJzaW9uIG9mIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJLiBPbiB0aGUgc2VydmVyIG9yIGlmIHlvdSBwYXNzXG4gKiBgd2Vic29ja2V0YCBhcyB0aGUgdHJhbnNwb3J0IGxheWVyLCB0aGUgc2Vzc2lvbiB3aWxsIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gdXNpbmcgV2ViU29ja2V0cy5cbiAqXG4gKiBJbiB0aGUgY2FzZSBvZiBXZWJSVEMsIGluIHRoZSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBjcmVhdGUgYSB0cmFuc3BvcnQgbGF5ZXIgaW5zdGFuY2UgeW91cnNlbGYgYW5kIHBhc3MgaXQgaW4gdG8gaGF2ZSBtb3JlIGNvbnRyb2wgb3ZlclxuICogdGhlIGNvbmZpZ3VyYXRpb24gb3IgZXZlbiBleHRlbmQgdGhlIGV4aXN0aW5nIG9uZXMuIENoZWNrIG91dCB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgXG4gKiBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gY3JlYXRlIGEgY3VzdG9tIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGFnZW50ID0gbmV3IFJlYWx0aW1lQWdlbnQoe1xuICogICBuYW1lOiAnbXktYWdlbnQnLFxuICogICBpbnN0cnVjdGlvbnM6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhbmQgaGVscCB3aXRoIHRhc2tzLicsXG4gKiB9KVxuICpcbiAqIGNvbnN0IHNlc3Npb24gPSBuZXcgUmVhbHRpbWVTZXNzaW9uKGFnZW50KTtcbiAqIHNlc3Npb24uY29ubmVjdCh7XG4gKiAgIGFwaUtleTogJ3lvdXItYXBpLWtleScsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVhbHRpbWVTZXNzaW9uIGV4dGVuZHMgUnVudGltZUV2ZW50RW1pdHRlciB7XG4gICAgaW5pdGlhbEFnZW50O1xuICAgIG9wdGlvbnM7XG4gICAgI3RyYW5zcG9ydDtcbiAgICAjY3VycmVudEFnZW50O1xuICAgICNjdXJyZW50VG9vbHMgPSBbXTtcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxBZ2VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcgJiYgaGFzV2ViUlRDU3VwcG9ydCgpKSB8fFxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJydGMnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJSVEMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnNvY2tldCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gb3B0aW9ucy50cmFuc3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLiNjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoe1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuY29udGV4dCA/PyB7fSksXG4gICAgICAgICAgICBoaXN0b3J5OiB0aGlzLiNoaXN0b3J5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlscyA9IChvcHRpb25zLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhvcHRpb25zLm91dHB1dEd1YXJkcmFpbFNldHRpbmdzID8/IHt9KTtcbiAgICAgICAgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSA9IG9wdGlvbnMuaGlzdG9yeVN0b3JlQXVkaW8gPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc3BvcnQgbGF5ZXIgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNwb3J0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCBpbiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB1c2FnZSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdXNhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0LnVzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC4gTWlnaHQgYmUgYG51bGxgIGlmIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdFxuICAgICAqIHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydC5tdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNoaXN0b3J5O1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHRoaXMuI2N1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9IFtcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKSkuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpLFxuICAgICAgICAgICAgLi4uaGFuZG9mZlRvb2xzLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBhc3luYyAjZ2V0U2Vzc2lvbkNvbmZpZyhhZGRpdGlvbmFsQ29uZmlnID0ge30pIHtcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdCh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHRoaXMub3B0aW9uc1xuICAgICAgICAgICAgLnRyYWNpbmdEaXNhYmxlZFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWVcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfbmFtZTogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiAnYXV0byc7XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnICE9PSBudWxsICYmIHRyYWNpbmdDb25maWcgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgdHJhY2luZ0NvbmZpZy5ncm91cF9pZCA9IHRoaXMub3B0aW9ucy5ncm91cElkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgdHJhY2luZ0NvbmZpZy5tZXRhZGF0YSA9IHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5ncm91cElkIHx8IHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignSW4gb3JkZXIgdG8gc2V0IHRyYWNlTWV0YWRhdGEgb3IgYSBncm91cElkIHlvdSBuZWVkIHRvIHNwZWNpZnkgYSB3b3JrZmxvd05hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHZvaWNlOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2UsXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgdG9vbHM6IHRoaXMuI2N1cnJlbnRUb29scyxcbiAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAuLi5hZGRpdGlvbmFsQ29uZmlnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaW52b2tlKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHN0cmluZ1Jlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25DYWxsKHRvb2xDYWxsKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKHRoaXMuI2N1cnJlbnRBZ2VudC5oYW5kb2Zmc1xuICAgICAgICAgICAgLm1hcChnZXRIYW5kb2ZmKVxuICAgICAgICAgICAgLm1hcCgoaGFuZG9mZikgPT4gW2hhbmRvZmYudG9vbE5hbWUsIGhhbmRvZmZdKSk7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbE1hcCA9IG5ldyBNYXAoKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scygpKS5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICBpZiAocG9zc2libGVIYW5kb2ZmKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBwb3NzaWJsZUhhbmRvZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sID0gZnVuY3Rpb25Ub29sTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChmdW5jdGlvblRvb2wgJiYgZnVuY3Rpb25Ub29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCBmdW5jdGlvblRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xDYWxsLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKG91dHB1dCwgcmVzcG9uc2VJZCwgaXRlbUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvciwge1xuICAgICAgICAgICAgICAgIGl0ZW1JZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBpdGVtPy5pZCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQsIGl0ZW1JZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2RvbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0b3BwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgIGxldCBsYXN0SXRlbUlkO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBldmVudC5kZWx0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBldmVudC5pdGVtSWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJZCA9IGV2ZW50LnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtSWQgIT09IGl0ZW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbUlkID0gaXRlbUlkO1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSBjdXJyZW50VGV4dCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID0gbmV3VGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1J1bkluZGV4ID0gTWF0aC5mbG9vcihuZXdUZXh0Lmxlbmd0aCAvIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1J1bkluZGV4ID4gbGFzdFJ1bkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IG5ld1J1bkluZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBjYW5jZWwgZXhpc3RpbmcgcnVucyBiZWNhdXNlIHdlIHdhbnQgdGhlIGZpcnN0IG9uZSB0byBmYWlsIHRvIGZhaWxcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zcG9ydCBsYXllciBzaG91bGQgdXBvbiBmYWlsdXJlIGhhbmRsZSB0aGUgaW50ZXJydXB0aW9uIGFuZCBzdG9wIHRoZSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGdlbmVyYXRpbmcgZnVydGhlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKG5ld1RleHQsIHJlc3BvbnNlSWQsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fdXBkYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gIXRoaXMuI2hpc3Rvcnkuc29tZSgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBldmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZEl0ZW0gPSB0aGlzLiNoaXN0b3J5LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfYWRkZWQnLCBhZGRlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV9kZWxldGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB0aGlzLiNoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pdGVtSWQgIT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZnVuY3Rpb25fY2FsbCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvbkNhbGwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBoYW5kbGluZyBmdW5jdGlvbiBjYWxsJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd1c2FnZV91cGRhdGUnLCAodXNhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbnRleHQudXNhZ2UuYWRkKHVzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9faW50ZXJydXB0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllclxuICAgICAqIGFuZCBzdGFydCB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEFmdGVyIGNvbm5lY3RpbmcsIHRoZSBzZXNzaW9uIHdpbGwgYWxzbyBlbWl0IGEgYGhpc3RvcnlfdXBkYXRlZGAgZXZlbnQgd2l0aCBhbiBlbXB0eSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIC8vIG1ha2VzIHN1cmUgdGhlIGN1cnJlbnQgYWdlbnQgaXMgY29ycmVjdGx5IHNldCBhbmQgbG9hZHMgdGhlIHRvb2xzXG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC5jb25uZWN0KHtcbiAgICAgICAgICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy5vcHRpb25zLmFwaUtleSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsImJhc2U2NFRvQXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJiaW5hcnlTdHJpbmciLCJsZW4iLCJieXRlcyIsImkiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYXJyYXlCdWZmZXIiLCJnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiLCJpdGVtIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJuZXdJdGVtIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsImVudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5IiwiaGlzdG9yeSIsImV2ZW50Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIm5ld0V2ZW50IiwiZXhpc3RpbmdJbmRleCIsImlkeCIsInByZXZJbmRleCIsIkhFQURFUlMiLCJXRUJTT0NLRVRfTUVUQSIsInNhZmVFeGVjdXRlIiwiZm4iLCJlcnJvciIsIm1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0IiwicmVzcG9uc2VfZm9ybWF0IiwicGFyc2VyIiwib2JqIiwiaWdub3JlT3ZlcnJpZGUiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwib3B0aW9ucyIsInpvZERlZiIsInpvZFNjaGVtYSIsImlzRW1wdHlPYmoiLCJfayIsImdldFJlZnMiLCJfb3B0aW9ucyIsImN1cnJlbnRQYXRoIiwibmFtZSIsImRlZiIsImFkZEVycm9yTWVzc2FnZSIsInJlcyIsImtleSIsImVycm9yTWVzc2FnZSIsInJlZnMiLCJzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIiwidmFsdWUiLCJ1dGlsIiwiXyIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImsiLCJmaWx0ZXJlZCIsImUiLCJvYmplY3QiLCJrZXlzIiwiYXJyIiwiY2hlY2tlciIsInZhbCIsImpvaW5WYWx1ZXMiLCJhcnJheSIsInNlcGFyYXRvciIsIm9iamVjdFV0aWwiLCJmaXJzdCIsInNlY29uZCIsInV0aWwkMSIsIlpvZEVycm9yIiwiaXNzdWVzIiwic3ViIiwic3VicyIsImFjdHVhbFByb3RvIiwiX21hcHBlciIsIm1hcHBlciIsImlzc3VlIiwiZmllbGRFcnJvcnMiLCJwcm9jZXNzRXJyb3IiLCJjdXJyIiwiZWwiLCJmb3JtRXJyb3JzIiwiZXJyb3JVdGlsIiwibWVzc2FnZSIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsIl9iIiwiX2EiLCJwYXJzZURlZiIsInBhcnNlQmlnaW50RGVmIiwiY2hlY2siLCJwYXJzZUJvb2xlYW5EZWYiLCJwYXJzZUJyYW5kZWREZWYiLCJfZGVmIiwicGFyc2VDYXRjaERlZiIsInBhcnNlRGF0ZURlZiIsIm92ZXJyaWRlRGF0ZVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJpbnRlZ2VyRGF0ZVBhcnNlciIsInBhcnNlRGVmYXVsdERlZiIsInBhcnNlRWZmZWN0c0RlZiIsImZvcmNlUmVzb2x1dGlvbiIsInBhcnNlRW51bURlZiIsImlzSnNvblNjaGVtYTdBbGxPZlR5cGUiLCJ0eXBlIiwicGFyc2VJbnRlcnNlY3Rpb25EZWYiLCJhbGxPZiIsIngiLCJ1bmV2YWx1YXRlZFByb3BlcnRpZXMiLCJtZXJnZWRBbGxPZiIsInNjaGVtYSIsIm5lc3RlZFNjaGVtYSIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwicmVzdCIsInBhcnNlTGl0ZXJhbERlZiIsInBhcnNlZFR5cGUiLCJlbW9qaVJlZ2V4Iiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJyZWdleCIsInByb2Nlc3NSZWdFeHAiLCJyZWdleE9yRnVuY3Rpb24iLCJmbGFncyIsInNvdXJjZSIsInBhdHRlcm4iLCJpc0VzY2FwZWQiLCJpbkNoYXJHcm91cCIsImluQ2hhclJhbmdlIiwicmVnZXhUZXN0IiwicGFyc2VSZWNvcmREZWYiLCJhY2MiLCJfYyIsImtleVR5cGUiLCJfZCIsInBhcnNlTWFwRGVmIiwidmFsdWVzIiwicGFyc2VOYXRpdmVFbnVtRGVmIiwiYWN0dWFsVmFsdWVzIiwicGFyc2VkVHlwZXMiLCJwYXJzZU5ldmVyRGVmIiwicGFyc2VOdWxsRGVmIiwicHJpbWl0aXZlTWFwcGluZ3MiLCJwYXJzZVVuaW9uRGVmIiwiYXNBbnlPZiIsInR5cGVzIiwidW5pcXVlVHlwZXMiLCJhIiwiYW55T2YiLCJwYXJzZU51bGxhYmxlRGVmIiwiYmFzZSIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInJlc3VsdCIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJiIiwicGFyc2VQcm9taXNlRGVmIiwicGFyc2VTZXREZWYiLCJwYXJzZVR1cGxlRGVmIiwicGFyc2VVbmRlZmluZWREZWYiLCJwYXJzZVVua25vd25EZWYiLCJwYXJzZVJlYWRvbmx5RGVmIiwic2Vlbkl0ZW0iLCJvdmVycmlkZVJlc3VsdCIsInNlZW5TY2hlbWEiLCJnZXQkcmVmIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJpbmRleCIsInBhdGhBIiwicGF0aEIiLCJ0eXBlTmFtZSIsInpvZFRvSnNvblNjaGVtYSIsIm1haW4iLCJ0aXRsZSIsImRlZmluaXRpb25zIiwicHJvY2Vzc2VkRGVmaW5pdGlvbnMiLCJuZXdEZWZpbml0aW9ucyIsImNvbWJpbmVkIiwibWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCIsInRvb2wiLCJjYWxsYmFjayIsIl96b2RUb0pzb25TY2hlbWEiLCJ6b2RUZXh0Rm9ybWF0Iiwiem9kT2JqZWN0IiwicHJvcHMiLCJjb250ZW50Iiwiem9kUmVzcG9uc2VzRnVuY3Rpb24iLCJhcmdzIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsImlzWm9kT2JqZWN0IiwiaW5wdXQiLCJpc0FnZW50VG9vbElucHV0IiwidG9GdW5jdGlvblRvb2xOYW1lIiwiZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSIsImlucHV0VHlwZSIsImZvcm1hdHRlZEZ1bmN0aW9uIiwiY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIiwib3V0cHV0VHlwZSIsIm91dHB1dCIsInMiLCJtIiwiaCIsImQiLCJ3IiwieSIsIm1zIiwicGFyc2UiLCJmbXRMb25nIiwiZm10U2hvcnQiLCJzdHIiLCJtYXRjaCIsIm4iLCJtc0FicyIsInBsdXJhbCIsImlzUGx1cmFsIiwic2V0dXAiLCJlbnYiLCJjcmVhdGVEZWJ1ZyIsImNvZXJjZSIsImRpc2FibGUiLCJlbmFibGUiLCJlbmFibGVkIiwicmVxdWlyZSQkMCIsImRlc3Ryb3kiLCJzZWxlY3RDb2xvciIsIm5hbWVzcGFjZSIsImhhc2giLCJwcmV2VGltZSIsImVuYWJsZU92ZXJyaWRlIiwibmFtZXNwYWNlc0NhY2hlIiwiZW5hYmxlZENhY2hlIiwiZGVidWciLCJzZWxmIiwiZm9ybWF0IiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwidiIsImRlbGltaXRlciIsIm5ld0RlYnVnIiwibmFtZXNwYWNlcyIsInNwbGl0IiwibnMiLCJtYXRjaGVzVGVtcGxhdGUiLCJzZWFyY2giLCJ0ZW1wbGF0ZSIsInNlYXJjaEluZGV4IiwidGVtcGxhdGVJbmRleCIsInN0YXJJbmRleCIsIm1hdGNoSW5kZXgiLCJza2lwIiwiY29tbW9uIiwiZXhwb3J0cyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImxvY2Fsc3RvcmFnZSIsIndhcm5lZCIsIm1vZHVsZSIsImxhc3RDIiwiciIsImZvcm1hdHRlcnMiLCJsb2FkRW52IiwiX2xvYWRFbnYiLCJpc0VuYWJsZWQiLCJmbGFnTmFtZSIsInRyYWNpbmciLCJsb2dnaW5nIiwiZG9udExvZ01vZGVsRGF0YSIsImRvbnRMb2dUb29sRGF0YSIsImdldExvZ2dlciIsImxvZ2dlciIsInRvU21hcnRTdHJpbmciLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJydW5Db250ZXh0IiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJab2RQYXJzZWRUeXBlIiwiZ2V0UGFyc2VkVHlwZSIsImRhdGEiLCJab2RJc3N1ZUNvZGUiLCJlcnJvck1hcCIsIl9jdHgiLCJvdmVycmlkZUVycm9yTWFwIiwiZGVmYXVsdEVycm9yTWFwIiwiZ2V0RXJyb3JNYXAiLCJtYWtlSXNzdWUiLCJwYXJhbXMiLCJwYXRoIiwiZXJyb3JNYXBzIiwiaXNzdWVEYXRhIiwiZnVsbFBhdGgiLCJmdWxsSXNzdWUiLCJtYXBzIiwibWFwIiwiYWRkSXNzdWVUb0NvbnRleHQiLCJjdHgiLCJvdmVycmlkZU1hcCIsIlBhcnNlU3RhdHVzIiwic3RhdHVzIiwicmVzdWx0cyIsImFycmF5VmFsdWUiLCJJTlZBTElEIiwicGFpcnMiLCJzeW5jUGFpcnMiLCJwYWlyIiwiZmluYWxPYmplY3QiLCJESVJUWSIsIk9LIiwiaXNBYm9ydGVkIiwiaXNEaXJ0eSIsImlzVmFsaWQiLCJpc0FzeW5jIiwiUGFyc2VJbnB1dExhenlQYXRoIiwicGFyZW50IiwiaGFuZGxlUmVzdWx0IiwicHJvY2Vzc0NyZWF0ZVBhcmFtcyIsImludmFsaWRfdHlwZV9lcnJvciIsInJlcXVpcmVkX2Vycm9yIiwiZGVzY3JpcHRpb24iLCJpc3MiLCJab2RUeXBlIiwiZXJyIiwibWF5YmVBc3luY1Jlc3VsdCIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJvcHRpb24iLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJ0YXJnZXQiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiaXB2NFJlZ2V4IiwiaXB2NENpZHJSZWdleCIsImlwdjZSZWdleCIsImlwdjZDaWRyUmVnZXgiLCJiYXNlNjRSZWdleCIsImJhc2U2NHVybFJlZ2V4IiwiZGF0ZVJlZ2V4U291cmNlIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4U291cmNlIiwic2Vjb25kc1JlZ2V4U291cmNlIiwic2Vjb25kc1F1YW50aWZpZXIiLCJ0aW1lUmVnZXgiLCJkYXRldGltZVJlZ2V4Iiwib3B0cyIsImlzVmFsaWRJUCIsImlwIiwidmVyc2lvbiIsImlzVmFsaWRKV1QiLCJqd3QiLCJhbGciLCJoZWFkZXIiLCJkZWNvZGVkIiwiaXNWYWxpZENpZHIiLCJab2RTdHJpbmciLCJ0b29CaWciLCJ0b29TbWFsbCIsInZhbGlkYXRpb24iLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJjaCIsIm1pbiIsIm1heCIsImZsb2F0U2FmZVJlbWFpbmRlciIsInN0ZXAiLCJ2YWxEZWNDb3VudCIsInN0ZXBEZWNDb3VudCIsImRlY0NvdW50IiwidmFsSW50Iiwic3RlcEludCIsIlpvZE51bWJlciIsImtpbmQiLCJpbmNsdXNpdmUiLCJab2RCaWdJbnQiLCJab2RCb29sZWFuIiwiWm9kRGF0ZSIsIm1pbkRhdGUiLCJtYXhEYXRlIiwiWm9kU3ltYm9sIiwiWm9kVW5kZWZpbmVkIiwiWm9kTnVsbCIsIlpvZEFueSIsIlpvZFVua25vd24iLCJab2ROZXZlciIsIlpvZFZvaWQiLCJkZWVwUGFydGlhbGlmeSIsIlpvZE9iamVjdCIsIm5ld1NoYXBlIiwiZmllbGRTY2hlbWEiLCJab2RUdXBsZSIsInNoYXBlIiwic2hhcGVLZXlzIiwiZXh0cmFLZXlzIiwia2V5VmFsaWRhdG9yIiwidW5rbm93bktleXMiLCJjYXRjaGFsbCIsImRlZmF1bHRFcnJvciIsImF1Z21lbnRhdGlvbiIsIm1lcmdpbmciLCJtYXNrIiwibmV3RmllbGQiLCJjcmVhdGVab2RFbnVtIiwiaGFuZGxlUmVzdWx0cyIsInVuaW9uRXJyb3JzIiwiY2hpbGRDdHgiLCJkaXJ0eSIsImdldERpc2NyaW1pbmF0b3IiLCJab2RMYXp5IiwiWm9kTGl0ZXJhbCIsIlpvZEVudW0iLCJab2ROYXRpdmVFbnVtIiwiWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwiZGlzY3JpbWluYXRvciIsImRpc2NyaW1pbmF0b3JWYWx1ZSIsIm9wdGlvbnNNYXAiLCJkaXNjcmltaW5hdG9yVmFsdWVzIiwibWVyZ2VWYWx1ZXMiLCJhVHlwZSIsImJUeXBlIiwiYktleXMiLCJzaGFyZWRLZXlzIiwibmV3T2JqIiwic2hhcmVkVmFsdWUiLCJuZXdBcnJheSIsIml0ZW1BIiwiaXRlbUIiLCJoYW5kbGVQYXJzZWQiLCJwYXJzZWRMZWZ0IiwicGFyc2VkUmlnaHQiLCJtZXJnZWQiLCJsZWZ0IiwicmlnaHQiLCJpdGVtSW5kZXgiLCJzY2hlbWFzIiwiWm9kUmVjb3JkIiwidmFsdWVUeXBlIiwidGhpcmQiLCJab2RNYXAiLCJmaW5hbE1hcCIsIlpvZFNldCIsImZpbmFsaXplU2V0IiwiZWxlbWVudHMiLCJwYXJzZWRTZXQiLCJlbGVtZW50IiwibWluU2l6ZSIsIm1heFNpemUiLCJzaXplIiwiZ2V0dGVyIiwiZXhwZWN0ZWRWYWx1ZXMiLCJlbnVtVmFsdWVzIiwibmV3RGVmIiwib3B0IiwibmF0aXZlRW51bVZhbHVlcyIsInByb21pc2lmaWVkIiwiZWZmZWN0IiwiY2hlY2tDdHgiLCJhcmciLCJwcm9jZXNzZWQiLCJleGVjdXRlUmVmaW5lbWVudCIsImlubmVyIiwicHJlcHJvY2VzcyIsIm5ld0N0eCIsIlpvZE5hTiIsImluUmVzdWx0IiwiZnJlZXplIiwic3RyaW5nVHlwZSIsIm51bWJlclR5cGUiLCJib29sZWFuVHlwZSIsImFueVR5cGUiLCJhcnJheVR5cGUiLCJvYmplY3RUeXBlIiwidW5pb25UeXBlIiwiZGlzY3JpbWluYXRlZFVuaW9uVHlwZSIsInJlY29yZFR5cGUiLCJsYXp5VHlwZSIsImxpdGVyYWxUeXBlIiwiZW51bVR5cGUiLCJ6Lm9iamVjdCIsInouc3RyaW5nIiwiei5saXRlcmFsIiwiei5yZWNvcmQiLCJ6LmFueSIsInouYXJyYXkiLCJ6LmJvb2xlYW4iLCJnZXRBbGxNY3BGdW5jdGlvblRvb2xzIiwibWNwU2VydmVycyIsImNvbnZlcnRTY2hlbWFzVG9TdHJpY3QiLCJhbGxUb29scyIsInRvb2xOYW1lcyIsInNlcnZlciIsInNlcnZlclRvb2xzIiwiZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIiLCJpbnRlcnNlY3Rpb24iLCJ0IiwiX2NhY2hlZFRvb2xzIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJzcGFuIiwibWNwVG9vbHMiLCJ0b29scyIsIm1jcFRvRnVuY3Rpb25Ub29sIiwiZ2V0QWxsTWNwVG9vbHMiLCJtY3BUb29sIiwiX2NvbnRleHQiLCJzdHJpY3RTY2hlbWEiLCJlbnN1cmVTdHJpY3RKc29uU2NoZW1hIiwiZ2xvYmFsTG9nZ2VyIiwibm9uU3RyaWN0U2NoZW1hIiwib3V0IiwiQnJvd3NlckV2ZW50RW1pdHRlciIsIl9fcHJpdmF0ZUFkZCIsIl90YXJnZXQiLCJsaXN0ZW5lciIsIl9fcHJpdmF0ZUdldCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsIl9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDdXJyZW50VHJhY2UiLCJjdXJyZW50VHJhY2UiLCJfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlIiwidHJhY2UiLCJ3aXRoVHJhY2UiLCJuZXdUcmFjZSIsImdldEdsb2JhbFRyYWNlUHJvdmlkZXIiLCJnZXRPckNyZWF0ZVRyYWNlIiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwic3BhbkVycm9yIiwiY2xvbmVDdXJyZW50Q29udGV4dCIsIndpdGhOZXdTcGFuQ29udGV4dCIsImN1cnJlbnRDb250ZXh0IiwiY29weU9mQ29udGV4dCIsIkNvbnNvbGVTcGFuRXhwb3J0ZXIiLCJCYXRjaFRyYWNlUHJvY2Vzc29yIiwiZXhwb3J0ZXIiLCJtYXhRdWV1ZVNpemUiLCJtYXhCYXRjaFNpemUiLCJzY2hlZHVsZURlbGF5IiwiZXhwb3J0VHJpZ2dlclJhdGlvIiwiX0JhdGNoVHJhY2VQcm9jZXNzb3JfaW5zdGFuY2VzIiwiX21heFF1ZXVlU2l6ZSIsIl9tYXhCYXRjaFNpemUiLCJfc2NoZWR1bGVEZWxheSIsIl9leHBvcnRUcmlnZ2VyU2l6ZSIsIl9leHBvcnRlciIsIl9idWZmZXIiLCJfdGltZXIiLCJfdGltZW91dCIsIl9leHBvcnRJblByb2dyZXNzIiwiX3RpbWVvdXRBYm9ydENvbnRyb2xsZXIiLCJfX3ByaXZhdGVTZXQiLCJfX3ByaXZhdGVNZXRob2QiLCJydW5FeHBvcnRMb29wX2ZuIiwic2FmZUFkZEl0ZW1fZm4iLCJfdHJhY2UiLCJfc3BhbiIsImV4cG9ydEJhdGNoZXNfZm4iLCJyZXNvbHZlIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJwcm9jZXNzb3IiLCJwcm9jZXNzb3JzIiwiX2RlZmF1bHRFeHBvcnRlciIsIl9kZWZhdWx0UHJvY2Vzc29yIiwiZGVmYXVsdEV4cG9ydGVyIiwiZGVmYXVsdFByb2Nlc3NvciIsInRpbWVJc28iLCJnZW5lcmF0ZVRyYWNlSWQiLCJnZW5lcmF0ZVNwYW5JZCIsInJlbW92ZVByaXZhdGVGaWVsZHMiLCJfU3BhbiIsIl9kYXRhIiwiX3RyYWNlSWQiLCJfc3BhbklkIiwiX3BhcmVudElkIiwiX3Byb2Nlc3NvciIsIl9zdGFydGVkQXQiLCJfZW5kZWRBdCIsIl9lcnJvciIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwiY2xlYW51cCIsInJlYXNvbiIsInByb21pc2UiLCJHTE9CQUxfVFJBQ0VfUFJPVklERVIiLCJfd2l0aFNwYW5GYWN0b3J5IiwiY3JlYXRlU3BhbiIsImNyZWF0ZUFnZW50U3BhbiIsImNyZWF0ZUZ1bmN0aW9uU3BhbiIsIndpdGhGdW5jdGlvblNwYW4iLCJjcmVhdGVIYW5kb2ZmU3BhbiIsIndpdGhIYW5kb2ZmU3BhbiIsImNyZWF0ZUd1YXJkcmFpbFNwYW4iLCJ3aXRoR3VhcmRyYWlsU3BhbiIsImNyZWF0ZU1DUExpc3RUb29sc1NwYW4iLCJhZGRUcmFjZVByb2Nlc3NvciIsIkV2ZW50RW1pdHRlckRlbGVnYXRlIiwiQWdlbnRIb29rcyIsIlJ1bnRpbWVFdmVudEVtaXR0ZXIiLCJSdW5Ib29rcyIsImRlZmluZUlucHV0R3VhcmRyYWlsIiwiZXhlY3V0ZSIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldFRyYW5zZmVyTWVzc2FnZSIsImFnZW50IiwiZGVmYXVsdEhhbmRvZmZUb29sTmFtZSIsImRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uIiwiSGFuZG9mZiIsIm9uSW52b2tlSGFuZG9mZiIsImhhbmRvZmYiLCJjb25maWciLCJoYXNPbkhhbmRvZmYiLCJoYXNJbnB1dFR5cGUiLCJpbnB1dEpzb25TdHJpbmciLCJnZXRIYW5kb2ZmIiwiZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIiLCJTaGFyZWRCYXNlIiwiSXRlbUJhc2UiLCJSZWZ1c2FsIiwiT3V0cHV0VGV4dCIsIklucHV0VGV4dCIsIklucHV0SW1hZ2UiLCJ6XG4gICAgICAgIC5zdHJpbmciLCJJbnB1dEZpbGUiLCJBdWRpb0NvbnRlbnQiLCJJbWFnZUNvbnRlbnQiLCJUb29sT3V0cHV0VGV4dCIsIlRvb2xPdXRwdXRJbWFnZSIsIkNvbXB1dGVyVG9vbE91dHB1dCIsImNvbXB1dGVyQWN0aW9ucyIsInouZGlzY3JpbWluYXRlZFVuaW9uIiwiei5udW1iZXIiLCJ6LmVudW0iLCJBc3Npc3RhbnRDb250ZW50IiwiTWVzc2FnZUJhc2UiLCJBc3Npc3RhbnRNZXNzYWdlSXRlbSIsIlVzZXJDb250ZW50IiwiVXNlck1lc3NhZ2VJdGVtIiwiU3lzdGVtTWVzc2FnZUl0ZW0iLCJIb3N0ZWRUb29sQ2FsbEl0ZW0iLCJGdW5jdGlvbkNhbGxJdGVtIiwiRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSIsIkNvbXB1dGVyVXNlQ2FsbEl0ZW0iLCJDb21wdXRlckNhbGxSZXN1bHRJdGVtIiwiVG9vbENhbGxJdGVtIiwiUmVhc29uaW5nSXRlbSIsIlVua25vd25JdGVtIiwiT3V0cHV0TW9kZWxJdGVtIiwiTW9kZWxJdGVtIiwiei51bmlvbiIsIlVzYWdlRGF0YSIsIlN0cmVhbUV2ZW50VGV4dFN0cmVhbSIsIlN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkIiwiU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCIsIlN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0iLCJVc2FnZSIsIm5ld1VzYWdlIiwiUnVuQ29udGV4dCIsIl9hcHByb3ZhbHMiLCJhcHByb3ZhbHMiLCJ0b29sTmFtZSIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0IiwiUnVuUmVzdWx0QmFzZSIsImdldFR1cm5JbnB1dCIsInJlc3BvbnNlcyIsIlJ1blJlc3VsdCIsIlN0cmVhbWVkUnVuUmVzdWx0IiwiX3NpZ25hbCIsIl9yZWFkYWJsZUNvbnRyb2xsZXIiLCJfcmVhZGFibGVTdHJlYW0iLCJfY29tcGxldGVkUHJvbWlzZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVqZWN0IiwiX2NhbmNlbGxlZCIsIl9SZWFkYWJsZVN0cmVhbSIsImNvbnRyb2xsZXIiLCJyZWplY3QiLCJzdHJlYW0iLCJzZXJpYWxpemVUb29sIiwic2VyaWFsaXplSGFuZG9mZiIsIlJ1bkl0ZW1CYXNlIiwiUnVuTWVzc2FnZU91dHB1dEl0ZW0iLCJyYXdJdGVtIiwicGFydCIsIlJ1blRvb2xDYWxsSXRlbSIsIlJ1blRvb2xDYWxsT3V0cHV0SXRlbSIsIlJ1blJlYXNvbmluZ0l0ZW0iLCJSdW5IYW5kb2ZmQ2FsbEl0ZW0iLCJSdW5IYW5kb2ZmT3V0cHV0SXRlbSIsInNvdXJjZUFnZW50IiwidGFyZ2V0QWdlbnQiLCJSdW5Ub29sQXBwcm92YWxJdGVtIiwiZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSIsIm91dHB1dE1lc3NhZ2UiLCJsYXN0SXRlbSIsImdldE91dHB1dFRleHQiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJwcm9jZXNzTW9kZWxSZXNwb25zZSIsIm1vZGVsUmVzcG9uc2UiLCJoYW5kb2ZmcyIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwicnVuTUNQQXBwcm92YWxSZXF1ZXN0cyIsInRvb2xzVXNlZCIsImhhbmRvZmZNYXAiLCJmdW5jdGlvbk1hcCIsImNvbXB1dGVyVG9vbCIsIm1jcFRvb2xNYXAiLCJwcm92aWRlckRhdGEiLCJtY3BTZXJ2ZXJMYWJlbCIsIm1jcFNlcnZlclRvb2wiLCJmdW5jdGlvblRvb2wiLCJuZXh0U3RlcFNjaGVtYSIsIlNpbmdsZVN0ZXBSZXN1bHQiLCJvcmlnaW5hbElucHV0IiwicHJlU3RlcEl0ZW1zIiwibmV3U3RlcEl0ZW1zIiwibmV4dFN0ZXAiLCJtYXliZVJlc2V0VG9vbENob2ljZSIsInRvb2xVc2VUcmFja2VyIiwibW9kZWxTZXR0aW5ncyIsImV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMiLCJvcmlnaW5hbFByZVN0ZXBJdGVtcyIsIm5ld1Jlc3BvbnNlIiwicHJvY2Vzc2VkUmVzcG9uc2UiLCJydW5uZXIiLCJmdW5jdGlvbkNhbGxJZHMiLCJmdW5jdGlvblRvb2xSdW5zIiwicnVuIiwiZnVuY3Rpb25SZXN1bHRzIiwiZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzIiwibmV3SXRlbXMiLCJtY3BBcHByb3ZhbFJ1bnMiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmVkIiwiY2hlY2tUb29sT3V0cHV0IiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzIiwiY29tcHV0ZXJSZXN1bHRzIiwiZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyIsImFwcHJvdmFsUmVxdWVzdCIsInRvb2xEYXRhIiwicmVxdWVzdERhdGEiLCJhcHByb3ZhbFJlc3VsdCIsImFwcHJvdmFsUmVzcG9uc2VEYXRhIiwiZXhlY3V0ZUhhbmRvZmZDYWxscyIsIm1lc3NhZ2VJdGVtcyIsInBvdGVudGlhbEZpbmFsT3V0cHV0IiwiZ2V0VG9vbENhbGxPdXRwdXRJdGVtIiwidG9vbENhbGwiLCJ0b29sUnVucyIsInJ1blNpbmdsZVRvb2wiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsImFwcHJvdmFsIiwicmVzcG9uc2UiLCJfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90IiwiY29tcHV0ZXIiLCJhY3Rpb24iLCJzY3JlZW5zaG90IiwicCIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiaW1hZ2VVcmwiLCJhY3R1YWxIYW5kb2ZmIiwiaGFuZG9mZlNwYW4iLCJuZXdBZ2VudCIsInJlcXVlc3RlZEFnZW50cyIsImlucHV0RmlsdGVyIiwiaGFuZG9mZklucHV0RGF0YSIsIk5PVF9GSU5BTF9PVVRQVVQiLCJ0b29sUmVzdWx0cyIsImludGVycnVwdGlvbnMiLCJmaXJzdFRvb2xSZXN1bHQiLCJ0b29sVXNlQmVoYXZpb3IiLCJzdG9wcGluZ1Rvb2wiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJpdGVtTmFtZSIsIkFnZW50VG9vbFVzZVRyYWNrZXIiLCJfYWdlbnRUb1Rvb2xzIiwiQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwiU2VyaWFsaXplZFNwYW4iLCJ6XG4gICAgICAgIC5vYmplY3QiLCJ6LmxhenkiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuUmVhc29uaW5nSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJTZXJpYWxpemVkUnVuU3RhdGUiLCJwcm90b2NvbC5Nb2RlbEl0ZW0iLCJSdW5TdGF0ZSIsInN0YXJ0aW5nQWdlbnQiLCJtYXhUdXJucyIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsImFnZW50TmFtZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJfZSIsInF1ZXVlIiwiQWdlbnQiLCJzZXJpYWxpemVkU3BhbiIsInNwYW5EYXRhIiwicHJldmlvdXNTcGFuIiwic2VyaWFsaXplZE1vZGVsUmVzcG9uc2UiLCJ1c2FnZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwiREVGQVVMVF9NQVhfVFVSTlMiLCJnZXRUcmFjaW5nIiwidHJhY2luZ0Rpc2FibGVkIiwidHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSIsImdlbmVyYXRlZEl0ZW1zIiwicmF3SXRlbXMiLCJSdW5uZXIiLCJfUnVubmVyX2luc3RhbmNlcyIsInJ1bkluZGl2aWR1YWxTdHJlYW1fZm4iLCJydW5JbmRpdmlkdWFsTm9uU3RyZWFtX2ZuIiwibW9kZWwiLCJ0dXJuUmVzdWx0IiwiaGFuZG9mZk5hbWVzIiwic2VyaWFsaXplZFRvb2xzIiwic2VyaWFsaXplZEhhbmRvZmZzIiwicnVuSW5wdXRHdWFyZHJhaWxzX2ZuIiwidHVybklucHV0IiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImd1YXJkcmFpbHMiLCJndWFyZHJhaWxBcmdzIiwiZ3VhcmRyYWlsIiwiYWdlbnRPdXRwdXQiLCJydW5TdHJlYW1Mb29wX2ZuIiwiZmluYWxSZXNwb25zZSIsIm91dHB1dFR5cGVzIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsInJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEiLCJyZWFsdGltZVRvb2xDYWxsSXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgIC5lbnVtIiwielxuICAgICAgICAgICAgLnJlY29yZCIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hIiwiZXJyb3JFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEiLCJ6XG4gICAgLm9iamVjdCIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJ0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hIiwidHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJfT3BlbkFJUmVhbHRpbWVCYXNlIiwiX21vZGVsIiwiX2FwaUtleSIsIl90cmFjaW5nQ29uZmlnIiwiYXBpS2V5IiwiaXNHZW5lcmljIiwiaW5wdXRUb2tlbnMiLCJvdXRwdXRUb2tlbnMiLCJ0b3RhbFRva2VucyIsIl9mIiwicHJldmlvdXNJdGVtSWQiLCJyZWFsdGltZUl0ZW0iLCJvdGhlckV2ZW50RGF0YSIsImNyZWF0ZVJlc3BvbnNlIiwiY3JlYXRlX3Jlc3BvbnNlIiwiZWFnZXJuZXNzIiwiaW50ZXJydXB0UmVzcG9uc2UiLCJpbnRlcnJ1cHRfcmVzcG9uc2UiLCJwcmVmaXhQYWRkaW5nTXMiLCJwcmVmaXhfcGFkZGluZ19tcyIsInNpbGVuY2VEdXJhdGlvbk1zIiwic2lsZW5jZV9kdXJhdGlvbl9tcyIsInRocmVzaG9sZCIsInRyYWNpbmdDb25maWciLCJzZXNzaW9uRGF0YSIsInN0YXJ0UmVzcG9uc2UiLCJhdWRpbyIsImNvbW1pdCIsInJlbW92YWxJZHMiLCJ1cGRhdGUiLCJpdGVtSWQiLCJhZGRpdGlvbnNBbmRVcGRhdGVzIiwiYWRkaXRpb24iLCJpdGVtRW50cnkiLCJPcGVuQUlSZWFsdGltZUJhc2UiLCJPcGVuQUlSZWFsdGltZVdlYlJUQyIsIl91cmwiLCJfc3RhdGUiLCJfdXNlSW5zZWN1cmVBcGlLZXkiLCJfb25nb2luZ1Jlc3BvbnNlIiwiX211dGVkIiwiYmFzZVVybCIsImlzQ2xpZW50S2V5IiwidXNlclNlc3Npb25Db25maWciLCJjb25uZWN0aW9uVXJsIiwicGVlckNvbm5lY3Rpb24iLCJkYXRhQ2hhbm5lbCIsImF1ZGlvRWxlbWVudCIsIm9mZmVyIiwic2Vzc2lvbkNvbmZpZyIsImFuc3dlciIsIm11dGVkIiwic2VuZGVyIiwiV2ViU29ja2V0IiwiT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQiLCJfT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXRfaW5zdGFuY2VzIiwiX2N1cnJlbnRJdGVtSWQiLCJfY3VycmVudEF1ZGlvQ29udGVudEluZGV4IiwiYXVkaW9FdmVudCIsInNldHVwV2ViU29ja2V0X2ZuIiwiZWxhcHNlZFRpbWUiLCJ3ZWJzb2NrZXRBcmd1bWVudHMiLCJ3cyIsImJ1ZmYiLCJSZWFsdGltZVNlc3Npb24iLCJfUmVhbHRpbWVTZXNzaW9uX2luc3RhbmNlcyIsIl90cmFuc3BvcnQiLCJfY3VycmVudEFnZW50IiwiX2N1cnJlbnRUb29scyIsIl9vdXRwdXRHdWFyZHJhaWxzIiwiX291dHB1dEd1YXJkcmFpbFNldHRpbmdzIiwiX3RyYW5zY3JpYmVkVGV4dERlbHRhcyIsIl9oaXN0b3J5IiwiX3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEiLCJfaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCIsInNldEN1cnJlbnRBZ2VudF9mbiIsImdldFNlc3Npb25Db25maWdfZm4iLCJzZXRFdmVudExpc3RlbmVyc19mbiIsInVwZGF0ZWRIaXN0b3J5IiwiaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbF9mbiIsImhhbmRvZmZUb29scyIsImFkZGl0aW9uYWxDb25maWciLCJpbnN0cnVjdGlvbnMiLCJoYW5kbGVIYW5kb2ZmX2ZuIiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwicmVzcG9uc2VJZCIsImZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQiLCJmZWVkYmFja1RleHQiLCJ0ZXh0T3V0cHV0IiwibGFzdFJ1bkluZGV4IiwibGFzdEl0ZW1JZCIsImRlbHRhIiwibmV3VGV4dCIsIm5ld1J1bkluZGV4IiwiaXNOZXciLCJhZGRlZEl0ZW0iLCJ1dGlscyIsInV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlciIsInV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCIsInV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIl0sIm1hcHBpbmdzIjoidWdDQUNPLE1BQU1BLEVBQVcsQ0FFcEIsUUFBVyxPQU1mLEVDSE8sU0FBU0MsRUFBb0JDLEVBQVEsQ0FDeEMsTUFBTUMsRUFBZSxLQUFLRCxDQUFNLEVBQzFCRSxFQUFNRCxFQUFhLE9BQ25CRSxFQUFRLElBQUksV0FBV0QsQ0FBRyxFQUNoQyxRQUFTRSxFQUFJLEVBQUdBLEVBQUlGLEVBQUtFLElBQ3JCRCxFQUFNQyxDQUFDLEVBQUlILEVBQWEsV0FBV0csQ0FBQyxFQUV4QyxPQUFPRCxFQUFNLE1BQ2pCLENBTU8sU0FBU0UsR0FBb0JDLEVBQWEsQ0FDN0MsTUFBTUwsRUFBZSxPQUFPLGFBQWEsR0FBRyxJQUFJLFdBQVdLLENBQVcsQ0FBQyxFQUN2RSxPQUFPLEtBQUtMLENBQVksQ0FDNUIsQ0FNTyxTQUFTTSxHQUFrQ0MsRUFBTSxDQVlwRCxHQVhJLE9BQU9BLEVBQVMsS0FDaEJBLElBQVMsTUFDVCxPQUFPQSxHQUFTLFVBQ2hCLEVBQUUsU0FBVUEsSUFDWixPQUFPQSxFQUFLLE1BQVMsVUFDckIsQ0FBQ0EsRUFBSyxNQUdOQSxFQUFLLE9BQVMsV0FHZCxFQUFFLFlBQWFBLElBQ2YsQ0FBQyxNQUFNLFFBQVFBLEVBQUssT0FBTyxHQUMzQkEsRUFBSyxRQUFRLE9BQVMsRUFDdEIsT0FFSixNQUFNQyxFQUFrQkQs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QUFLK2dCLEdBQVMsS0FBTTlrQyxHQUFTQSxFQUFLLFNBQVdlLEVBQU0sTUFBTSxFQUN2RXdsQyxHQUNBLEtBQUssS0FBSyxnQkFBaUJBLENBQVMsQ0FFNUQsQ0FDZ0IsS0FBSyxLQUFLLGtCQUFtQnhpQixFQUFBLEtBQUsrZ0IsRUFBUSxDQUMxRCxPQUNtQnR1QixFQUFLLENBQ1IsS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBT0EsQ0FDM0IsQ0FBaUIsQ0FDakIsQ0FDQSxDQUFTLEVBQ0R1TixFQUFBLEtBQUt5Z0IsR0FBVyxHQUFHLGVBQWlCempDLEdBQVUsQ0FDMUMsR0FBSSxDQUNBaW1CLEVBQUEsS0FBSzhkLEVBQVcvZ0IsRUFBQSxLQUFLK2dCLEdBQVMsT0FBUTlrQyxHQUFTQSxFQUFLLFNBQVdlLEVBQU0sTUFBTSxHQUMzRWdqQixFQUFBLEtBQUtWLEdBQVMsUUFBUSxRQUFVVSxFQUFBLEtBQUsrZ0IsR0FDckMsS0FBSyxLQUFLLGtCQUFtQi9nQixFQUFBLEtBQUsrZ0IsRUFBUSxDQUMxRCxPQUNtQnR1QixFQUFLLENBQ1IsS0FBSyxLQUFLLFFBQVMsQ0FDZixLQUFNLFFBQ04sTUFBT0EsQ0FDM0IsQ0FBaUIsQ0FDakIsQ0FDQSxDQUFTLEVBQ0R1TixFQUFBLEtBQUt5Z0IsR0FBVyxHQUFHLGdCQUFpQixNQUFPempDLEdBQVUsQ0FDakQsR0FBSSxDQUNBLE1BQU1rbUIsRUFBQSxLQUFLc2QsRUFBQW1CLElBQUwsVUFBeUIza0MsRUFDL0MsT0FDbUJVLEVBQU8sQ0FDVm1SLEdBQU8sTUFBTSwrQkFBZ0NuUixDQUFLLEVBQ2xELEtBQUssS0FBSyxRQUFTLENBQ2YsS0FBTSxRQUNOLE1BQUFBLENBQ3BCLENBQWlCLENBQ2pCLENBQ0EsQ0FBUyxFQUNEc2lCLEVBQUEsS0FBS3lnQixHQUFXLEdBQUcsZUFBaUJ2SyxHQUFVLENBQzFDbFcsRUFBQSxLQUFLVixHQUFTLE1BQU0sSUFBSTRXLENBQUssQ0FDekMsQ0FBUyxFQUNEbFcsRUFBQSxLQUFLeWdCLEdBQVcsR0FBRyxvQkFBcUIsSUFBTSxDQUMxQyxLQUFLLEtBQUssb0JBQXFCemdCLEVBQUEsS0FBS1YsR0FBVVUsRUFBQSxLQUFLMGdCLEVBQWEsQ0FDNUUsQ0FBUyxFQUNEMWdCLEVBQUEsS0FBS3lnQixHQUFXLEdBQUcsUUFBVS9pQyxHQUFVLENBQ25DLEtBQUssS0FBSyxRQUFTQSxDQUFLLENBQ3BDLENBQVMsQ0FDVCxFQ3hYWSxNQUFDK2tDLEdBQVEsQ0FDakIsb0JBQXFCQyxFQUNyQixvQkFBcUJDLEdBQ3JCLGtDQUFtQ0MsRUFDdkMiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0OSw1MCw1MSw1Niw1Nyw1OCw1OSw2MCw2MSw2Ml19
